----item----
version: 1
id: {E728ECD8-8612-4061-B5B1-DE079EA64F1D}
database: master
path: /sitecore/media library/Themes/Habitat Sites/Habitat/Habitat/scripts/component-carousel
parent: {809BDE22-208D-499C-97E1-E6D854266115}
name: component-carousel
master: {00000000-0000-0000-0000-000000000000}
template: {962B53C4-F93B-4DF9-9821-415C867B8903}
templatekey: File
created: 20171031T140238Z

----field----
field: {40E50ED9-BA07-4702-992E-A912738D32DC}
name: Blob
key: blob
content-length: 93796

LyoqDQogKiBYQUNvbnRleHQNCiAqDQogKiBYQS5jb21wb25lbnQuY2Fyb3VzZWxzIG1vZHVsZS4N
CiAqDQogKiBFeHBvc2VzIHJlZ2lzdGVyKHNlbGVjdG9yLCBvcHRpb25zKSBtZXRob2QsIHdoaWNo
IGluaXRpYWxpemVzIENhcm91c2VsDQogKiBmb3IgZWFjaCBlbGVtZW50cyB0aGF0IG1hdGNoIHRo
ZSBwcm92aWRlZCBzZWxlY3Rvciwgd2l0aCBnaXZlbiBvcHRpb25zLg0KICogRWxlbWVudCB1c2Vk
IGFzIGEgY2Fyb3VzZWwgbXVzdCBjb250YWluIGEgPHVsIGNsYXNzPSJzbGlkZXMiPiB0YWcuDQog
KiBUaGF0IHRhZyBoYXZlIHRvIGJlIGZpbGxlZCB3aXRoIDxsaT4gZWxlbWVudHMuIEVhY2ggPGxp
PiBlbGVtZW50IHdpbGwgYmUgY29uc2lkZXJlZCBhcyBhIHNsaWRlLg0KICogRm9yIG1vcmUgZGV0
YWlscyByZWFkIHRoZSBkb2N1bWVudGF0aW9uIG9mIGEgcmVnaXN0ZXIoc2VsZWN0b3IsIG9wdGlv
bnMpIG1ldGhvZC4NCiAqDQogKiBAcmVxdWlyZXMgalF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2
MS40LjQgb3IgaGlnaGVyDQogKi8NCi8qIGdsb2JhbCBIYW1tZXI6dHJ1ZSAqLw0KWEEuY29tcG9u
ZW50LmNhcm91c2VscyA9IChmdW5jdGlvbigkKSB7DQogICAgdmFyIHB1YiA9IHt9LA0KICAgICAg
ICBOYXZpZ2F0aW9uQnVpbGRlciA9IG51bGwsDQogICAgICAgIFNsaWRlckluaXRpYWxpemVyID0g
bnVsbDsNCg0KICAgIC8qKg0KICAgICAqIFRpbWVyIGNsYXNzIHNhdmVzIHRpbWUgc3RhbXAgYW5k
IGNvdW50cyB0aW1lIGRpZmZlcmVuY2UgYmV0d2Vlbg0KICAgICAqIGN1cnJlbnQgdGltZSAodXBk
YXRlKCkgbWV0aG9kKSBhbmQgc2F2ZWQgdGltZSBzdGFtcC4NCiAgICAgKiBAY29uc3RydWN0b3IN
CiAgICAgKi8NCiAgICBmdW5jdGlvbiBUaW1lcigpIHsNCiAgICAgICAgLyoqDQogICAgICAgICAq
IFRpbWUgZGlmZmVyZW5jZSBiZXR3ZWVuIGxhc3QgdXBkYXRlKCkgY2FsbCBhbmQgbGFzdCBzZXQo
KSBjYWxsDQogICAgICAgICAqDQogICAgICAgICAqIEBtZW1iZXIgVGltZXINCiAgICAgICAgICov
DQogICAgICAgIHRoaXMuZWxhcHNlZCA9IDA7DQogICAgICAgIC8qKg0KICAgICAgICAgKiBUaW1l
IHN0YW1wDQogICAgICAgICAqDQogICAgICAgICAqIEBtZW1iZXIgVGltZXINCiAgICAgICAgICov
DQogICAgICAgIHRoaXMuc3RhbXAgPSBudWxsOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqICBD
b3VudHMgdGltZSBkaWZmZXJlbmNlIGJldHdlZW4gY3VycmVudCB0aW1lIGFuZCBzYXZlZCB0aW1l
IHN0YW1wDQogICAgICoNCiAgICAgKiBAbWVtYmVyIFRpbWVyDQogICAgICovDQogICAgVGltZXIu
cHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkgew0KICAgICAgICBpZiAodGhpcy5zdGFtcCAh
PT0gbnVsbCkgew0KICAgICAgICAgICAgdGhpcy5lbGFwc2VkICs9IHRoaXMubmV3U3RhbXAoKSAt
IHRoaXMuc3RhbXA7DQogICAgICAgIH0NCiAgICB9Ow0KDQogICAgLyoqDQogICAgICogIFNhdmVz
IG5ldyB0aW1lIHN0YW1wDQogICAgICoNCiAgICAgKiBAbWVtYmVyIFRpbWVyDQogICAgICovDQog
ICAgVGltZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICB0aGlzLnN0YW1w
ID0gdGhpcy5uZXdTdGFtcCgpOw0KICAgIH07DQoNCiAgICAvKioNCiAgICAgKiAgQ291bnRzIHRp
bWUgZGlmZmVyZW5jZSBiZXR3ZWVuIGN1cnJlbnQgdGltZSBhbmQgc2F2ZWQgdGltZSBzdGFtcA0K
ICAgICAqDQogICAgICogQG1lbWJlciBUaW1lcg0KICAgICAqIEByZXR1cm4gc3RhbXAgb2YgYSBj
dXJyZW50IHRpbWUNCiAgICAgKiBAdHlwZSBOdW1iZXINCiAgICAgKi8NCiAgICBUaW1lci5wcm90
b3R5cGUubmV3U3RhbXAgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKCku
dmFsdWVPZigpOw0KICAgIH07DQoNCiAgICAvKioNCiAgICAgKiAgUmVzZXRzIGVsYXBzZWQgdGlt
ZS4NCiAgICAgKg0KICAgICAqIEBtZW1iZXIgVGltZXINCiAgICAgKi8NCiAgICBUaW1lci5wcm90
b3R5cGUucmVzZXQgPSBmdW5jdGlvbigpIHsNCiAgICAgICAgdGhpcy5lbGFwc2VkID0gMDsNCiAg
ICB9Ow0KICAgIC8qKg0KICAgICAqIEVuZCBvZiBUaW1lciBjbGFzcw0KICAgICAqLw0KDQogICAg
LyoqDQogICAgICogVGltZUluZGljYXRvciBjbGFzcyBleHRlbmRzIFRpbWVyIGNsYXNzDQogICAg
ICogQGNvbnN0cnVjdG9yDQogICAgICogQHBhcmFtIHtPYmplY3R9ICQgICAgIGEgalF1ZXJ5IG9i
amVjdA0KICAgICAqIEBwYXJhbSB7WEEuY29tcG9uZW50LmNhcm91c2Vscy5JbmRpY2F0b3JWaWV3
cy5WaWV3fSB2aWV3ICBhIHRpbWUgaW5kaWNhdG9yIHZpZXcuDQogICAgICogQHBhcmFtIHtOdW1i
ZXJ9IHRpbWVvdXQgICBhIHZpZXcgdGltZW91dA0KICAgICAqIEBiYXNlIFRpbWVyDQogICAgICov
DQogICAgZnVuY3Rpb24gVGltZUluZGljYXRvcigkLCB2aWV3LCB0aW1lb3V0KSB7DQogICAgICAg
IC8qKg0KICAgICAgICAgKiBBIHRpbWUgaW5kaWNhdG9yIHZpZXcuDQogICAgICAgICAqDQogICAg
ICAgICAqIEBtZW1iZXIgVGltZXJJbmRpY2F0b3INCiAgICAgICAgICovDQogICAgICAgIHRoaXMu
dmlldyA9IHZpZXc7DQoNCiAgICAgICAgdGhpcy52aWV3LmluaXQodGltZW91dCk7DQogICAgfQ0K
ICAgIFRpbWVJbmRpY2F0b3IucHJvdG90eXBlID0gbmV3IFRpbWVyKCk7DQogICAgVGltZUluZGlj
YXRvci5jb25zdHJ1Y3RvciA9IFRpbWVyOw0KDQogICAgLyoqDQogICAgICogUGxheXMgdGhlIGF0
dGFjaGVkIHZpZXcuDQogICAgICoNCiAgICAgKiBAbWVtYmVyIFRpbWVySW5kaWNhdG9yDQogICAg
ICovDQogICAgVGltZUluZGljYXRvci5wcm90b3R5cGUucGxheSA9IGZ1bmN0aW9uKCkgew0KICAg
ICAgICB0aGlzLnZpZXcucGxheSgpOw0KICAgIH07DQoNCiAgICAvKioNCiAgICAgKiBQYXVzZXMg
dGhlIGF0dGFjaGVkIHZpZXcuDQogICAgICoNCiAgICAgKiBAbWVtYmVyIFRpbWVySW5kaWNhdG9y
DQogICAgICovDQogICAgVGltZUluZGljYXRvci5wcm90b3R5cGUucGF1c2UgPSBmdW5jdGlvbigp
IHsNCiAgICAgICAgdGhpcy52aWV3LnBhdXNlKCk7DQogICAgfTsNCg0KICAgIC8qKg0KICAgICAq
IFJlc2V0cyBlbGFwc2VkIHRpbWUgYW5kIHJlc2V0cyB0aGUgYXR0YWNoZWQgdmlldy4NCiAgICAg
Kg0KICAgICAqIEBtZW1iZXIgVGltZXJJbmRpY2F0b3INCiAgICAgKi8NCiAgICBUaW1lSW5kaWNh
dG9yLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICBUaW1lci5wcm90b3R5
cGUucmVzZXQuY2FsbCh0aGlzKTsNCiAgICAgICAgdGhpcy52aWV3LnJlc2V0KCk7DQogICAgfTsN
Cg0KICAgIC8qKg0KICAgICAqIENvdW50cyB0aW1lIGRpZmZlcmVuY2UgYmV0d2VlbiBjdXJyZW50
IHRpbWUgYW5kIHNhdmVkIHRpbWUgc3RhbXAuDQogICAgICogYW5kIHVwZGF0ZXMgdGhlIGF0dGFj
aGVkIHZpZXcNCiAgICAgKg0KICAgICAqIEBtZW1iZXIgVGltZXJJbmRpY2F0b3INCiAgICAgKi8N
CiAgICBUaW1lSW5kaWNhdG9yLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbigpIHsNCiAgICAg
ICAgVGltZXIucHJvdG90eXBlLnVwZGF0ZS5jYWxsKHRoaXMpOw0KICAgICAgICB0aGlzLnZpZXcu
dXBkYXRlKHRoaXMuZWxhcHNlZCk7DQogICAgfTsNCiAgICAvKioNCiAgICAgKiBlbmQgb2YgVGlt
ZUluZGljYXRvciBjbGFzcw0KICAgICAqLw0KDQogICAgLyoqDQogICAgICogTmF2aWdhdGlvbkJ1
aWxkZXIgb2JqZWN0IGNyZWF0ZXMgbmF2aWdhdGlvbiBpdGVtcw0KICAgICAqLw0KICAgIE5hdmln
YXRpb25CdWlsZGVyID0gKGZ1bmN0aW9uKCQpIHsNCiAgICAgICAgZnVuY3Rpb24gY3JlYXRlSXRl
bShzZXR0aW5ncykgew0KICAgICAgICAgICAgdmFyIHRleHQgPSBzZXR0aW5ncy50ZXh0LA0KICAg
ICAgICAgICAgICAgICRuYXZJdGVtID0gbnVsbDsNCg0KICAgICAgICAgICAgc2V0dGluZ3MudGV4
dCA9ICcnOw0KICAgICAgICAgICAgc2V0dGluZ3MuaHJlZiA9ICcjJzsNCg0KICAgICAgICAgICAg
JG5hdkl0ZW0gPSAkKCc8YT4nLCBzZXR0aW5ncyk7DQogICAgICAgICAgICAkKCc8c3Bhbj4nLCB7
DQogICAgICAgICAgICAgICAgJ3RleHQnOiB0ZXh0DQogICAgICAgICAgICB9KS5hcHBlbmRUbygk
bmF2SXRlbSk7DQoNCiAgICAgICAgICAgIHJldHVybiAkbmF2SXRlbTsNCiAgICAgICAgfQ0KDQog
ICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIFJldHVybnMg
dGhlIGVsZW1lbnQocykgdGhhdCBtYXRjaChlcykgdGhlIHByb3ZpZGVkIHNlbGVjdG9yIG9yIG51
bGwNCiAgICAgICAgICAgICAqDQogICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gc2VsZWN0
b3IgYSBzZWxlY3RvciB1c2VkIGZvciBzZWFyY2hpbmcNCiAgICAgICAgICAgICAqIEByZXR1cm4g
YSBqUXVlcnkgb2JqZWN0IGNvbnRhaW5pbmcgZWxlbWVudChzKSB0aGF0IG1hdGNoKGVzKSB0aGUg
cHJvdmlkZWQgc2VsZWN0b3Igb3IgbnVsbCBpZiBubyBlbGVtZW50IG1hdGNoDQogICAgICAgICAg
ICAgKiBAdHlwZSBPYmplY3QNCiAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgZ2V0RWxlbWVu
dDogZnVuY3Rpb24oc2VsZWN0b3IpIHsNCiAgICAgICAgICAgICAgICB2YXIgJGVsZW1lbnQgPSAk
KHNlbGVjdG9yKTsNCg0KICAgICAgICAgICAgICAgIGlmICgkZWxlbWVudC5sZW5ndGggPT09IDAp
IHsNCiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQgPSBudWxsOw0KICAgICAgICAgICAgICAg
IH0NCg0KICAgICAgICAgICAgICAgIHJldHVybiAkZWxlbWVudDsNCiAgICAgICAgICAgIH0sDQog
ICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIENyZWF0ZXMgbmF2aWdhdGlvbiBpdGVtcyBh
bmQgYXBwZW5kcyB0aGVtIHRvICRjb250YWluZXIuDQogICAgICAgICAgICAgKg0KICAgICAgICAg
ICAgICogQHBhcmFtIHtPYmplY3R9ICRjb250YWluZXIgICBuYXZpZ2F0aW9uIGl0ZW1zIGNvbnRh
aW5lciAoalF1ZXJ5IG9iamVjdCkNCiAgICAgICAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBsYWJl
bCAgIG5hdmlnYXRpb24gaXRlbXMgbGFiZWwgdGVtcGxhdGUNCiAgICAgICAgICAgICAqIEBwYXJh
bSB7TnVtYmVyfSBjb3VudCAgICBudW1iZXIgb2YgbmF2aWdhdGlvbiBpdGVtcyB0byBjcmVhdGUN
CiAgICAgICAgICAgICAqLw0KICAgICAgICAgICAgY3JlYXRlSXRlbXM6IGZ1bmN0aW9uKCRjb250
YWluZXIsIGxhYmVsLCBjb3VudCkgew0KICAgICAgICAgICAgICAgIHZhciBpLA0KICAgICAgICAg
ICAgICAgICAgICBwYXR0ZXJuID0gLyNce2luZGV4XH0vZywNCiAgICAgICAgICAgICAgICAgICAg
c2V0dGluZ3M7DQoNCiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgY291bnQ7IGkrKykg
ew0KICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncyA9IHsNCiAgICAgICAgICAgICAgICAgICAg
ICAgICd0ZXh0JzogbGFiZWwucmVwbGFjZShwYXR0ZXJuLCBpICsgMSkNCiAgICAgICAgICAgICAg
ICAgICAgfTsNCiAgICAgICAgICAgICAgICAgICAgY3JlYXRlSXRlbShzZXR0aW5ncykuYXBwZW5k
VG8oJGNvbnRhaW5lcik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwNCiAgICAg
ICAgICAgIC8qKg0KICAgICAgICAgICAgICogQ3JlYXRlcyBvciBzZWxlY3RzICdwcmV2aW91cycv
J25leHQnIG5hdmlnYXRpb24gaXRlbS4NCiAgICAgICAgICAgICAqIE1vZGUgb2YgYWN0aW9uIGRl
cGVuZHMgb24gc2V0dGluZ3Mgb2JqZWN0Og0KICAgICAgICAgICAgICogdmFyIHNldHRpbmdzID0g
ew0KICAgICAgICAgICAgICogICAgIGlzQ29udGFpbmVyOiBCb29sZWFuIHZhbHVlLA0KICAgICAg
ICAgICAgICogICAgIGxhYmVsOiBTdHJpbmcgdmFsdWUsDQogICAgICAgICAgICAgKiAgICAgc2Vs
ZWN0b3I6IFN0cmluZyB2YWx1ZSwNCiAgICAgICAgICAgICAqICAgICBtZXRob2Q6IFN0cmluZyB2
YWx1ZQ0KICAgICAgICAgICAgICogfTsNCiAgICAgICAgICAgICAqDQogICAgICAgICAgICAgKiBJ
ZiBzZXR0aW5ncy5zZWxlY3RvciA9PT0gbnVsbCBvciBpZiBzZXR0aW5ncy5zZWxlY3RvciAhPT0g
bnVsbCBhbmQgc2V0dGluZ3MuaXNDb250YWluZXIgPT0gdHJ1ZQ0KICAgICAgICAgICAgICogbmF2
aWdhdGlvbiBpdGVtIGlzIGNyZWF0ZWQgYW5kIGF0dGFjaGVkIHRvICRlbGVtZW50LmZpcnN0KCkg
KHVzaW5nIHNldHRpbmdzLm1ldGhvZCkuDQogICAgICAgICAgICAgKiBJZiBzZXR0aW5ncy5zZWxl
Y3RvciAhPT0gbnVsbCBhbmQgc2V0dGluZ3MuaXNDb250YWluZXIgPT0gZmFsc2UNCiAgICAgICAg
ICAgICAqICRlbGVtZW50LmZpcnN0KCkgaXMgc2VsZWN0ZWQgYXMgbmF2aWdhdGlvbiBpdGVtDQog
ICAgICAgICAgICAgKg0KICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9IHNldHRpbmdzIHNl
dHRpbmdzIG9mIG5hdmlnYXRpb24gaXRlbQ0KICAgICAgICAgICAgICogQHBhcmFtIHtPYmplY3R9
IGl0ZW1TZXR0aW5ncyAgIGh0bWwgYXR0cmlidXRlcyBvZiBuYXZpZ2F0aW9uIGl0ZW0NCiAgICAg
ICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSAkZWxlbWVudCAgICBuYXZpZ2F0aW9uIGl0ZW1zIGNv
bnRhaW5lciAoalF1ZXJ5IG9iamVjdCkNCiAgICAgICAgICAgICAqIEByZXR1cm4gVGhlICdwcmV2
Jy8nbmV4dCcgbmF2aWdhdGlvbiBpdGVtDQogICAgICAgICAgICAgKiBAdHlwZSBPYmplY3QNCiAg
ICAgICAgICAgICAqLw0KICAgICAgICAgICAgY3JlYXRlUHJldk5leHRJdGVtOiBmdW5jdGlvbihz
ZXR0aW5ncywgaXRlbVNldHRpbmdzLCAkZWxlbWVudCkgew0KICAgICAgICAgICAgICAgIHZhciAk
aXRlbSA9IG51bGwsDQogICAgICAgICAgICAgICAgICAgIGlzU2VsZWN0b3JFeGlzdHMgPSBzZXR0
aW5ncy5zZWxlY3RvciAhPT0gbnVsbDsNCg0KDQogICAgICAgICAgICAgICAgaWYgKGlzU2VsZWN0
b3JFeGlzdHMpIHsNCiAgICAgICAgICAgICAgICAgICAgJGVsZW1lbnQgPSB0aGlzLmdldEVsZW1l
bnQoc2V0dGluZ3Muc2VsZWN0b3IpOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAg
ICAgIGlmICgkZWxlbWVudCAhPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgICAgICBpZiAoc2V0
dGluZ3MuaXNDb250YWluZXIgfHwgIWlzU2VsZWN0b3JFeGlzdHMpIHsNCiAgICAgICAgICAgICAg
ICAgICAgICAgICRpdGVtID0gY3JlYXRlSXRlbSgkLmV4dGVuZCh7fSwgew0KICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICd0ZXh0Jzogc2V0dGluZ3MubGFiZWwNCiAgICAgICAgICAgICAgICAg
ICAgICAgIH0sIGl0ZW1TZXR0aW5ncykpOw0KICAgICAgICAgICAgICAgICAgICAgICAgKCRlbGVt
ZW50LmZpcnN0KCkpW3NldHRpbmdzLm1ldGhvZF0oJGl0ZW0pOw0KICAgICAgICAgICAgICAgICAg
ICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW0gPSAkZWxlbWVudC5maXJz
dCgpOw0KICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KDQogICAgICAg
ICAgICAgICAgcmV0dXJuICRpdGVtOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9Ow0KICAgIH0o
JCkpOw0KICAgIC8qKg0KICAgICAqIGVuZCBvZiBOYXZpZ2F0aW9uQnVpbGRlciBvYmplY3QNCiAg
ICAgKi8NCg0KICAgIC8qKg0KICAgICAqIE5hdmlnYXRpb24gY2xhc3MgaG9sZHMgbmF2aWdhdGlv
biBpdGVtcy4NCiAgICAgKiBAY29uc3RydWN0b3INCiAgICAgKi8NCiAgICBmdW5jdGlvbiBOYXZp
Z2F0aW9uKCQsICR3cmFwcGVyLCBvcHRpb25zKSB7DQogICAgICAgIHZhciBkZWZhdWx0cyA9IHsN
CiAgICAgICAgICAgICAgICAnaXNFbmFibGVkJzogdHJ1ZSwNCiAgICAgICAgICAgICAgICAnaGFz
UHJldk5leHRJdGVtcyc6IHRydWUsDQogICAgICAgICAgICAgICAgJ2l0ZW0nOiB7DQogICAgICAg
ICAgICAgICAgICAgICdsYWJlbCc6ICcje2luZGV4fScsDQogICAgICAgICAgICAgICAgICAgICdz
ZWxlY3Rvcic6IG51bGwNCiAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICdwcmV2
SXRlbSc6IHsNCiAgICAgICAgICAgICAgICAgICAgJ2xhYmVsJzogJzwnLA0KICAgICAgICAgICAg
ICAgICAgICAnc2VsZWN0b3InOiBudWxsLA0KICAgICAgICAgICAgICAgICAgICAnaXNDb250YWlu
ZXInOiBmYWxzZQ0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgJ25leHRJdGVt
Jzogew0KICAgICAgICAgICAgICAgICAgICAnbGFiZWwnOiAnPicsDQogICAgICAgICAgICAgICAg
ICAgICdzZWxlY3Rvcic6IG51bGwsDQogICAgICAgICAgICAgICAgICAgICdpc0NvbnRhaW5lcic6
IGZhbHNlDQogICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAnc2xpZGVzQ291bnQn
OiAwDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgc2V0dGluZ3MgPSAkLmV4dGVuZCh0cnVl
LCB7fSwgZGVmYXVsdHMsIG9wdGlvbnMpOw0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBqUXVl
cnkgb2JqZWN0DQogICAgICAgICAqDQogICAgICAgICAqIEBtZW1iZXIgTmF2aWdhdGlvbg0KICAg
ICAgICAgKi8NCiAgICAgICAgdGhpcy4kID0gJDsNCiAgICAgICAgLyoqDQogICAgICAgICAqIE5h
dmlnYXRpb24gaXRlbXMgKG9uZSBmb3IgZWFjaCBzbGlkZSBpZiBuYXZpZ2F0aW9uIGlzIGVuYWJs
ZWQpLg0KICAgICAgICAgKg0KICAgICAgICAgKiBAbWVtYmVyIE5hdmlnYXRpb24NCiAgICAgICAg
ICovDQogICAgICAgIHRoaXMuJGl0ZW1zID0gJCgpOw0KICAgICAgICAvKioNCiAgICAgICAgICog
TmF2aWdhdGlvbiAnbmV4dCcgaXRlbSAoaWYgcHJldi9uZXh0IGl0ZW1zIGFyZSBlbmFibGVkKS4N
CiAgICAgICAgICoNCiAgICAgICAgICogQG1lbWJlciBOYXZpZ2F0aW9uDQogICAgICAgICAqLw0K
ICAgICAgICB0aGlzLiRuZXh0SXRlbSA9ICQoKTsNCiAgICAgICAgLyoqDQogICAgICAgICAqIE5h
dmlnYXRpb24gJ3ByZXZpb3VzJyBpdGVtIChpZiBwcmV2L25leHQgaXRlbXMgYXJlIGVuYWJsZWQp
Lg0KICAgICAgICAgKg0KICAgICAgICAgKiBAbWVtYmVyIE5hdmlnYXRpb24NCiAgICAgICAgICov
DQogICAgICAgIHRoaXMuJHByZXZJdGVtID0gJCgpOw0KICAgICAgICAvKioNCiAgICAgICAgICog
U2VsZWN0ZWQgaXRlbSAob25lIGZyb20gdGhpcy4kaXRlbXMgb3IgbnVsbCkuDQogICAgICAgICAq
DQogICAgICAgICAqIEBtZW1iZXIgTmF2aWdhdGlvbg0KICAgICAgICAgKi8NCiAgICAgICAgdGhp
cy4kc2VsZWN0ZWRJdGVtID0gbnVsbDsNCg0KICAgICAgICAvL2luaXRpYWxpemF0aW9uDQogICAg
ICAgIGlmIChzZXR0aW5ncy5pc0VuYWJsZWQpIHsNCiAgICAgICAgICAgIHZhciBzZWxmID0gdGhp
czsNCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAg
c2VsZi5wcmVwYXJlSXRlbXMoc2V0dGluZ3MuaXRlbSwgc2V0dGluZ3Muc2xpZGVzQ291bnQsICR3
cmFwcGVyKTsNCiAgICAgICAgICAgICAgICAvL3NlbGVjdCBmaXJzdCBpdGVtIG9uIGluaXQNCiAg
ICAgICAgICAgICAgICBzZWxmLnNlbGVjdEl0ZW0oMCkNCiAgICAgICAgICAgIH0sIDEwMDApOw0K
DQogICAgICAgICAgICAkd3JhcHBlci5maW5kKCcubmF2JykudHJpZ2dlcignbmF2aWdhdGlvbi1j
cmVhdGVkJywgdGhpcyk7DQoNCg0KICAgICAgICB9DQogICAgfQ0KDQogICAgLyoqDQogICAgICog
Q1NTIGNsYXNzbSB3aGljaCB3aWxsIGJlIHVzZWQgZm9yIG1hcmsgc2VsZWN0ZWQgaXRlbQ0KICAg
ICAqDQogICAgICogQG1lbWJlciBOYXZpZ2F0aW9uDQogICAgICovDQogICAgTmF2aWdhdGlvbi5w
cm90b3R5cGUuc2VsZWN0ZWRJdGVtQ2xhc3MgPSAnYWN0aXZlJzsNCg0KICAgIC8qKg0KICAgICAq
IE1hcmsgbmF2aWdhdGlvbiBpdGVtIHdpdGggZ2l2ZW4gaW5kZXggYXMgc2VsZWN0ZWQuDQogICAg
ICoNCiAgICAgKiBAbWVtYmVyIE5hdmlnYXRpb24NCiAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5k
ZXggICAgIGluZGV4IG9mIG5hdmlnYXRpb24gaXRlbQ0KICAgICAqLw0KICAgIE5hdmlnYXRpb24u
cHJvdG90eXBlLnNlbGVjdEl0ZW0gPSBmdW5jdGlvbihpbmRleCkgew0KICAgICAgICBpZiAodGhp
cy4kc2VsZWN0ZWRJdGVtICE9PSBudWxsKSB7DQogICAgICAgICAgICB0aGlzLiRzZWxlY3RlZEl0
ZW0ucmVtb3ZlQ2xhc3ModGhpcy5zZWxlY3RlZEl0ZW1DbGFzcyk7DQogICAgICAgIH0NCg0KICAg
ICAgICB0aGlzLiRzZWxlY3RlZEl0ZW0gPSB0aGlzLiRpdGVtcy5lcShpbmRleCkuYWRkQ2xhc3Mo
dGhpcy5zZWxlY3RlZEl0ZW1DbGFzcyk7DQogICAgfTsNCg0KICAgIC8qKg0KICAgICAqIENyZWF0
ZXMgb3Igc2VsZWN0cyBuYXZpZ2F0aW9uIGl0ZW1zIGNvbnRhaW5lciBhbmQgZmlsbHMgaXQgd2l0
aCBuYXZpZ2F0aW9uIGl0ZW1zLg0KICAgICAqIElmIG5hdmlnYXRpb24gaXRlbXMgY29udGFpbmVy
IGlzIG5vdCBlbXB0eSwgY2hpbGQgZWxlbWVudHMgYXJlIGFkb3B0ZWQgYXMgbmF2aWdhdGlvbiBp
dGVtcy4NCiAgICAgKiBNb2RlIG9mIGFjdGlvbiBkZXBlbmRzIG9uIHNldHRpbmdzIG9iamVjdDoN
CiAgICAgKiB2YXIgc2V0dGluZ3MgPSB7DQogICAgICogICAgICdsYWJlbCc6ICcje2luZGV4fScs
DQogICAgICogICAgICdzZWxlY3Rvcic6IG51bGwNCiAgICAgKiB9Ow0KICAgICAqIElmIHNldHRp
bmdzLnNlbGVjdG9yID09PSBudWxsIG5hdmlnYXRpb24gaXRlbSBjb250YWluZXIgaXMgY3JlYXRl
ZC4NCiAgICAgKiBJZiBzZXR0aW5ncy5zZWxlY3RvciAhPT0gbnVsbCBlbGVtZW50IHRoYXQgbWF0
Y2ggc2V0dGluZ3Muc2VsZWN0b3IgaXMgYWRhcHRlZCBhcyBuYXZpZ2FnYXRpb24gaXRlbXMgY29u
dGFpbmVyLg0KICAgICAqDQogICAgICogQG1lbWJlciBOYXZpZ2F0aW9uDQogICAgICogQHBhcmFt
IHtPYmplY3R9IHNldHRpbmdzIHNldHRpbmdzIG9mIG5hdmlnYXRpb24gaXRlbXMNCiAgICAgKiBA
cGFyYW0ge051bWJlcn0gY291bnQgICBudW1iZXIgb2YgbmF2aWdhdGlvbiBpdGVtcw0KICAgICAq
IEBwYXJhbSB7T2JqZWN0fSAkd3JhcHBlciAgICB3cmFwcGVyIG9mIG5hdmlnYXRpb24gaXRlbXMg
Y29udGFpbmVyIChqUXVlcnkgb2JqZWN0KQ0KICAgICAqIEByZXR1cm4gVGhlIGNvbnRhaW5lciBm
aWxsZWQgd2l0aCBuYXZpZ2F0aW9uIGl0ZW1zLg0KICAgICAqIEB0eXBlIE9iamVjdA0KICAgICAq
Lw0KICAgIE5hdmlnYXRpb24ucHJvdG90eXBlLnByZXBhcmVJdGVtcyA9IGZ1bmN0aW9uKHNldHRp
bmdzLCBjb3VudCwgJHdyYXBwZXIpIHsNCiAgICAgICAgdmFyICRjb250YWluZXIgPSBudWxsOw0K
DQogICAgICAgIGlmIChzZXR0aW5ncy5zZWxlY3RvciAhPT0gbnVsbCkgew0KICAgICAgICAgICAg
JGNvbnRhaW5lciA9IE5hdmlnYXRpb25CdWlsZGVyLmdldEVsZW1lbnQoc2V0dGluZ3Muc2VsZWN0
b3IpOw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgJGNvbnRhaW5lciA9ICQoJzxkaXYv
PicsIHsNCiAgICAgICAgICAgICAgICAnY2xhc3MnOiAnbmF2Jw0KICAgICAgICAgICAgfSk7DQog
ICAgICAgICAgICAkY29udGFpbmVyLmFwcGVuZFRvKCR3cmFwcGVyKTsNCiAgICAgICAgfQ0KDQog
ICAgICAgIGlmICgkY29udGFpbmVyICE9PSBudWxsKSB7DQogICAgICAgICAgICBpZiAoJGNvbnRh
aW5lci5jaGlsZHJlbigpLmxlbmd0aCA9PT0gMCkgew0KICAgICAgICAgICAgICAgIE5hdmlnYXRp
b25CdWlsZGVyLmNyZWF0ZUl0ZW1zKCRjb250YWluZXIsIHNldHRpbmdzLmxhYmVsLCBjb3VudCk7
DQogICAgICAgICAgICB9DQogICAgICAgICAgICB0aGlzLiRpdGVtcyA9ICRjb250YWluZXIuY2hp
bGRyZW4oKS5zbGljZSgwLCBjb3VudCk7DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gJGNv
bnRhaW5lcjsNCiAgICB9Ow0KDQogICAgLyoqDQogICAgICogQ3JlYXRlcyBvciBzZWxlY3RzIG5h
dmlnYXRpb24gJ3ByZXZpb3VzJyBhbmQgJ25leHQnIG5hdmlnYXRpb24gaXRlbXMgKEBzZWUgTmF2
aWdhdGlvbkJ1aWxkZXIuY3JlYXRlUHJldk5leHRJdGVtKCkpLg0KICAgICAqIElmIG5hdmlnYXRp
b24gaXRlbXMgY29udGFpbmVyIGlzIG5vdCBlbXB0eSwgY2hpbGQgZWxlbWVudHMgYXJlIGFkb3B0
ZWQgYXMgbmF2aWdhdGlvbiBpdGVtcy4NCiAgICAgKg0KICAgICAqIEBtZW1iZXIgTmF2aWdhdGlv
bg0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzZXR0aW5ncyBzZXR0aW5ncyBvZiBuYXZpZ2F0aW9u
DQogICAgICogQHBhcmFtIHtPYmplY3R9ICRjb250YWluZXIgICAgbmF2aWdhdGlvbiBpdGVtcyBj
b250YWluZXIgKGpRdWVyeSBvYmplY3QpDQogICAgICovDQogICAgTmF2aWdhdGlvbi5wcm90b3R5
cGUucHJlcGFyZVByZXZOZXh0SXRlbXMgPSBmdW5jdGlvbihzZXR0aW5ncywgJGNvbnRhaW5lcikg
ew0KICAgICAgICB2YXIgJGl0ZW07DQoNCiAgICAgICAgc2V0dGluZ3MucHJldkl0ZW0ubWV0aG9k
ID0gJ3ByZXBlbmQnOw0KICAgICAgICAkaXRlbSA9IE5hdmlnYXRpb25CdWlsZGVyLmNyZWF0ZVBy
ZXZOZXh0SXRlbShzZXR0aW5ncy5wcmV2SXRlbSwgew0KICAgICAgICAgICAgJ2NsYXNzJzogJ3By
ZXYnDQogICAgICAgIH0sICRjb250YWluZXIpOw0KICAgICAgICB0aGlzLiRwcmV2SXRlbSA9ICgk
aXRlbSA9PT0gbnVsbCkgPyB0aGlzLiRwcmV2SXRlbSA6ICRpdGVtOw0KDQogICAgICAgIHNldHRp
bmdzLm5leHRJdGVtLm1ldGhvZCA9ICdhcHBlbmQnOw0KICAgICAgICAkaXRlbSA9IE5hdmlnYXRp
b25CdWlsZGVyLmNyZWF0ZVByZXZOZXh0SXRlbShzZXR0aW5ncy5uZXh0SXRlbSwgew0KICAgICAg
ICAgICAgJ2NsYXNzJzogJ25leHQnDQogICAgICAgIH0sICRjb250YWluZXIpOw0KICAgICAgICB0
aGlzLiRuZXh0SXRlbSA9ICgkaXRlbSA9PT0gbnVsbCkgPyB0aGlzLiRuZXh0SXRlbSA6ICRpdGVt
Ow0KICAgIH07DQogICAgLyoqDQogICAgICogZW5kIG9mIE5hdmlnYXRpb24gY2xhc3MNCiAgICAg
Ki8NCg0KICAgIC8qKg0KICAgICAqIFNsaWRlckNvbnRleHQgY2xhc3MgaXMgYmluZGVkIHRvIGEg
U2xpZGVyIGNsYXNzIGluc3RhbmNlDQogICAgICogYW5kIGhvbGRzIGl0cyBwcm9wZXJ0aWVzLg0K
ICAgICAqIEBjb25zdHJ1Y3Rvcg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIFNsaWRlckNvbnRleHQo
KSB7DQogICAgICAgIC8qKg0KICAgICAgICAgKiBGbGFnLCB3aGljaCBkZXRlcm1pbmVzIGlmIHNs
aWRlIGNhbiBvciBjYW4gbm90IGJlIGNoYW5nZWQgKGZvciB1c2VyIHJlcXVlc3QpDQogICAgICAg
ICAqDQogICAgICAgICAqIEBtZW1iZXIgU2xpZGVyQ29udGV4dA0KICAgICAgICAgKi8NCiAgICAg
ICAgdGhpcy5jYW5DaGFuZ2VTbGlkZSA9IHRydWU7DQogICAgICAgIC8qKg0KICAgICAgICAgKiBE
ZWZhdWx0IFNsaWRlciBzZXR0aW5nIG9iamVjdCAoQHNlZSBTbGlkZXIpDQogICAgICAgICAqDQog
ICAgICAgICAqIEBtZW1iZXIgU2xpZGVyQ29udGV4dA0KICAgICAgICAgKi8NCiAgICAgICAgdGhp
cy5kZWZhdWx0cyA9IG51bGw7DQogICAgICAgIC8qKg0KICAgICAgICAgKiBOYXZpZ2F0aW9uIG9i
amVjdCAoQHNlZSBOYXZpZ2F0aW9uKQ0KICAgICAgICAgKg0KICAgICAgICAgKiBAbWVtYmVyIFNs
aWRlckNvbnRleHQNCiAgICAgICAgICovDQogICAgICAgIHRoaXMubmF2aWdhdGlvbiA9IG51bGw7
DQogICAgICAgIC8qKg0KICAgICAgICAgKiBTbGlkZXIgb2JqZWN0LCB3aGljaCB0aGlzIGNvbnRl
eHQgaXMgYXR0YWNlaGQgdG8uDQogICAgICAgICAqDQogICAgICAgICAqIEBtZW1iZXIgU2xpZGVy
Q29udGV4dA0KICAgICAgICAgKi8NCiAgICAgICAgdGhpcy5vd25lciA9IG51bGw7DQogICAgICAg
IC8qKg0KICAgICAgICAgKiBGbGFnLCB3aGljaCBkZXRlcm1pbmVzIGlmIGNoYW5nZSBvZiBhIHNs
aWRlIGNhbiBvciBjYW4gbm90IGJlIHNjaGVkdWxlZA0KICAgICAgICAgKg0KICAgICAgICAgKiBA
bWVtYmVyIFNsaWRlckNvbnRleHQNCiAgICAgICAgICovDQogICAgICAgIHRoaXMucHJldmVudFNj
aGVkdWxpbmcgPSBmYWxzZTsNCiAgICAgICAgLyoqDQogICAgICAgICAqIFNsaWRlciBzZXR0aW5n
IG9iamVjdA0KICAgICAgICAgKg0KICAgICAgICAgKiBAbWVtYmVyIFNsaWRlckNvbnRleHQNCiAg
ICAgICAgICovDQogICAgICAgIHRoaXMuc2V0dGluZ3MgPSBudWxsOw0KICAgICAgICAvKioNCiAg
ICAgICAgICogSW5zdGFuY2Ugb2YgVGltZXIgY2xhc3MgKEBzZWUgVGltZXIpLCB3aGljaCBpcyB1
c2VkIHRvIHN0b3JlIGhvdyBtdWNoDQogICAgICAgICAqIHRpbWUgaXMgbGVmdCB0byBjaGFuZ2Ug
dGhlIHNsaWRlDQogICAgICAgICAqDQogICAgICAgICAqIEBtZW1iZXIgU2xpZGVyQ29udGV4dA0K
ICAgICAgICAgKi8NCiAgICAgICAgdGhpcy5zbGlkZVRpbWVyID0gbmV3IFRpbWVyKCk7DQogICAg
ICAgIC8qKg0KICAgICAgICAgKiBJbnN0YW5jZSBvZiBUaW1lSW5kaWNhdG9yIGNsYXNzIChAc2Vl
IFRpbWVJbmRpY2F0b3IpDQogICAgICAgICAqDQogICAgICAgICAqIEBtZW1iZXIgU2xpZGVyQ29u
dGV4dA0KICAgICAgICAgKi8NCiAgICAgICAgdGhpcy50aW1lSW5kaWNhdG9yID0gbnVsbDsNCiAg
ICAgICAgLyoqDQogICAgICAgICAqIFRpbWVycyBhcnJheS4NCiAgICAgICAgICoNCiAgICAgICAg
ICogQG1lbWJlciBTbGlkZXJDb250ZXh0DQogICAgICAgICAqLw0KICAgICAgICB0aGlzLnRpbWVy
cyA9IFtdOw0KICAgICAgICAvKioNCiAgICAgICAgICogTGFzdCB0aW1lb3V0IGlkZW50aWZpZXIu
DQogICAgICAgICAqDQogICAgICAgICAqIEBtZW1iZXIgU2xpZGVyQ29udGV4dA0KICAgICAgICAg
Ki8NCiAgICAgICAgdGhpcy50aW1lb3V0SWQgPSBudWxsOw0KICAgICAgICAvKioNCiAgICAgICAg
ICogVHJhbnNpdGlvbiAoQHNlZSBYQS5jb21wb25lbnQuY2Fyb3VzZWxzLlRyYW5zaXRpb25zLlRy
YW5zaXRpb24pIHVzZWQgd2hpbGUgY2hhbmdpbmcgc2xpZGVzDQogICAgICAgICAqDQogICAgICAg
ICAqIEBtZW1iZXIgU2xpZGVyQ29udGV4dA0KICAgICAgICAgKi8NCiAgICAgICAgdGhpcy50cmFu
c2l0aW9uID0gbnVsbDsNCiAgICAgICAgLyoqDQogICAgICAgICAqIFRyYW5zaXRpb24gc2V0dGlu
Z3Mgb2JqZWN0IChAc2VlIFhBLmNvbXBvbmVudC5jYXJvdXNlbHMuVHJhbnNpdGlvbnMuVHJhbnNp
dGlvblNldHRpbmdzKQ0KICAgICAgICAgKg0KICAgICAgICAgKiBAbWVtYmVyIFNsaWRlckNvbnRl
eHQNCiAgICAgICAgICovDQogICAgICAgIHRoaXMudHJhbnNpdGlvblNldHRpbmdzID0gbmV3IFhB
LmNvbXBvbmVudC5jYXJvdXNlbHMuVHJhbnNpdGlvbnMuVHJhbnNpdGlvblNldHRpbmdzKCk7DQog
ICAgICAgIC8qKg0KICAgICAgICAgKiBqUXVlcnkgb2JqZWN0IHdoaWNoIGNvbnRhaW5zIGFsbCBz
bGlkZXMNCiAgICAgICAgICoNCiAgICAgICAgICogQG1lbWJlciBTbGlkZXJDb250ZXh0DQogICAg
ICAgICAqLw0KICAgICAgICB0aGlzLiRzbGlkZXMgPSBudWxsOw0KICAgICAgICAvKioNCiAgICAg
ICAgICogalF1ZXJ5IG9iamVjdCBjb250YWluaW5nIGVsZW1lbnQgdGhhdCB3cmFwcHMgc2xpZGVz
DQogICAgICAgICAqDQogICAgICAgICAqIEBtZW1iZXIgU2xpZGVyQ29udGV4dA0KICAgICAgICAg
Ki8NCiAgICAgICAgdGhpcy4kd3JhcHBlciA9IG51bGw7DQogICAgICAgIC8qKg0KICAgICAgICAg
KiBSZWZlcmVuY2UgdG8gbWV0aG9kLCB3aGljaCBzaG91bGQgY2hhbmdlIGN1cnJlbnQgc2xpZGUN
CiAgICAgICAgICoNCiAgICAgICAgICogQG1lbWJlciBTbGlkZXJDb250ZXh0DQogICAgICAgICAq
Lw0KICAgICAgICB0aGlzLmNoYW5nZUN1cnJlbnRTbGlkZSA9IG51bGw7DQogICAgICAgIC8qKg0K
ICAgICAgICAgKiBSZWZlcmVuY2UgdG8gbWV0aG9kLCB3aGljaCBzaG91bGQgcmV0dXJuIGpRdWVy
eSBvYmplY3Qgd2l0aCBjdXJyZW50IHNsaWRlDQogICAgICAgICAqDQogICAgICAgICAqIEBtZW1i
ZXIgU2xpZGVyQ29udGV4dA0KICAgICAgICAgKi8NCiAgICAgICAgdGhpcy5nZXRDdXJyZW50U2xp
ZGUgPSBudWxsOw0KDQogICAgICAgIHRoaXMudGltZXJzLnB1c2godGhpcy5zbGlkZVRpbWVyKTsN
CiAgICB9DQogICAgLyoqDQogICAgICogZW5kIG9mIFNsaWRlckNvbnRleHQgY2xhc3MNCiAgICAg
Ki8NCg0KICAgIC8qKg0KICAgICAqIFNsaWRlciBjbGFzcyBtYW5hZ2VzIGNoYW5naW5nIG9mIHNs
aWRlcy4NCiAgICAgKg0KICAgICAqIE9wdGlvbnMgb2JqZWN0Og0KICAgICAqIHsNCiAgICAgKiAg
ICAgJ25hdmlnYXRpb24nOiBPYmplY3QgdmFsdWUsIC8vbmF2aWdhdGlvbiBzZXR0aW5ncyBvYmpl
Y3QNCiAgICAgKiAgICAgJ3RpbWVvdXQnOiBOdW1iZXIgdmFsdWUsIC8vdGltZSBiZXR3ZWVuIHNs
aWRlcyBjaGFuZ2luZw0KICAgICAqICAgICAndHJhbnNpdGlvbic6IFN0cmluZyB2YWx1ZSwgLy9u
YW1lIG9mIHRyYW5zaXRpb24gY2xhc3MgKEBzZWUgWEEuY29tcG9uZW50LmNhcm91c2Vscy5UcmFu
c2l0aW9ucy5UcmFuc2l0aW9uKQ0KICAgICAqICAgICAnaXNQYXVzZUVuYWJsZWQnOiBCb29sZWFu
IHZhbHVlLCAvL2ZsYWcsIHdoaWNoIGRldGVybWluZXMgaWYgcGF1c2UgZmVhdHVyZSBpcyBlbmFi
bGVkDQogICAgICogICAgICd0aW1lSW5kaWNhdG9yJzogew0KICAgICAqICAgICAgICAgJ2lzRW5h
YmxlZCc6IEJvb2xlYW4gdmFsdWUsIC8vZmxhZywgd2hpY2ggZGV0ZXJtaW5lcyBpZiB0aW1lIGlu
ZGljYXRvciBpcyBlbmFibGVkDQogICAgICogICAgICAgICAnc2VsZWN0b3InOiBTdHJpbmcgdmFs
dWUsIC8vc2VsZWN0b3Igb2YgdGltZSBpbmRpY2F0b3IgaHRtbCBlbGVtZW50DQogICAgICogICAg
ICAgICAndmlldyc6IFN0cmluZyB2YWx1ZSwgLy9uYW1lIG9mIHZpZXcgY2xhc3MgKEBzZWUgWEEu
Y29tcG9uZW50LmNhcm91c2Vscy5JbmRpY2F0b3JWaWV3cy5WaWV3DQogICAgICogICAgICAgICAn
b3B0aW9ucyc6IE9iamVjdCB2YWx1ZSAvL29iamVjdCB3aXRoIG9wdGlvbnMsIHdoaWNoIHdpbGwg
YmUgcGFzc2VkIHRvIGEgdGltZSBpbmRpY2F0b3Igdmlldw0KICAgICAqICAgICB9DQogICAgICog
fQ0KICAgICAqIEBjb25zdHJ1Y3Rvcg0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSAkICAgICB0aGUg
alF1ZXJ5IG9iamVjdA0KICAgICAqIEBwYXJhbSB7U2xpZGVyQ29udGV4dH0gY29udGV4dCAgICBp
bnN0YW5jZSBvZiBTbGlkZXJDb250ZXh0IGNsYXNzOyBtdXN0IGJlIHNlcGFyYXRlIGZvciBlYWNo
IGluc3RhbmNlIChAc2VlIFNsaWRlckNvbnRleHQpDQogICAgICogQHBhcmFtIHtPYmplY3R9IG9w
dGlvbnMgICAgU2xpZGVyIG9wdGlvbnMgb2JqZWN0DQogICAgICovDQogICAgZnVuY3Rpb24gU2xp
ZGVyKCQsIGNvbnRleHQsIG9wdGlvbnMpIHsNCiAgICAgICAgdmFyIGRlZmF1bHRzID0gew0KICAg
ICAgICAgICAgJ25hdmlnYXRpb24nOiB7fSwNCiAgICAgICAgICAgICd0aW1lb3V0JzogMTAwMDAs
DQogICAgICAgICAgICAndHJhbnNpdGlvbic6ICdCYXNpY1RyYW5zaXRpb24nLA0KICAgICAgICAg
ICAgJ2lzUGF1c2VFbmFibGVkJzogdHJ1ZSwNCiAgICAgICAgICAgICd0aW1lSW5kaWNhdG9yJzog
ew0KICAgICAgICAgICAgICAgICdpc0VuYWJsZWQnOiBmYWxzZSwNCiAgICAgICAgICAgICAgICAn
c2VsZWN0b3InOiBudWxsLA0KICAgICAgICAgICAgICAgICd2aWV3JzogJ1ZpZXcnLA0KICAgICAg
ICAgICAgICAgICdvcHRpb25zJzoge30NCiAgICAgICAgICAgIH0NCiAgICAgICAgfTsNCg0KICAg
ICAgICAvKioNCiAgICAgICAgICogSW5zdGFuY2Ugb2YgU2xpZGVyQ29udGV4dCBjbGFzcyAoQHNl
ZSBTbGlkZXJDb250ZXh0KQ0KICAgICAgICAgKg0KICAgICAgICAgKiBAbWVtYmVyIE5hdmlnYXRp
b24NCiAgICAgICAgICovDQogICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7DQoNCiAgICAg
ICAgY29udGV4dC5vd25lciA9IHRoaXM7DQogICAgICAgIGNvbnRleHQuZGVmYXVsdHMgPSBkZWZh
dWx0czsNCiAgICAgICAgY29udGV4dC5zZXR0aW5ncyA9ICQuZXh0ZW5kKHRydWUsIHt9LCBkZWZh
dWx0cywgb3B0aW9ucyk7DQogICAgICAgIGNvbnRleHQudHJhbnNpdGlvblNldHRpbmdzLiRzbGlk
ZXMgPSBjb250ZXh0LiRzbGlkZXM7DQogICAgfQ0KDQogICAgLyoqDQogICAgICogRXhlY3V0ZXMg
bWV0aG9kIHdpdGggZ2l2ZW4gbWV0aG9kTmFtZSBvbiBlYWNoIFRpbWVyIGluIGNvbnRleHQudGlt
ZXJzIChAc2VlIFRpbWVyKQ0KICAgICAqDQogICAgICogQG1lbWJlciBTbGlkZXINCiAgICAgKiBA
cGFyYW0ge1N0cmluZ30gbWV0aG9kTmFtZSAgIG5hbWUgb2YgYSBtZXRob2QsIHdoaWNoIHdpbGwg
YmUgZXhlY3V0ZWQgb24gdGltZXJzDQogICAgICogQHBhcmFtIHtTbGlkZXJDb250ZXh0fSBjb250
ZXh0ICAgIGN1cnJlbnQgY29udGV4dA0KICAgICAqLw0KICAgIFNsaWRlci5wcm90b3R5cGUuZXhl
Y3V0ZU9uVGltZXJzID0gZnVuY3Rpb24obWV0aG9kTmFtZSwgY29udGV4dCkgew0KICAgICAgICB2
YXIgaSA9IG51bGwsDQogICAgICAgICAgICB0aW1lciA9IG51bGwsDQogICAgICAgICAgICB0aW1l
cnMgPSBjb250ZXh0LnRpbWVyczsNCg0KICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGltZXJzLmxl
bmd0aDsgaSsrKSB7DQogICAgICAgICAgICB0aW1lciA9IHRpbWVyc1tpXTsNCiAgICAgICAgICAg
IGlmICh0eXBlb2YodGltZXJbbWV0aG9kTmFtZV0pID09PSAnZnVuY3Rpb24nKSB7DQogICAgICAg
ICAgICAgICAgdGltZXJbbWV0aG9kTmFtZV0oKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0K
ICAgIH07DQoNCiAgICAvKioNCiAgICAgKiBEZXNjaGVkdWxlcyBjaGFuZ2Ugb2YgYSBzbGlkZSwg
YnkgY2xlYXJpbmcgdGltZW91dCBwcmV2aW91c2x5IHNldCBieSBzZXRUaWVtb3V0KCkgZnVuY3Rp
b24uDQogICAgICoNCiAgICAgKiBAbWVtYmVyIFNsaWRlcg0KICAgICAqIEBwYXJhbSB7U2xpZGVy
Q29udGV4dH0gY29udGV4dCAgICBjdXJyZW50IGNvbnRleHQNCiAgICAgKi8NCiAgICBTbGlkZXIu
cHJvdG90eXBlLmRlc2NoZWR1bGVTbGlkZSA9IGZ1bmN0aW9uKGNvbnRleHQpIHsNCiAgICAgICAg
aWYgKGNvbnRleHQudGltZW91dElkICE9PSBudWxsKSB7DQogICAgICAgICAgICBjbGVhclRpbWVv
dXQoY29udGV4dC50aW1lb3V0SWQpOw0KICAgICAgICAgICAgY29udGV4dC50aW1lb3V0SWQgPSBu
dWxsOw0KICAgICAgICB9DQogICAgfTsNCg0KICAgIC8qKg0KICAgICAqIFNjaGVkdWxlcyBjaGFu
Z2Ugb2YgYSBzbGlkZSwgYnkgc2V0dGluZyB0aW1lb3V0ICh1c2luZyBzZXRUaWVtb3V0KCkgZnVu
Y3Rpb24pIGlmIGNhbi4NCiAgICAgKiBJZiBjYW4ndCwgdHJpZXMgYWdhaW4gYWZ0ZXIgc2hvcnQg
cGVyaW9kIG9mIHRpbWUuDQogICAgICoNCiAgICAgKiBAbWVtYmVyIFNsaWRlcg0KICAgICAqIEBw
YXJhbSB7U2xpZGVyQ29udGV4dH0gY29udGV4dCAgICBjdXJyZW50IGNvbnRleHQNCiAgICAgKi8N
CiAgICBTbGlkZXIucHJvdG90eXBlLnNjaGVkdWxlU2xpZGUgPSBmdW5jdGlvbihjb250ZXh0KSB7
DQogICAgICAgIHZhciBvd25lciA9IGNvbnRleHQub3duZXI7DQoNCiAgICAgICAgb3duZXIuZGVz
Y2hlZHVsZVNsaWRlKGNvbnRleHQpOw0KDQogICAgICAgIGlmICghY29udGV4dC5wcmV2ZW50U2No
ZWR1bGluZyAmJiBjb250ZXh0LiRzbGlkZXMuc2l6ZSgpID4gMSkgew0KICAgICAgICAgICAgb3du
ZXIuZXhlY3V0ZU9uVGltZXJzKCdzZXQnLCBjb250ZXh0KTsNCg0KICAgICAgICAgICAgaWYgKGNv
bnRleHQuY2FuQ2hhbmdlU2xpZGUpIHsNCiAgICAgICAgICAgICAgICBpZiAoY29udGV4dC50aW1l
SW5kaWNhdG9yICE9PSBudWxsKSB7DQogICAgICAgICAgICAgICAgICAgIGNvbnRleHQudGltZUlu
ZGljYXRvci5wbGF5KCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIGNvbnRl
eHQudGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICAg
ICAgb3duZXIuY2hhbmdlQ3VycmVudFNsaWRlQnkoMSwgY29udGV4dCk7DQogICAgICAgICAgICAg
ICAgfSwgY29udGV4dC5zZXR0aW5ncy50aW1lb3V0IC0gY29udGV4dC5zbGlkZVRpbWVyLmVsYXBz
ZWQpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1
bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICBvd25lci5zY2hlZHVsZVNsaWRlKGNvbnRl
eHQpOw0KICAgICAgICAgICAgICAgIH0sIDEwMCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0N
CiAgICB9Ow0KDQogICAgLyoqDQogICAgICogQ2hhbmdlcyBjdXJyZW50IHNsaWRlLCBieSBvZmZz
ZXQgcGVyZm9ybWluZyBjb250ZXh0LnRyYW5zaXRpb24NCiAgICAgKiBBbnkgb2Zmc2V0IHZhbHVl
IGlzIHNhdmUgKGlmIGl0IGlzIGFuIGludGVnZXIpLg0KICAgICAqDQogICAgICogQG1lbWJlciBT
bGlkZXINCiAgICAgKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0ICAgIHRoZSBvZmZzZXQgdG8gYW4g
aW5kZXggb2YgYSBuZXcgc2xpZGUNCiAgICAgKiBAcGFyYW0ge1NsaWRlckNvbnRleHR9IGNvbnRl
eHQgICAgY3VycmVudCBjb250ZXh0DQogICAgICovDQogICAgU2xpZGVyLnByb3RvdHlwZS5jaGFu
Z2VDdXJyZW50U2xpZGVCeSA9IGZ1bmN0aW9uKG9mZnNldCwgY29udGV4dCkgew0KICAgICAgICB2
YXIgc2V0dGluZ3MgPSBjb250ZXh0LnRyYW5zaXRpb25TZXR0aW5ncywNCiAgICAgICAgICAgICRj
dXJyZW50U2xpZGUgPSBjb250ZXh0LmdldEN1cnJlbnRTbGlkZSgpLA0KICAgICAgICAgICAgJHNs
aWRlcyA9IGNvbnRleHQuJHNsaWRlczsNCg0KICAgICAgICBpZiAoKG9mZnNldCAlICRzbGlkZXMu
c2l6ZSgpKSAhPT0gMCkgew0KICAgICAgICAgICAgY29udGV4dC5jYW5DaGFuZ2VTbGlkZSA9IGZh
bHNlOw0KDQogICAgICAgICAgICBzZXR0aW5ncy5vZmZzZXQgPSBvZmZzZXQ7DQogICAgICAgICAg
ICBzZXR0aW5ncy4kY3VycmVudFNsaWRlID0gJGN1cnJlbnRTbGlkZTsNCiAgICAgICAgICAgIHNl
dHRpbmdzLiRuZXh0U2xpZGUgPSAkc2xpZGVzLmVxKCgkY3VycmVudFNsaWRlLmluZGV4KCkgKyBv
ZmZzZXQpICUgJHNsaWRlcy5zaXplKCkpOw0KDQogICAgICAgICAgICBjb250ZXh0LmNoYW5nZUN1
cnJlbnRTbGlkZShzZXR0aW5ncy4kbmV4dFNsaWRlKTsNCiAgICAgICAgICAgIGNvbnRleHQudHJh
bnNpdGlvbi5wZXJmb3JtKGNvbnRleHQudHJhbnNpdGlvblNldHRpbmdzKTsNCiAgICAgICAgICAg
IGNvbnRleHQub3duZXIuZXhlY3V0ZU9uVGltZXJzKCdyZXNldCcsIGNvbnRleHQpOw0KICAgICAg
ICB9DQoNCg0KICAgICAgICB2YXIgJGNhcm91c2VsID0gJChjb250ZXh0LiR3cmFwcGVyKS5wYXJl
bnRzKCIuY2Fyb3VzZWwiKTsNCiAgICAgICAgJGNhcm91c2VsLnRyaWdnZXIoInNsaWRlLWNoYW5n
ZWQiKTsNCiAgICB9Ow0KDQogICAgLyoqDQogICAgICogU3RhcnRzIGF1dG9tYXRpYyBzbGlkZXMg
Y2hhbmdpbmcNCiAgICAgKg0KICAgICAqIEBtZW1iZXIgU2xpZGVyDQogICAgICovDQogICAgU2xp
ZGVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbigpIHsNCiAgICAgICAgdGhpcy5leGVjdXRlT25U
aW1lcnMoJ3Jlc2V0JywgdGhpcy5jb250ZXh0KTsNCiAgICAgICAgdGhpcy5zY2hlZHVsZVNsaWRl
KHRoaXMuY29udGV4dCk7DQogICAgfTsNCg0KICAgIC8qKg0KICAgICAqIENhbmNlbCB0aGUgZGVm
YXVsdCBhY3Rpb24gb2YgZXZlbnQgYW5kIGNoYW5nZXMgc2xpZGUgbWFudWFsbHkuDQogICAgICoN
CiAgICAgKiBAbWVtYmVyIFNsaWRlcg0KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudCAgICAg
dGhlIGV2ZW50DQogICAgICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCAgICB0aGUgb2Zmc2V0IHRv
IGFuIGluZGV4IG9mIGEgbmV3IHNsaWRlDQogICAgICogQHBhcmFtIHtTbGlkZXJDb250ZXh0fSBj
b250ZXh0ICAgIGN1cnJlbnQgY29udGV4dA0KICAgICAqLw0KICAgIFNsaWRlci5wcm90b3R5cGUu
b25DaGFuZ2VDdXJyZW50U2xpZGUgPSBmdW5jdGlvbihldmVudCwgb2Zmc2V0LCBjb250ZXh0KSB7
DQogICAgICAgIHZhciBvd25lciA9IGNvbnRleHQub3duZXI7DQoNCiAgICAgICAgZXZlbnQucHJl
dmVudERlZmF1bHQoKTsNCiAgICAgICAgaWYgKGNvbnRleHQuY2FuQ2hhbmdlU2xpZGUpIHsNCiAg
ICAgICAgICAgIG93bmVyLmRlc2NoZWR1bGVTbGlkZShjb250ZXh0KTsNCiAgICAgICAgICAgIG93
bmVyLmNoYW5nZUN1cnJlbnRTbGlkZUJ5KG9mZnNldCwgY29udGV4dCk7DQogICAgICAgIH0NCiAg
ICB9Ow0KDQogICAgLyoqDQogICAgICogU2VsZWN0cyBuYXZpZ2F0aW9uIGl0ZW0gd2l0aCBnaXZl
biBpbmRleC4NCiAgICAgKg0KICAgICAqIEBtZW1iZXIgU2xpZGVyDQogICAgICogQHBhcmFtIHtO
dW1iZXJ9IGluZGV4ICAgICB0aGUgaW5kZXggb2YgbmF2aWdhdGlvbiBpdGVtDQogICAgICovDQog
ICAgU2xpZGVyLnByb3RvdHlwZS5zZWxlY3ROYXZpZ2F0aW9uSXRlbSA9IGZ1bmN0aW9uKGluZGV4
KSB7DQogICAgICAgIHRoaXMuY29udGV4dC5uYXZpZ2F0aW9uLnNlbGVjdEl0ZW0oaW5kZXgpOw0K
ICAgIH07DQogICAgLyoqDQogICAgICogZW5kIG9mIFNsaWRlciBjbGFzcw0KICAgICAqLw0KDQog
ICAgLyoqDQogICAgICogU2xpZGVySW5pdGlhbGl6ZXIgb2JqZWN0IHNldCB1cCBpbnN0YW5jZXMg
b2YgU2xpZGVyIGNsYXNzDQogICAgICovDQogICAgU2xpZGVySW5pdGlhbGl6ZXIgPSAoZnVuY3Rp
b24oJCkgew0KICAgICAgICAvKioNCiAgICAgICAgICogQXR0YWNoZXMgZXZlbnRzIHRvIG5hdmln
YXRpb24gaXRlbXMuDQogICAgICAgICAqDQogICAgICAgICAqIEBwYXJhbSB7U2xpZGVyQ29udGV4
dH0gY29udGV4dCAgIGEgY29udGV4dCBvZiBhIFNsaWRlciBjbGFzcyBpbnN0YW5jZQ0KICAgICAg
ICAgKi8NCiAgICAgICAgZnVuY3Rpb24gYXR0YWNoTmF2aWdhdGlvbkV2ZW50cyhjb250ZXh0KSB7
DQogICAgICAgICAgICB2YXIgb3duZXIgPSBjb250ZXh0Lm93bmVyLA0KICAgICAgICAgICAgICAg
ICRuYXZMaW5rcyA9IGNvbnRleHQuJHdyYXBwZXIuZmluZCgiLm5hdiBhIiksDQogICAgICAgICAg
ICAgICAgJHByZXZJdGVtVHh0ID0gY29udGV4dC4kd3JhcHBlci5maW5kKCcucHJldi10ZXh0Jyks
DQogICAgICAgICAgICAgICAgJG5leHRJdGVtVHh0ID0gY29udGV4dC4kd3JhcHBlci5maW5kKCcu
bmV4dC10ZXh0Jyk7DQoNCiAgICAgICAgICAgIGNvbnRleHQubmF2aWdhdGlvbi4kaXRlbXMuZWFj
aChmdW5jdGlvbihpbmRleCkgew0KICAgICAgICAgICAgICAgIHZhciAkc2xpZGUgPSBjb250ZXh0
LiRzbGlkZXMuZXEoaW5kZXgpOw0KDQogICAgICAgICAgICAgICAgJCh0aGlzKS5jbGljayhmdW5j
dGlvbihldmVudCkgew0KICAgICAgICAgICAgICAgICAgICBvd25lci5vbkNoYW5nZUN1cnJlbnRT
bGlkZShldmVudCwgJHNsaWRlLmluZGV4KCkgLSBjb250ZXh0LmdldEN1cnJlbnRTbGlkZSgpLmlu
ZGV4KCksIGNvbnRleHQpOw0KICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgfSk7DQoN
CiAgICAgICAgICAgICRwcmV2SXRlbVR4dC5jbGljayhmdW5jdGlvbihldmVudCkgew0KICAgICAg
ICAgICAgICAgIG93bmVyLm9uQ2hhbmdlQ3VycmVudFNsaWRlKGV2ZW50LCAtMSwgY29udGV4dCk7
DQogICAgICAgICAgICB9KTsNCg0KICAgICAgICAgICAgJG5leHRJdGVtVHh0LmNsaWNrKGZ1bmN0
aW9uKGV2ZW50KSB7DQogICAgICAgICAgICAgICAgb3duZXIub25DaGFuZ2VDdXJyZW50U2xpZGUo
ZXZlbnQsIDEsIGNvbnRleHQpOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGNvbnRl
eHQubmF2aWdhdGlvbi4kcHJldkl0ZW0uY2xpY2soZnVuY3Rpb24oZXZlbnQpIHsNCiAgICAgICAg
ICAgICAgICBvd25lci5vbkNoYW5nZUN1cnJlbnRTbGlkZShldmVudCwgLTEsIGNvbnRleHQpOw0K
ICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGNvbnRleHQubmF2aWdhdGlvbi4kbmV4dEl0
ZW0uY2xpY2soZnVuY3Rpb24oZXZlbnQpIHsNCiAgICAgICAgICAgICAgICBvd25lci5vbkNoYW5n
ZUN1cnJlbnRTbGlkZShldmVudCwgMSwgY29udGV4dCk7DQogICAgICAgICAgICB9KTsNCg0KICAg
ICAgICAgICAgJG5hdkxpbmtzLm9uKCJrZXlkb3duIiwgZnVuY3Rpb24oZXZlbnQpIHsNCiAgICAg
ICAgICAgICAgICBzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHsNCiAgICAgICAgICAgICAgICAgICAg
Y2FzZSAzNzoNCiAgICAgICAgICAgICAgICAgICAgICAgIG93bmVyLm9uQ2hhbmdlQ3VycmVudFNs
aWRlKGV2ZW50LCAtMSwgY29udGV4dCk7DQogICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMp
LnBhcmVudCgpLmZpbmQoIi5hY3RpdmUiKS5mb2N1cygpOw0KICAgICAgICAgICAgICAgICAgICAg
ICAgYnJlYWs7DQogICAgICAgICAgICAgICAgICAgIGNhc2UgMzk6DQogICAgICAgICAgICAgICAg
ICAgICAgICBvd25lci5vbkNoYW5nZUN1cnJlbnRTbGlkZShldmVudCwgMSwgY29udGV4dCk7DQog
ICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoIi5hY3RpdmUiKS5m
b2N1cygpOw0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAgICAgICAg
fQ0KICAgICAgICAgICAgfSk7DQogICAgICAgIH0NCg0KICAgICAgICAvKioNCiAgICAgICAgICog
QXR0YWNoZXMgcGF1c2UgZXZlbnQgdG8gbmF2aWdhdGlvbiB3cmFwcGVyLg0KICAgICAgICAgKg0K
ICAgICAgICAgKiBAcGFyYW0ge1NsaWRlckNvbnRleHR9IGNvbnRleHQgICBhIGNvbnRleHQgb2Yg
YSBTbGlkZXIgY2xhc3MgaW5zdGFuY2UNCiAgICAgICAgICovDQogICAgICAgIGZ1bmN0aW9uIGF0
dGFjaFBhdXNlRXZlbnQoY29udGV4dCkgew0KICAgICAgICAgICAgdmFyIG93bmVyID0gY29udGV4
dC5vd25lciwNCiAgICAgICAgICAgICAgICAkZWxlbWVudCA9IGNvbnRleHQuJHdyYXBwZXIsDQog
ICAgICAgICAgICAgICAgJG5hdkxpbmtzID0gJGVsZW1lbnQuZmluZCgiLm5hdiBhIik7DQoNCiAg
ICAgICAgICAgIHZhciBjYWxsYmFja01vdXNlZW50ZXIgPSBmdW5jdGlvbigpIHsNCiAgICAgICAg
ICAgICAgICBjb250ZXh0LnByZXZlbnRTY2hlZHVsaW5nID0gdHJ1ZTsNCiAgICAgICAgICAgICAg
ICBvd25lci5kZXNjaGVkdWxlU2xpZGUoY29udGV4dCk7DQoNCiAgICAgICAgICAgICAgICBvd25l
ci5leGVjdXRlT25UaW1lcnMoJ3VwZGF0ZScsIGNvbnRleHQpOw0KICAgICAgICAgICAgICAgIGlm
IChjb250ZXh0LnRpbWVJbmRpY2F0b3IgIT09IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAg
Y29udGV4dC50aW1lSW5kaWNhdG9yLnBhdXNlKCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAg
ICAgICAgfQ0KDQogICAgICAgICAgICAkZWxlbWVudC5tb3VzZWVudGVyKGNhbGxiYWNrTW91c2Vl
bnRlcik7DQogICAgICAgICAgICAkbmF2TGlua3Mub24oImZvY3VzIiwgY2FsbGJhY2tNb3VzZWVu
dGVyKTsNCg0KICAgICAgICAgICAgdmFyIGNhbGxiYWNrTW91c2VMZWF2ZSA9IGZ1bmN0aW9uKCkg
ew0KICAgICAgICAgICAgICAgIGNvbnRleHQucHJldmVudFNjaGVkdWxpbmcgPSBmYWxzZTsNCiAg
ICAgICAgICAgICAgICBvd25lci5zY2hlZHVsZVNsaWRlKGNvbnRleHQpOw0KICAgICAgICAgICAg
fQ0KDQogICAgICAgICAgICAkZWxlbWVudC5tb3VzZWxlYXZlKGNhbGxiYWNrTW91c2VMZWF2ZSk7
DQogICAgICAgICAgICAkbmF2TGlua3Mub24oImJsdXIiLCBjYWxsYmFja01vdXNlTGVhdmUpOw0K
ICAgICAgICB9DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIENyZWF0ZXMgdGltZSBpbmRpY2F0
b3Igdmlldw0KICAgICAgICAgKg0KICAgICAgICAgKiBAcGFyYW0ge1NsaWRlckNvbnRleHR9IGNv
bnRleHQgICBhIGNvbnRleHQgb2YgYSBTbGlkZXIgY2xhc3MgaW5zdGFuY2UNCiAgICAgICAgICov
DQogICAgICAgIGZ1bmN0aW9uIGNyZWF0ZUluZGljYXRvcihjb250ZXh0KSB7DQogICAgICAgICAg
ICB2YXIgc2V0dGluZ3MgPSBjb250ZXh0LnNldHRpbmdzLA0KICAgICAgICAgICAgICAgIHRpbWVJ
bmRpY2F0b3IgPSBudWxsLA0KICAgICAgICAgICAgICAgIFZpZXdDb25zdHJ1Y3RvciA9IFhBLmNv
bXBvbmVudC5jYXJvdXNlbHMuSW5kaWNhdG9yVmlld3Nbc2V0dGluZ3MudGltZUluZGljYXRvci52
aWV3XSwNCiAgICAgICAgICAgICAgICB2aWV3ID0gbnVsbDsNCg0KICAgICAgICAgICAgaWYgKFZp
ZXdDb25zdHJ1Y3RvciAhPT0gbnVsbCkgew0KICAgICAgICAgICAgICAgIHZpZXcgPSBuZXcgVmll
d0NvbnN0cnVjdG9yKHNldHRpbmdzLnRpbWVJbmRpY2F0b3Iuc2VsZWN0b3IsIHNldHRpbmdzLnRp
bWVJbmRpY2F0b3Iub3B0aW9ucyk7DQogICAgICAgICAgICAgICAgdGltZUluZGljYXRvciA9IG5l
dyBUaW1lSW5kaWNhdG9yKCQsIHZpZXcsIHNldHRpbmdzLnRpbWVvdXQpOw0KICAgICAgICAgICAg
ICAgIGNvbnRleHQudGltZUluZGljYXRvciA9IHRpbWVJbmRpY2F0b3I7DQogICAgICAgICAgICAg
ICAgY29udGV4dC50aW1lcnMucHVzaCh0aW1lSW5kaWNhdG9yKTsNCiAgICAgICAgICAgIH0NCiAg
ICAgICAgfQ0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBBdHRhY2hlcyBldmVudHMgdG8gbmF2
aWdhdGlvbi4NCiAgICAgICAgICoNCiAgICAgICAgICogQHBhcmFtIHtTbGlkZXJDb250ZXh0fSBj
b250ZXh0ICAgYSBjb250ZXh0IG9mIGEgU2xpZGVyIGNsYXNzIGluc3RhbmNlDQogICAgICAgICAq
Lw0KICAgICAgICBmdW5jdGlvbiBpbml0aWFsaXplTmF2aWdhdGlvbihjb250ZXh0KSB7DQogICAg
ICAgICAgICBjb250ZXh0LnNldHRpbmdzLm5hdmlnYXRpb24uc2xpZGVzQ291bnQgPSBjb250ZXh0
LiRzbGlkZXMubGVuZ3RoOw0KICAgICAgICAgICAgY29udGV4dC5uYXZpZ2F0aW9uID0gbmV3IE5h
dmlnYXRpb24oJCwgY29udGV4dC4kd3JhcHBlciwgY29udGV4dC5zZXR0aW5ncy5uYXZpZ2F0aW9u
KTsNCg0KICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAg
ICBhdHRhY2hOYXZpZ2F0aW9uRXZlbnRzKGNvbnRleHQpOw0KICAgICAgICAgICAgfSwgMTAwMCk7
DQoNCg0KICAgICAgICAgICAgaWYgKGNvbnRleHQuc2V0dGluZ3MuaXNQYXVzZUVuYWJsZWQpIHsN
CiAgICAgICAgICAgICAgICBhdHRhY2hQYXVzZUV2ZW50KGNvbnRleHQpOw0KICAgICAgICAgICAg
fQ0KICAgICAgICB9DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIEluaXRpYWxpemVzIHRyYW5z
aXRpb24gZm9yIGEgZ2l2ZW4gY29udGV4dC4NCiAgICAgICAgICoNCiAgICAgICAgICogQHBhcmFt
IHtTbGlkZXJDb250ZXh0fSBjb250ZXh0ICAgYSBjb250ZXh0IG9mIGEgU2xpZGVyIGNsYXNzIGlu
c3RhbmNlDQogICAgICAgICAqLw0KICAgICAgICBmdW5jdGlvbiBpbml0aWFsaXplVHJhbnNpdGlv
bihjb250ZXh0KSB7DQogICAgICAgICAgICB2YXIgVHJhbnNpdGlvbkNvbnN0cnVjdG9yID0gbnVs
bCwNCiAgICAgICAgICAgICAgICBvd25lciA9IGNvbnRleHQub3duZXI7DQoNCiAgICAgICAgICAg
IGNvbnRleHQudHJhbnNpdGlvblNldHRpbmdzLmNhbGxiYWNrID0gZnVuY3Rpb24oKSB7DQogICAg
ICAgICAgICAgICAgY29udGV4dC5jYW5DaGFuZ2VTbGlkZSA9IHRydWU7DQoNCiAgICAgICAgICAg
ICAgICBpZiAoY29udGV4dC5wcmV2ZW50U2NoZWR1bGluZykgew0KICAgICAgICAgICAgICAgICAg
ICBvd25lci5leGVjdXRlT25UaW1lcnMoJ3Jlc2V0JywgY29udGV4dCk7DQogICAgICAgICAgICAg
ICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgb3duZXIuc2NoZWR1bGVTbGlkZShjb250
ZXh0KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9Ow0KDQogICAgICAgICAgICBU
cmFuc2l0aW9uQ29uc3RydWN0b3IgPSBYQS5jb21wb25lbnQuY2Fyb3VzZWxzLlRyYW5zaXRpb25z
W2NvbnRleHQuc2V0dGluZ3MudHJhbnNpdGlvbl07DQogICAgICAgICAgICBpZiAoKFRyYW5zaXRp
b25Db25zdHJ1Y3RvciA9PT0gbnVsbCkgfHwgKFRyYW5zaXRpb25Db25zdHJ1Y3RvciA9PT0gdW5k
ZWZpbmVkKSkgew0KICAgICAgICAgICAgICAgIFRyYW5zaXRpb25Db25zdHJ1Y3RvciA9IFhBLmNv
bXBvbmVudC5jYXJvdXNlbHMuVHJhbnNpdGlvbnNbY29udGV4dC5kZWZhdWx0cy50cmFuc2l0aW9u
XTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNvbnRleHQudHJhbnNpdGlvbiA9IG5ldyBU
cmFuc2l0aW9uQ29uc3RydWN0b3IoKTsNCiAgICAgICAgICAgIGNvbnRleHQudHJhbnNpdGlvbi5p
bml0KGNvbnRleHQudHJhbnNpdGlvblNldHRpbmdzKTsNCiAgICAgICAgfQ0KDQogICAgICAgIHJl
dHVybiB7DQogICAgICAgICAgICAvKioNCiAgICAgICAgICAgICAqIEluaXRpYWxpemVzIFNsaWRl
ciBvYmplY3Qgd2l0aCBhIGdpdmVuIGNvbnRleHQuDQogICAgICAgICAgICAgKg0KICAgICAgICAg
ICAgICogQHBhcmFtIHtTbGlkZXJDb250ZXh0fSBjb250ZXh0ICAgYSBjb250ZXh0IG9mIGEgU2xp
ZGVyIGNsYXNzIGluc3RhbmNlDQogICAgICAgICAgICAgKi8NCiAgICAgICAgICAgIGluaXRpYWxp
emU6IGZ1bmN0aW9uKGNvbnRleHQpIHsNCiAgICAgICAgICAgICAgICBpbml0aWFsaXplTmF2aWdh
dGlvbihjb250ZXh0KTsNCiAgICAgICAgICAgICAgICBpbml0aWFsaXplVHJhbnNpdGlvbihjb250
ZXh0KTsNCg0KICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LnNldHRpbmdzLnRpbWVJbmRpY2F0
b3IuaXNFbmFibGVkKSB7DQogICAgICAgICAgICAgICAgICAgIGNyZWF0ZUluZGljYXRvcihjb250
ZXh0KTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH07DQogICAg
fSgkKSk7DQogICAgLyoqDQogICAgICogZW5kIG9mIFNsaWRlckluaXRpYWxpemVyDQogICAgICov
DQoNCiAgICAvKioNCiAgICAgKiBDYXJvdXNlbCBjbGFzcyBkaXNwbGF5cyBvbmUgc2xpZGUgKHNv
bWUgY29udGVudCkgYXQgdGhlIHRpbWUuDQogICAgICogSXRzIGJlaGF2aW91ciBkZXBlbmRzIG9u
IHNldHRpbmdzIChwYXNzZWQgdG8gaW5pdCgpIG1ldGhvZCkuDQogICAgICogRm9yIG1vcmUgZGV0
YWlscyBAc2VlIFNsaWRlciwgQHNlZSBTbGlkZXJJbml0aWFsaXplciwgQHNlZSBOYXZpZ2F0aW9u
LA0KICAgICAqIEBzZWUgTmF2aWdhdGlvbkJ1aWxkZXIsIEBzZWUgWEEuY29tcG9uZW50LmNhcm91
c2Vscy5UcmFuc2l0aW9ucy5UcmFuc2l0aW9uLA0KICAgICAqIEBzZWUgWEEuY29tcG9uZW50LmNh
cm91c2Vscy5JbmRpY2F0b3JWaWV3cy5WaWV3DQogICAgICoNCiAgICAgKiBAY29uc3RydWN0b3IN
CiAgICAgKi8NCiAgICBmdW5jdGlvbiBDYXJvdXNlbCgpIHsNCiAgICAgICAgdmFyIGNvbnRleHQg
PSB0aGlzOw0KDQogICAgICAgIC8qKg0KICAgICAgICAgKiBJbnN0YW5jZSBvZiBhIFNsaWRlciBj
bGFzcyAoQHNlZSBTbGlkZXIpLg0KICAgICAgICAgKg0KICAgICAgICAgKiBAbWVtYmVyIENhcm91
c2VsDQogICAgICAgICAqLw0KICAgICAgICB0aGlzLnNsaWRlciA9IG51bGw7DQogICAgICAgIC8q
Kg0KICAgICAgICAgKiBEaXNwbGF5ZWQgc2xpZGUgKGpRdWVyeSBvYmplY3QpLg0KICAgICAgICAg
Kg0KICAgICAgICAgKiBAbWVtYmVyIENhcm91c2VsDQogICAgICAgICAqLw0KICAgICAgICB0aGlz
LiRjdXJyZW50U2xpZGUgPSBudWxsOw0KICAgICAgICAvKioNCiAgICAgICAgICogQWxsIHNsaWRl
cyAoalF1ZXJ5IG9iamVjdCkuDQogICAgICAgICAqDQogICAgICAgICAqIEBtZW1iZXIgQ2Fyb3Vz
ZWwNCiAgICAgICAgICovDQogICAgICAgIHRoaXMuJHNsaWRlcyA9IG51bGw7DQoNCiAgICAgICAg
LyoqDQogICAgICAgICAqIENoYW5nZXMgY3VycmVudCBzbGlkZSB0byBhICRuZXdTbGlkZS4NCiAg
ICAgICAgICoNCiAgICAgICAgICogQG1lbWJlciBDYXJvdXNlbA0KICAgICAgICAgKiBAcGFyYW0g
e09iamVjdH0gJG5ld1NsaWRlICB0aGUgbmV3IHNsaWRlIChqUXVlcnkpIG9iamVjdC4NCiAgICAg
ICAgICovDQogICAgICAgIHRoaXMuY2hhbmdlQ3VycmVudFNsaWRlID0gZnVuY3Rpb24oJG5ld1Ns
aWRlKSB7DQogICAgICAgICAgICBjb250ZXh0LiRjdXJyZW50U2xpZGUgPSAkbmV3U2xpZGU7DQog
ICAgICAgICAgICBjb250ZXh0LnNsaWRlci5zZWxlY3ROYXZpZ2F0aW9uSXRlbSgkbmV3U2xpZGUu
aW5kZXgoKSk7DQogICAgICAgIH07DQoNCiAgICAgICAgLyoqDQogICAgICAgICAqIFJldHVybnMg
Y3VycmVudCBzbGlkZS4NCiAgICAgICAgICoNCiAgICAgICAgICogQG1lbWJlciBDYXJvdXNlbA0K
ICAgICAgICAgKiBAcmV0dXJuIGN1cnJlbnQgc2xpZGUgKGpRdWVyeSkgb2JqZWN0Lg0KICAgICAg
ICAgKiBAdHlwZSBPYmplY3QNCiAgICAgICAgICovDQogICAgICAgIHRoaXMuZ2V0Q3VycmVudFNs
aWRlID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICByZXR1cm4gY29udGV4dC4kY3VycmVudFNs
aWRlOw0KICAgICAgICB9Ow0KDQogICAgICAgIHRoaXMuZGF0YSA9IHt9Ow0KICAgIH0NCg0KICAg
IC8qKg0KICAgICAqIFJlc2V0cyB0aGUgY2Fyb3VzZWwuDQogICAgICoNCiAgICAgKiBAbWVtYmVy
IENhcm91c2VsDQogICAgICovDQogICAgQ2Fyb3VzZWwucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rp
b24oKSB7DQogICAgICAgIHRoaXMuJHNsaWRlcy5lYWNoKGZ1bmN0aW9uKCkgew0KICAgICAgICAg
ICAgJCh0aGlzKS5oaWRlKCk7DQogICAgICAgIH0pOw0KDQogICAgICAgIHRoaXMuY2hhbmdlQ3Vy
cmVudFNsaWRlKHRoaXMuJHNsaWRlcy5maXJzdCgpKTsNCiAgICAgICAgdGhpcy4kY3VycmVudFNs
aWRlLnNob3coKTsNCiAgICB9Ow0KDQogICAgLyoqDQogICAgICogSW5pdGlhbGl6ZXMgdGhlIGNh
cm91c2VsLg0KICAgICAqIFdyYXBwcyBjYXJvdXNlbCBjb250ZW50IHdpdGggPGRpdiBjbGFzcz0i
d3JhcHBlciIgLz4gZWxlbWVudCwNCiAgICAgKiBzZWxlY3RzIHNsaWRlcyAoPGxpIC8+IGVsZW1l
bnRzKSBmcm9tIDx1bCBjbGFzcz0ic2xpZGVzIiAvPiBlbGVtZW50LA0KICAgICAqIGluaXRpYWxp
emVzIFNsaWRlciBjbGFzcyBpbmN0YW5jZSwgcmVzZXRzIHRoZSBjYXJvdXNlbCBhbmQgc3RhcnQg
YXV0b21hdGljIHNsaWRlcyBjaGFuZ2luZy4NCiAgICAgKg0KICAgICAqIEBtZW1iZXIgQ2Fyb3Vz
ZWwNCiAgICAgKiBAcGFyYW0ge09iamVjdH0gJGNvbnRhaW5lciAgICAgalF1ZXJ5IG9iamVjdCB3
aXRoIGEgbWFpbiBodG1sIGVsZW1lbnQgb2YgdGhlIGNhcm91c2VsDQogICAgICogQHBhcmFtIHtP
YmplY3R9IG9wdGlvbnMgICAgIGNhcm91c2VsIG9wdGlvbnMgb2JqZWN0DQogICAgICovDQogICAg
Q2Fyb3VzZWwucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigkY29udGFpbmVyLCBvcHRpb25zKSB7
DQogICAgICAgIHZhciAkd3JhcHBlciA9ICQoJzxkaXYvPicsIHsNCiAgICAgICAgICAgICAgICAn
Y2xhc3MnOiAnd3JhcHBlcicNCiAgICAgICAgICAgIH0pLA0KICAgICAgICAgICAgc2xpZGVyQ29u
dGV4dCA9IG51bGw7DQoNCiAgICAgICAgJHdyYXBwZXIuYXBwZW5kKCRjb250YWluZXIuY2hpbGRy
ZW4oKS5kZXRhY2goKSk7DQogICAgICAgICRjb250YWluZXIuYXBwZW5kKCR3cmFwcGVyKTsNCiAg
ICAgICAgdGhpcy4kc2xpZGVzID0gJGNvbnRhaW5lci5maW5kKCcuc2xpZGVzIGxpLnNsaWRlJyk7
DQoNCiAgICAgICAgc2xpZGVyQ29udGV4dCA9IG5ldyBTbGlkZXJDb250ZXh0KCk7DQogICAgICAg
IHNsaWRlckNvbnRleHQuY2hhbmdlQ3VycmVudFNsaWRlID0gdGhpcy5jaGFuZ2VDdXJyZW50U2xp
ZGU7DQogICAgICAgIHNsaWRlckNvbnRleHQuZ2V0Q3VycmVudFNsaWRlID0gdGhpcy5nZXRDdXJy
ZW50U2xpZGU7DQogICAgICAgIHNsaWRlckNvbnRleHQuJHNsaWRlcyA9IHRoaXMuJHNsaWRlczsN
CiAgICAgICAgc2xpZGVyQ29udGV4dC4kd3JhcHBlciA9ICR3cmFwcGVyOw0KDQogICAgICAgIHRo
aXMuc2xpZGVyID0gbmV3IFNsaWRlcigkLCBzbGlkZXJDb250ZXh0LCBvcHRpb25zKTsNCiAgICAg
ICAgU2xpZGVySW5pdGlhbGl6ZXIuaW5pdGlhbGl6ZShzbGlkZXJDb250ZXh0KTsNCg0KICAgICAg
ICB0aGlzLnJlc2V0KCk7DQogICAgICAgIHRoaXMuc2xpZGVyLnJ1bigpOw0KICAgIH07DQogICAg
LyoqDQogICAgICogZW5kIG9mIENhcm91c2VsIGNsYXNzDQogICAgICovDQoNCiAgICAvKioNCiAg
ICAgKiBSZWdpc3RlcnMgZWFjaCBlbGVtZW50cyB0aGF0IG1hdGNoIHRoZSBwcm92aWRlZCBzZWxl
Y3RvciBhcyBhIGNhcm91c2VsIHdpdGggYSBnaXZlbiBvcHRpb25zLg0KICAgICAqIENhcm91c2Vs
IG9wdGlvbnMgb2JqZWN0IDoNCiAgICAgKiB7DQogICAgICogICAgIC8vDQogICAgICogICAgIC8v
IG5hdmlnYXRpb246IE9iamVjdA0KICAgICAqICAgICAvLw0KICAgICAqICAgICAvLyBUaGUgbmF2
aWdhdGlvbiBjb25maWd1cmF0aW9uIG9iamVjdC4NCiAgICAgKiAgICAgLy8NCiAgICAgKiAgICAg
J25hdmlnYXRpb24nOiB7DQogICAgICogICAgICAgICAvLw0KICAgICAqICAgICAgICAgLy9pc0Vu
YWJsZWQ6IEJvb2xlYW4NCiAgICAgKiAgICAgICAgIC8vDQogICAgICogICAgICAgICAvLyBTZXRz
IHdoZXRoZXIgdGhlIG5hdmlnYXRpb24gaXMgZW5hYmxlZC4NCiAgICAgKiAgICAgICAgIC8vDQog
ICAgICogICAgICAgICAnaXNFbmFibGVkJzogdHJ1ZSwNCiAgICAgKiAgICAgICAgIC8vDQogICAg
ICogICAgICAgICAvLyBoYXNQcmV2TmV4dEl0ZW1zOiBCb29sZWFuDQogICAgICogICAgICAgICAv
Lw0KICAgICAqICAgICAgICAgLy8gU2V0cyB3aGV0aGVyIHRoZSBuYXZpZ2F0aW9uIGhhcyBwcmV2
aW91cyBhbmQgbmV4dCBidXR0b25zLg0KICAgICAqICAgICAgICAgLy8NCiAgICAgKiAgICAgICAg
ICdoYXNQcmV2TmV4dEl0ZW1zJzogdHJ1ZSwNCiAgICAgKiAgICAgICAgIC8vDQogICAgICogICAg
ICAgICAvLyBpdGVtOiBPYmplY3QNCiAgICAgKiAgICAgICAgIC8vDQogICAgICogICAgICAgICAv
LyBOYXZpZ2F0aW9uIGl0ZW0gY29uZmlndXJhdGlvbiBvYmplY3QuDQogICAgICogICAgICAgICAv
Lw0KICAgICAqICAgICAgICAgJ2l0ZW0nOiB7DQogICAgICogICAgICAgICAgICAgLy8NCiAgICAg
KiAgICAgICAgICAgICAvLyBsYWJlbDogU3RyaW5nDQogICAgICogICAgICAgICAgICAgLy8NCiAg
ICAgKiAgICAgICAgICAgICAvLyBMYWJlbCB0ZW1wbGF0ZTsgZWFjaCAnI3tpbmRleH0nIHN0cmlu
ZyB3aWxsIGJlIHJlcGxhY2VkIGJ5IHRoZSBudW1iZXIgb2YgYSBzbGlkZS4NCiAgICAgKiAgICAg
ICAgICAgICAvLw0KICAgICAqICAgICAgICAgICAgICdsYWJlbCc6ICcje2luZGV4fScsDQogICAg
ICogICAgICAgICAgICAgLy8NCiAgICAgKiAgICAgICAgICAgICAvLyBzZWxlY3RvcjogU3RyaW5n
DQogICAgICogICAgICAgICAgICAgLy8NCiAgICAgKiAgICAgICAgICAgICAvLyBOYXZpZ2F0aW9u
IGl0ZW1zIGNvbnRhaW5lciBzZWxlY3RvcjsgaWYgZXF1YWxzIG51bGwsIHRoZSBjb250YWluZXIg
d2lsbCBiZSBnZW5lcmF0ZWQNCiAgICAgKiAgICAgICAgICAgICAvLyAoJ2RpdicgZWxlbWVudCB3
aXRoICduYXYnIGNsYXNzIGF0dHJpYnV0ZSBpbnNpZGUgdGhlIGNhcm91c2VsKS4NCiAgICAgKiAg
ICAgICAgICAgICAvLw0KICAgICAqICAgICAgICAgICAgICdzZWxlY3Rvcic6IG51bGwNCiAgICAg
KiAgICAgICAgfSwNCiAgICAgKiAgICAgICAgIC8vDQogICAgICogICAgICAgICAvLyBwcmV2SXRl
bTogT2JqZWN0DQogICAgICogICAgICAgICAvLw0KICAgICAqICAgICAgICAgLy8gTmF2aWdhdGlv
biAncHJldmlvdXMgaXRlbScgY29uZmlndXJhdGlvbiBvYmplY3QuDQogICAgICogICAgICAgICAv
Lw0KICAgICAqICAgICAgICAgJ3ByZXZJdGVtJzogew0KICAgICAqICAgICAgICAgICAgIC8vDQog
ICAgICogICAgICAgICAgICAgLy8gbGFiZWw6IFN0cmluZw0KICAgICAqICAgICAgICAgICAgIC8v
DQogICAgICogICAgICAgICAgICAgLy8gVGhlICdwcmV2aW91cyBpdGVtJyBsYWJlbC4NCiAgICAg
KiAgICAgICAgICAgICAvLw0KICAgICAqICAgICAgICAgICAgICdsYWJlbCc6ICc8JywNCiAgICAg
KiAgICAgICAgICAgICAvLw0KICAgICAqICAgICAgICAgICAgIC8vIHNlbGVjdG9yOiBTdHJpbmcN
CiAgICAgKiAgICAgICAgICAgICAvLw0KICAgICAqICAgICAgICAgICAgIC8vIE5hdmlnYXRpb24g
J3ByZXZpb3VzIGl0ZW0nIHNlbGVjdG9yOyBpZiBlcXVhbHMgbnVsbCwgdGhlIGl0ZW0gd2lsbCBi
ZSBnZW5lcmF0ZWQNCiAgICAgKiAgICAgICAgICAgICAvLyAoJ2EnIGVsZW1lbnQgd2l0aCAncHJl
dicgY2xhc3MgYXR0cmlidXRlIGluc2lkZSB0aGUgbmF2aWdhdGlvbiBjb250YWluZXIpLg0KICAg
ICAqICAgICAgICAgICAgIC8vDQogICAgICogICAgICAgICAgICAgJ3NlbGVjdG9yJzogbnVsbCwN
CiAgICAgKiAgICAgICAgICAgICAvLw0KICAgICAqICAgICAgICAgICAgIC8vIGlzQ29udGFpbmVy
OiBCb29sZWFuDQogICAgICogICAgICAgICAgICAgLy8NCiAgICAgKiAgICAgICAgICAgICAvLyBT
ZXRzIHdoZXRoZXIgdGhlIGVsZW1lbnQgZm91bmQgYnkgc2VsZWN0b3Igc2hvdWxkIGJlIHRyZWF0
ZWQgYXMgYSBjb250YWluZXIgKGlmIHRydWUpDQogICAgICogICAgICAgICAgICAgLy8gb3Igc2hv
dWxkIGJlIGFkb3B0ZWQgYXMgYSAncHJldmlvdXMgaXRlbScgKGlmIGZhbHNlKS4gSWYgc2VsZWN0
b3IgZXF1YWxzIG51bGwgdGhpcyBwcm9wZXJ0eSBpcyBtZWFuaW5nbGVzcy4NCiAgICAgKiAgICAg
ICAgICAgICAvLw0KICAgICAqICAgICAgICAgICAgICdpc0NvbnRhaW5lcic6IGZhbHNlDQogICAg
ICogICAgICAgICB9LA0KICAgICAqICAgICAgICAgLy8NCiAgICAgKiAgICAgICAgIC8vIG5leHRJ
dGVtOiBPYmplY3QNCiAgICAgKiAgICAgICAgIC8vDQogICAgICogICAgICAgICAvLyBOYXZpZ2F0
aW9uICduZXh0IGl0ZW0nIGNvbmZpZ3VyYXRpb24gb2JqZWN0Lg0KICAgICAqICAgICAgICAgLy8N
CiAgICAgKiAgICAgICAgICduZXh0SXRlbSc6IHsNCiAgICAgKiAgICAgICAgICAgICAvLw0KICAg
ICAqICAgICAgICAgICAgIC8vIGxhYmVsOiBTdHJpbmcNCiAgICAgKiAgICAgICAgICAgICAvLw0K
ICAgICAqICAgICAgICAgICAgIC8vIFRoZSAnbmV4dCBpdGVtJyBsYWJlbC4NCiAgICAgKiAgICAg
ICAgICAgICAvLw0KICAgICAqICAgICAgICAgICAgICdsYWJlbCc6ICc+JywNCiAgICAgKiAgICAg
ICAgICAgICAvLw0KICAgICAqICAgICAgICAgICAgIC8vIHNlbGVjdG9yOiBTdHJpbmcNCiAgICAg
KiAgICAgICAgICAgICAvLw0KICAgICAqICAgICAgICAgICAgIC8vIE5hdmlnYXRpb24gJ25leHQg
aXRlbScgc2VsZWN0b3I7IGlmIGVxdWFscyBudWxsLCB0aGUgaXRlbSB3aWxsIGJlIGdlbmVyYXRl
ZA0KICAgICAqICAgICAgICAgICAgIC8vICgnYScgZWxlbWVudCB3aXRoICduZXh0JyBjbGFzcyBh
dHRyaWJ1dGUgaW5zaWRlIHRoZSBuYXZpZ2F0aW9uIGNvbnRhaW5lcikuDQogICAgICogICAgICAg
ICAgICAgLy8NCiAgICAgKiAgICAgICAgICAgICAnc2VsZWN0b3InOiBudWxsLA0KICAgICAqICAg
ICAgICAgICAgIC8vDQogICAgICogICAgICAgICAgICAgLy8gaXNDb250YWluZXI6IEJvb2xlYW4N
CiAgICAgKiAgICAgICAgICAgICAvLw0KICAgICAqICAgICAgICAgICAgIC8vIFNldHMgd2hldGhl
ciB0aGUgZWxlbWVudCBmb3VuZCBieSBzZWxlY3RvciBzaG91bGQgYmUgdHJlYXRlZCBhcyBhIGNv
bnRhaW5lciAoaWYgdHJ1ZSkNCiAgICAgKiAgICAgICAgICAgICAvLyBvciBzaG91bGQgYmUgYWRv
cHRlZCBhcyBhICduZXh0IGl0ZW0nIChpZiBmYWxzZSkuIElmIHNlbGVjdG9yIGVxdWFscyBudWxs
IHRoaXMgcHJvcGVydHkgaXMgbWVhbmluZ2xlc3MuDQogICAgICogICAgICAgICAgICAgLy8NCiAg
ICAgKiAgICAgICAgICAgICAnaXNDb250YWluZXInOiBmYWxzZQ0KICAgICAqICAgICAgICAgfQ0K
ICAgICAqICAgICB9LA0KICAgICAqICAgICAvLw0KICAgICAqICAgICAvLyB0aW1lb3V0OiBOdW1i
ZXINCiAgICAgKiAgICAgLy8NCiAgICAgKiAgICAgLy8gVGhlIGludGVydmFsIGJldHdlZW4gdGhl
IHNsaWRlcyBpbiBtaWxpc2Vjb25kcy4NCiAgICAgKiAgICAgLy8NCiAgICAgKiAgICAgJ3RpbWVv
dXQnOiAxMDAwMCwNCiAgICAgKiAgICAgLy8NCiAgICAgKiAgICAgLy8gdHJhbnNpdGlvbjogU3Ry
aW5nDQogICAgICogICAgIC8vDQogICAgICogICAgIC8vIE5hbWUgb2YgdGhlIHRyYW5zaXRpb24g
Y2xhc3MsIHdoaWNoIHdpbGwgYmUgdXNlZC4gUG9zc2libGUgdmFsdWVzIGFyZToNCiAgICAgKiAg
ICAgLy8gLSBCYXNpY1RyYW5zaXRpb24gLSB3aXRob3V0IGFueSBhbmltYXRpb24sDQogICAgICog
ICAgIC8vIC0gRmFkZUluVHJhbnNpdGlvbiAtIG5ldyBzbGlkZSBmYWRlcyBpbiwNCiAgICAgKiAg
ICAgLy8gLSBTbGlkZUhvcml6b250YWxseVRyYW5zaXRpb24gLSBuZXcgc2xpZGUgbW92ZXMgZnJv
bSByaWdodCAoZnJvbSBsZWZ0IGlmIHVzZXIgc2VsZWN0cyBzbGlkZSB3aXRoIGxvd2VyIGlkIG9y
IGNsaWNrcyBvbiAncHJldmlvdXMgaXRlbScpLA0KICAgICAqICAgICAvLyAtIFNsaWRlVmVydGlj
YWxseVRyYW5zaXRpb24gLSBuZXcgc2xpZGUgbW92ZXMgZnJvbSB0b3AgKGZyb20gYm90dG9tIGlm
IHVzZXIgc2VsZWN0cyBzbGlkZSB3aXRoIGxvd2VyIGlkIG9yIGNsaWNrcyBvbiAncHJldmlvdXMg
aXRlbScpLA0KICAgICAqICAgICAvLyAtIG90aGVyIC0gaWYgaW1wbGVtZW50ZWQgKGRlcml2ZWQg
ZnJvbSBYQS5jb21wb25lbnQuY2Fyb3VzZWxzLlRyYW5zaXRpb25zLlRyYW5zaXRpb24gY2xhc3Mp
IGFuZCBhZGRlZCB0byBYQS5jb21wb25lbnQuY2Fyb3VzZWxzLlRyYW5zaXRpb25zIG1vZHVsZS4N
CiAgICAgKiAgICAgLy8NCiAgICAgKiAgICAgJ3RyYW5zaXRpb24nOiAnQmFzaWNUcmFuc2l0aW9u
JywNCiAgICAgKiAgICAgLy8NCiAgICAgKiAgICAgLy8gaXNQYXVzZUVuYWJsZWQ6IEJvb2xlYW4N
CiAgICAgKiAgICAgLy8NCiAgICAgKiAgICAgLy8gU2V0cyB3aGV0aGVyIHRoZSBwYXVzZSBmZWF0
dXJlIGlzIGVuYWJsZWQuDQogICAgICogICAgIC8vIFBhdXNlIGZlYXR1cmUgcGF1c2VzIGNvdW50
ZG93biBvZiBjaGFuZ2luZyBzbGlkZXMsIHdoZW4gbW91c2UgaXMgaW4gYSBjYXJvdXNlbCBhcmVh
Lg0KICAgICAqICAgICAvLw0KICAgICAqICAgICAnaXNQYXVzZUVuYWJsZWQnOiB0cnVlLA0KICAg
ICAqICAgICAvLw0KICAgICAqICAgICAvLyB0aW1lSW5kaWNhdG9yOiBPYmplY3QNCiAgICAgKiAg
ICAgLy8NCiAgICAgKiAgICAgLy8gJ1RpbWUgaW5kaWNhdG9yJyBjb25maWd1cmF0aW9uIG9iamVj
dC4NCiAgICAgKiAgICAgLy8NCiAgICAgKiAgICAgJ3RpbWVJbmRpY2F0b3InOiB7DQogICAgICog
ICAgICAgICAvLw0KICAgICAqICAgICAgICAgLy8gaXNFbmFibGVkOiBCb29sZWFuDQogICAgICog
ICAgICAgICAvLw0KICAgICAqICAgICAgICAgLy8gU2V0cyB3aGV0aGVyIHRoZSAndGltZSBpbmRp
Y2F0b3InIGlzIGVuYWJsZWQuDQogICAgICogICAgICAgICAvLw0KICAgICAqICAgICAgICAgJ2lz
RW5hYmxlZCc6IGZhbHNlLA0KICAgICAqICAgICAgICAgLy8NCiAgICAgKiAgICAgICAgIC8vIHNl
bGVjdG9yOiBTdHJpbmcNCiAgICAgKiAgICAgICAgIC8vDQogICAgICogICAgICAgICAvLyAnVGlt
ZSBpbmRpY2F0b3InIHNlbGVjdG9yLg0KICAgICAqICAgICAgICAgLy8NCiAgICAgKiAgICAgICAg
ICdzZWxlY3Rvcic6IG51bGwsDQogICAgICogICAgICAgICAvLw0KICAgICAqICAgICAgICAgLy8g
dmlldzogU3RyaW5nDQogICAgICogICAgICAgICAvLw0KICAgICAqICAgICAgICAgLy8gTmFtZSBv
ZiB0aGUgdmlldyBjbGFzcywgd2hpY2ggd2lsbCBiZSB1c2VkLiBQb3NzaWJsZSB2YWx1ZXMgYXJl
Og0KICAgICAqICAgICAgICAgLy8gLSBWaWV3IC0gd2l0aG91dCBhbnkgYW5pbWF0aW9uIChiYXNl
IGNsYXNzKSwNCiAgICAgKiAgICAgICAgIC8vIC0gUHJvZ3Jlc3NCYXJWaWV3IC0gc2hvd3MgdGhl
IHByb2dyZXNzIG9mIHRpbWUgYXMgcHJvZ3Jlc3MgYmFyLA0KICAgICAqICAgICAgICAgLy8gLSBS
b3RhdG9yVmlldyAtIHNob3dzIHRoZSBwcm9ncmVzcyBvZiB0aW1lIHdpdGggdGhlIGZpbGxpbmcg
dXAgcmluZw0KICAgICAqICAgICAgICAgLy8gLSBvdGhlciAtIGlmIGltcGxlbWVudGVkIChkZXJp
dmVkIGZyb20gWEEuY29tcG9uZW50LmNhcm91c2Vscy5JbmRpY2F0b3JWaWV3cy5WaWV3IGNsYXNz
KSBhbmQgYWRkZWQgdG8gWEEuY29tcG9uZW50LmNhcm91c2Vscy5JbmRpY2F0b3JWaWV3cyBtb2R1
bGUuDQogICAgICogICAgICAgICAvLw0KICAgICAqICAgICAgICAgJ3ZpZXcnOiAnVmlldycsDQog
ICAgICogICAgICAgICAvLw0KICAgICAqICAgICAgICAgLy8gb3B0aW9uczogT2JqZWN0DQogICAg
ICogICAgICAgICAvLw0KICAgICAqICAgICAgICAgLy8gJ1RpbWUgaW5kaWNhdG9yJyB2aWV3IHNl
dHRpbmdzIG9iamVjdC4gRGVwZW5kcyBvbiB2aWV3Lg0KICAgICAqICAgICAgICAgLy8NCiAgICAg
KiAgICAgICAgICdvcHRpb25zJzoge30NCiAgICAgKiAgICAgfQ0KICAgICAqIH0NCiAgICAgKi8N
Cg0KICAgIC8qIHB1Yi5yZWdpc3RlciA9IGZ1bmN0aW9uIChzZWxlY3Rvciwgb3B0aW9ucykgew0K
ICAgICB2YXIgJGNhcm91c2VscyA9ICQoc2VsZWN0b3IpOw0KICAgICAkY2Fyb3VzZWxzLmVhY2go
ZnVuY3Rpb24gKCkgew0KICAgICAvL3ZhciBjYXJvdXNlbCA9IG5ldyBDYXJvdXNlbCgkKTsNCiAg
ICAgY29uc29sZS5sb2coJCh0aGlzKSk7DQogICAgIC8vY2Fyb3VzZWwuaW5pdCgkKHRoaXMpLCBv
cHRpb25zKTsNCiAgICAgfSk7DQogICAgIH07Ki8NCg0KICAgIC8qIENhcm91c2VsIHRvdWNoIHN1
cHBvcnQgKi8NCiAgICBDYXJvdXNlbC5wcm90b3R5cGUuc3dpcGVTbGlkZSA9IGZ1bmN0aW9uKCkg
ew0KICAgICAgICB2YXIgc2VsZiA9IHRoaXMsDQogICAgICAgICAgICAkd3JhcHBlciA9IHRoaXMu
c2xpZGVyLmNvbnRleHQuJHdyYXBwZXIsDQogICAgICAgICAgICBoYW1tZXIgPSBuZXcgSGFtbWVy
KCR3cmFwcGVyWzBdKTsNCg0KICAgICAgICBoYW1tZXIub24oInN3aXBlbGVmdCIsIGZ1bmN0aW9u
KGUpIHsNCiAgICAgICAgICAgIHNlbGYuc2xpZGVyLmNvbnRleHQub3duZXIub25DaGFuZ2VDdXJy
ZW50U2xpZGUoZSwgMSwgc2VsZi5zbGlkZXIuY29udGV4dCk7DQogICAgICAgIH0pOw0KDQogICAg
ICAgIGhhbW1lci5vbigic3dpcGVyaWdodCIsIGZ1bmN0aW9uKGUpIHsNCiAgICAgICAgICAgIHNl
bGYuc2xpZGVyLmNvbnRleHQub3duZXIub25DaGFuZ2VDdXJyZW50U2xpZGUoZSwgLTEsIHNlbGYu
c2xpZGVyLmNvbnRleHQpOw0KICAgICAgICB9KTsNCiAgICB9Ow0KDQogICAgQ2Fyb3VzZWwucHJv
dG90eXBlLmRpc2FibGVFbXB0eVNsaWRlcyA9IGZ1bmN0aW9uKCkgew0KICAgICAgICB2YXIgZW1w
dHlQbGFjZWhvbGRlcnMgPSB0aGlzLiRzbGlkZXMuZmluZCgiLnNjRW1wdHlQbGFjZWhvbGRlciIp
LA0KICAgICAgICAgICAgcGxhY2Vob2xkZXJDb2RlVGFnLA0KICAgICAgICAgICAgJHBsYWNlaG9s
ZGVyLA0KICAgICAgICAgICAgcGxhY2Vob2xkZXJJZCwNCiAgICAgICAgICAgIHBsYWNlaG9sZGVy
S2V5LA0KICAgICAgICAgICAgZWRpdEZyYW1lLA0KICAgICAgICAgICAgY2hyb21lS2V5LA0KICAg
ICAgICAgICAgaDsNCg0KICAgICAgICBfLmVhY2goZW1wdHlQbGFjZWhvbGRlcnMsIGZ1bmN0aW9u
KHBsYWNlaG9sZGVyKSB7DQogICAgICAgICAgICAkcGxhY2Vob2xkZXIgPSAkKHBsYWNlaG9sZGVy
KTsNCiAgICAgICAgICAgIHBsYWNlaG9sZGVySWQgPSAkcGxhY2Vob2xkZXIuYXR0cigic2MtcGxh
Y2Vob2xkZXItaWQiKTsNCg0KICAgICAgICAgICAgLy9kaXNhYmxlIGVkaXQgZnJhbWVzDQogICAg
ICAgICAgICBwbGFjZWhvbGRlckNvZGVUYWcgPSAkcGxhY2Vob2xkZXIuc2libGluZ3MoImNvZGVb
Y2hyb21ldHlwZT0ncGxhY2Vob2xkZXInXVtpZD0nIiArIHBsYWNlaG9sZGVySWQgKyAiJ10iKTsN
CiAgICAgICAgICAgIHRyeSB7DQogICAgICAgICAgICAgICAgcGxhY2Vob2xkZXJLZXkgPSBwbGFj
ZWhvbGRlckNvZGVUYWcuYXR0cigia2V5Iik7DQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZihw
bGFjZWhvbGRlcktleSkgPT09ICJzdHJpbmciKSB7DQogICAgICAgICAgICAgICAgICAgIGVkaXRG
cmFtZSA9IFNpdGVjb3JlLlBhZ2VNb2Rlcy5DaHJvbWVNYW5hZ2VyLmNocm9tZXMoKS5maWx0ZXIo
ZnVuY3Rpb24oY2hyb21lKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBjaHJvbWVLZXkgPSBj
aHJvbWUub3BlbmluZ01hcmtlcigpOw0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjaHJv
bWVLZXkpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAg
ICAgICAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAgICAgICAgIGNocm9tZUtl
eSA9IGNocm9tZUtleS5hdHRyKCJrZXkiKTsNCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVy
biB0eXBlb2YoY2hyb21lS2V5KSAhPT0gInVuZGVmaW5lZCIgJiYgY2hyb21lS2V5LmluZGV4T2Yo
cGxhY2Vob2xkZXJLZXkpID09PSAwOw0KICAgICAgICAgICAgICAgICAgICB9KTsNCg0KICAgICAg
ICAgICAgICAgICAgICBlZGl0RnJhbWVbMF0udHlwZS5jaHJvbWUuZGF0YS5jdXN0b20uZWRpdGFi
bGUgPSAiZmFsc2UiOw0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAg
ICAgIHRocm93IDY2NjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9IGNhdGNoIChl
KSB7IC8vZmFsbGJhY2sgLSBkZWxldGUgY29kZSB0YWdzIHRvIHByZXZlbnQgaW5zZXJ0aW5nIGlu
dG8gcGxhY2Vob2xkZXJzDQogICAgICAgICAgICAgICAgJHBsYWNlaG9sZGVyLnNpYmxpbmdzKCJj
b2RlW2Nocm9tZXR5cGU9J3BsYWNlaG9sZGVyJ10iKS5yZW1vdmUoKTsNCiAgICAgICAgICAgICAg
ICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25zb2xlICovDQogICAgICAgICAgICAgICAgY29uc29s
ZS5sb2coIkNvdWxkIG5vdCBkaXNhYmxlIGVkaXRpbmcgZm9yIHBsYWNlaG9sZGVyIiwgZSk7DQog
ICAgICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25zb2xlICovDQogICAgICAgICAg
ICB9DQoNCiAgICAgICAgICAgIC8vYWRqdXN0IGhlaWdodCwgYW5kIHJlbW92ZSBwbGFjZWhvbGRl
ciAiZGFzaGVkIiBiYWNrZ3JvdW5kDQogICAgICAgICAgICBoID0gJHBsYWNlaG9sZGVyLmhlaWdo
dCgpICsgInB4IjsNCiAgICAgICAgICAgICRwbGFjZWhvbGRlci5yZW1vdmVDbGFzcygic2NFbXB0
eVBsYWNlaG9sZGVyIik7DQogICAgICAgICAgICAkcGxhY2Vob2xkZXIuY3NzKCJoZWlnaHQiLCBo
KTsNCg0KICAgICAgICAgICAgLy9zZXQgZWRpdCBoZXJlIHRleHQNCiAgICAgICAgICAgICRwbGFj
ZWhvbGRlci5hcHBlbmQoJCgiPHA+W05vIGNvbXBvbmVudHMgaW4gc2xpZGVdPC9wPiIpKTsNCiAg
ICAgICAgfSk7DQogICAgfQ0KDQoNCiAgICBDYXJvdXNlbC5wcm90b3R5cGUucmVzaXplV3JhcHBl
ciA9IGZ1bmN0aW9uKCkgew0KICAgICAgICB2YXIgcGFnZUhlaWdodCA9ICQoZG9jdW1lbnQpLm91
dGVySGVpZ2h0KCksDQogICAgICAgICAgICBoZWFkZXJIZWlnaHQgPSAkKCcjaGVhZGVyJykub3V0
ZXJIZWlnaHQoKSwNCiAgICAgICAgICAgIGNvbnRlbnRQYWRkaW5nVG9wID0gcGFyc2VJbnQoJCgn
I2NvbnRlbnQnKS5jc3MoJ3BhZGRpbmctdG9wJyksIDEwKSwNCiAgICAgICAgICAgIGNvbnRlbnRQ
YWRkaW5nQm90dG9tID0gcGFyc2VJbnQoJCgnI2NvbnRlbnQnKS5jc3MoJ3BhZGRpbmctYm90dG9t
JyksIDEwKSwNCiAgICAgICAgICAgIGNvbnRlbnRQYWRkaW5nID0gY29udGVudFBhZGRpbmdUb3Ag
KyBjb250ZW50UGFkZGluZ0JvdHRvbSwNCiAgICAgICAgICAgIGZvb3RlckhlaWdodCA9ICQoJyNm
b290ZXInKS5vdXRlckhlaWdodCgpLA0KICAgICAgICAgICAgd3JhcHBlciA9IHRoaXMuc2xpZGVy
LmNvbnRleHQuJHdyYXBwZXIsDQogICAgICAgICAgICBjYXJvdXNlbEhlaWdodCA9IDA7DQoNCiAg
ICAgICAgY2Fyb3VzZWxIZWlnaHQgPSBwYWdlSGVpZ2h0IC0gKGhlYWRlckhlaWdodCArIGZvb3Rl
ckhlaWdodCArIGNvbnRlbnRQYWRkaW5nKTsNCg0KICAgICAgICB3cmFwcGVyLmNzcyh7DQogICAg
ICAgICAgICAnaGVpZ2h0JzogY2Fyb3VzZWxIZWlnaHQNCiAgICAgICAgfSk7DQoNCiAgICAgICAg
d3JhcHBlci5maW5kKCcuc2xpZGVzJykuY3NzKHsNCiAgICAgICAgICAgICdoZWlnaHQnOiBjYXJv
dXNlbEhlaWdodA0KICAgICAgICB9KTsNCiAgICB9Ow0KDQoNCiAgICBwdWIuaW5pdCA9IGZ1bmN0
aW9uKCkgew0KICAgICAgICAkKCIuY2Fyb3VzZWw6bm90KC5pbml0aWFsaXplZCkiKS5lYWNoKGZ1
bmN0aW9uKCkgew0KICAgICAgICAgICAgdmFyIHByb3BlcnRpZXMgPSAkKHRoaXMpLmRhdGEoInBy
b3BlcnRpZXMiKSwNCiAgICAgICAgICAgICAgICBjb21wb25lbnQgPSAkKHRoaXMpLmZpbmQoIi5j
YXJvdXNlbC1pbm5lciIpLA0KICAgICAgICAgICAgICAgIGlkID0gY29tcG9uZW50LmF0dHIoImRh
dGEtaWQiKSwNCiAgICAgICAgICAgICAgICBzZWxmID0gdGhpczsNCg0KICAgICAgICAgICAgaWYg
KHByb3BlcnRpZXMpIHsNCiAgICAgICAgICAgICAgICBpZiAoIXByb3BlcnRpZXMubmF2aWdhdGlv
bikgew0KICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm5hdmlnYXRpb24gPSB7DQogICAg
ICAgICAgICAgICAgICAgICAgICBpdGVtOiB7fSwNCiAgICAgICAgICAgICAgICAgICAgICAgIHBy
ZXZJdGVtOiB7fSwNCiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRJdGVtOiB7fQ0KICAgICAg
ICAgICAgICAgICAgICB9Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBwcm9w
ZXJ0aWVzLm5hdmlnYXRpb24uaXRlbS5zZWxlY3RvciA9ICJbZGF0YS1pZD0nIiArIGlkICsgIidd
IC5uYXYtaXRlbXMiOyAvL3Byb3BlcnRpZXMubmF2aWdhdGlvbi5pdGVtLnNlbGVjdG9yOw0KICAg
ICAgICAgICAgICAgIHByb3BlcnRpZXMubmF2aWdhdGlvbi5wcmV2SXRlbS5zZWxlY3RvciA9ICIj
IiArIGlkICsgIiAubmF2IjsNCiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzLm5hdmlnYXRpb24u
bmV4dEl0ZW0uc2VsZWN0b3IgPSAiIyIgKyBpZCArICIgLm5hdiI7DQoNCiAgICAgICAgICAgICAg
ICB2YXIgY2Fyb3VzZWwgPSBuZXcgQ2Fyb3VzZWwoJCk7DQogICAgICAgICAgICAgICAgY2Fyb3Vz
ZWwuaW5pdChjb21wb25lbnQsIHByb3BlcnRpZXMpOw0KDQogICAgICAgICAgICAgICAgJCh3aW5k
b3cpLm9uKCdsb2FkJywgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgICAgIGlmICgkKHNl
bGYpLmhhc0NsYXNzKCdjYXJvdXNlbC1jbGllbnRzJykpIHsNCiAgICAgICAgICAgICAgICAgICAg
ICAgIGNhcm91c2VsLnJlc2l6ZVdyYXBwZXIoKTsNCiAgICAgICAgICAgICAgICAgICAgfQ0KDQog
ICAgICAgICAgICAgICAgICAgIGNhcm91c2VsLmRpc2FibGVFbXB0eVNsaWRlcygpOw0KICAgICAg
ICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgY2Fyb3VzZWwuc3dpcGVTbGlkZSgpOw0K
DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoImluaXRpYWxp
emVkIik7DQogICAgICAgIH0pOw0KICAgIH07DQoNCiAgICByZXR1cm4gcHViOw0KfShqUXVlcnkp
KTsNCi8qKg0KICogZW5kIG9mIFhBLmNvbXBvbmVudC5jYXJvdXNlbHMgbW9kdWxlLg0KICovDQoN
Cg0KWEEucmVnaXN0ZXIoImNhcm91c2VscyIsIFhBLmNvbXBvbmVudC5jYXJvdXNlbHMpOw0KDQoN
Ci8qKg0KICogWEFDb250ZXh0DQogKg0KICogWEEuY29tcG9uZW50LmNhcm91c2Vscy5UcmFuc2l0
aW9ucyBtb2R1bGUuDQogKg0KICogRXhwb3NlcyBUcmFuc2l0aW9uIGNsYXNzLCB3aGljaCBpcyBi
YXNlIGNsYXNzIG9mIGFsbCB0cmFuc2l0aW9ucyB1c2VkIGJ5IGNhcm91c2VscyAoQHNlZSBYQS5j
b21wb25lbnQuY2Fyb3VzZWxzLCBAc2VlIFNsaWRlciwgQHNlZSBUcmFuc2l0aW9uKS4NCiAqIEFs
c28gZXhwb3NlcyBpbXBsZW1lbnRhdGlvbiBvZiBiYXNpYyBlZmZlY3RzOg0KICogLSBCYXNpY1Ry
YW5zaXRpb24gLSB3aXRob3V0IGFueSBhbmltYXRpb24sDQogKiAtIEZhZGVJblRyYW5zaXRpb24g
LSBuZXcgc2xpZGUgZmFkZXMgaW4sDQogKiAtIFNsaWRlSG9yaXpvbnRhbGx5VHJhbnNpdGlvbiAt
IG5ldyBzbGlkZSBtb3ZlcyBmcm9tIHJpZ2h0IChmcm9tIGxlZnQgaWYgdXNlciBzZWxlY3RzIHNs
aWRlIHdpdGggbG93ZXIgaWQgb3IgY2xpY2tzIG9uICdwcmV2aW91cyBpdGVtJyksDQogKiAtIFNs
aWRlVmVydGljYWxseVRyYW5zaXRpb24gLSBuZXcgc2xpZGUgbW92ZXMgZnJvbSB0b3AgKGZyb20g
Ym90dG9tIGlmIHVzZXIgc2VsZWN0cyBzbGlkZSB3aXRoIGxvd2VyIGlkIG9yIGNsaWNrcyBvbiAn
cHJldmlvdXMgaXRlbScpLg0KICogQ2Fyb3VzZWwgdGFrZXMgdGhlIGNsYXNzIGNvbnN0cnVjdG9y
IGJ5IG5hbWUgZnJvbSB0aGlzIG1vZHVsZSAoaXQgaXMgZ2l2ZW4gaW4gb3B0aW9ucyBvYmplY3Qg
b2YgY2Fyb3VzZWw7IEBzZWUgWEEuY29tcG9uZW50LmNhcm91c2VscykuDQogKiBJZiB0aGVyZSBp
cyBhIG5lZWQgdG8gaW1wbGVtZW50IHRoZSBuZXcgZWZmZWN0LCBjcmVhdGUgYSBuZXcgY2xhc3Ms
IGJ5IGluaGVyaXRpbmcgZnJvbSBUcmFuc2l0aW9uIGNsYXNzIGFuZCBhZGQgaXQgdG8gdGhpcyBt
b2R1bGUuDQogKg0KICogRXhhbXBsZSBlZmZlY3QgaW1wbGVtZW50YXRpb24gKGN1cnJlbnRseSBk
aXNwbGF5ZWQgc2xpZGUgaXMgc2hyaW5raW5nIHRvIGNlbnRlciBvZiB0aGUgY2Fyb3VzZWwpOg0K
ICogKGZ1bmN0aW9uICgpIHsNCiogICAgIGZ1bmN0aW9uIFNhbXBsZVRyYW5zaXRpb24oKSB7IH0N
CioNCiogICAgIC8vaW5oZXJpdCBmcm9tIFhBLmNvbXBvbmVudC5jYXJvdXNlbHMuVHJhbnNpdGlv
bnMuVHJhbnNpdGlvbg0KKiAgICAgU2FtcGxlVHJhbnNpdGlvbi5wcm90b3R5cGUgPSBuZXcgWEEu
Y29tcG9uZW50LmNhcm91c2Vscy5UcmFuc2l0aW9ucy5UcmFuc2l0aW9uKCk7DQoqICAgICBTYW1w
bGVUcmFuc2l0aW9uLmNvbnN0cnVjdG9yID0gU2FtcGxlVHJhbnNpdGlvbjsNCioNCiogICAgIFNh
bXBsZVRyYW5zaXRpb24ucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoc2V0dGluZ3MpIHsNCiog
ICAgICAgICAvL3Bvc2l0aW9uaW5nIGFsbCBzbGlkZXMgaW4gdGhlIHRvcCBsZWZ0IGNvcm5lciBv
ZiB0aGUgY2Fyb3VzZWwNCiogICAgICAgICBzZXR0aW5ncy4kc2xpZGVzLmNzcyh7DQoqICAgICAg
ICAgICAgICdwb3NpdGlvbic6ICdhYnNvbHV0ZScsDQoqICAgICAgICAgICAgICd0b3AnOiAnMHB4
JywNCiogICAgICAgICAgICAgJ2xlZnQnOiAnMHB4Jw0KKiAgICAgICAgIH0pOw0KKiAgICAgfTsN
CioNCiogICAgIFNhbXBsZVRyYW5zaXRpb24ucHJvdG90eXBlLm9uQW5pbWF0aW9uQ29tcGxldGUg
PSBmdW5jdGlvbihzZXR0aW5ncywgd2lkdGgsIGhlaWdodCkgew0KKiAgICAgICAgIHZhciB6SW5k
ZXhBdHRyaWIgPSAnei1pbmRleCcsDQoqICAgICAgICAgJGN1cnJlbnQgPSBzZXR0aW5ncy4kY3Vy
cmVudFNsaWRlOw0KKg0KKiAgICAgICAgICRjdXJyZW50LmhpZGUoKTsNCiAgICAgICAgICAvL3Jl
dmVydGluZyBjaGFuZ2VzIGluIGNzcyBwcm9wZXJ0aWVzDQoqICAgICAgICAgJGN1cnJlbnQuY3Nz
KHsNCiogICAgICAgICAgICAgJ3dpZHRoJzogd2lkdGgsDQoqICAgICAgICAgICAgICdoZWlnaHQn
OiBoZWlnaHQsDQoqICAgICAgICAgICAgICdsZWZ0JzogMCwNCiogICAgICAgICAgICAgJ3RvcCc6
IDANCiogICAgICAgICB9KTsNCiogICAgICAgICAkY3VycmVudC5jc3MoekluZGV4QXR0cmliLCAn
Jyk7DQoqICAgICAgICAgc2V0dGluZ3MuJHNsaWRlcy5wYXJlbnQoKS5jc3MoekluZGV4QXR0cmli
LCAnJyk7DQoqDQoqICAgICAgICAgLy9ub3RpZnlpbmcgdGhlIGNhcm91c2VsLCB0aGF0IGFuaW1h
dGlvbiBpcyBjb21wbGV0ZWQNCiogICAgICAgICBzZXR0aW5ncy5jYWxsYmFjaygpOw0KKiAgICAg
fTsNCioNCiogICAgIFNhbXBsZVRyYW5zaXRpb24ucHJvdG90eXBlLnBlcmZvcm0gPSBmdW5jdGlv
biAoc2V0dGluZ3MpIHsNCiogICAgICAgICB2YXIgaGVpZ2h0ID0gc2V0dGluZ3MuJGN1cnJlbnRT
bGlkZS5oZWlnaHQoKSwNCiogICAgICAgICB3aWR0aCA9IHNldHRpbmdzLiRjdXJyZW50U2xpZGUu
d2lkdGgoKSwNCiogICAgICAgICBvbkFuaW1hdGlvbkNvbXBsZXRlZCA9IHRoaXMub25BbmltYXRp
b25Db21wbGV0ZSwNCiogICAgICAgICB6SW5kZXhBdHRyaWIgPSAnei1pbmRleCcsDQoqICAgICAg
ICAgJHBhcmVudCA9IHNldHRpbmdzLiRzbGlkZXMucGFyZW50KCksDQoqICAgICAgICAgJGN1cnJl
bnQgPSBzZXR0aW5ncy4kY3VycmVudFNsaWRlLA0KKiAgICAgICAgICRuZXh0ID0gc2V0dGluZ3Mu
JG5leHRTbGlkZTsNCioNCiogICAgICAgICAvL3NldHRpbmcgYSBuZXcgc2xpZGUgdW5kZXIgdGhl
IGN1cnJlbnQgc2xpZGUNCiogICAgICAgICAkcGFyZW50LmNzcyh6SW5kZXhBdHRyaWIsIDApOw0K
KiAgICAgICAgICRjdXJyZW50LmNzcyh6SW5kZXhBdHRyaWIsIDEpOw0KKiAgICAgICAgICRuZXh0
LnNob3coKTsNCioNCiogICAgICAgICAvL2FuaW1hdGUgY3VycmVudCBzbGlkZQ0KKiAgICAgICAg
ICRjdXJyZW50LmFuaW1hdGUoew0KKiAgICAgICAgICAgICAnd2lkdGgnOiAnMHB4JywNCiogICAg
ICAgICAgICAgJ2hlaWdodCc6ICcwcHgnLA0KKiAgICAgICAgICAgICAnbGVmdCc6IHdpZHRoIC8g
MiwNCiogICAgICAgICAgICAgJ3RvcCc6IGhlaWdodCAvIDINCiogICAgICAgICB9LCBmdW5jdGlv
bigpIHsNCiogICAgICAgICAgICAgb25BbmltYXRpb25Db21wbGV0ZWQoc2V0dGluZ3MsIHdpZHRo
LCBoZWlnaHQpOw0KKiAgICAgICAgIH0pOw0KKiAgICAgfTsNCioNCiogICAgIC8vYWRkaW5nIG5l
dyBlZmZlY3QgdG8gWEEuY29tcG9uZW50LmNhcm91c2Vscy5UcmFuc2l0aW9ucyBtb2R1bGUuDQoq
ICAgICBYQS5jb21wb25lbnQuY2Fyb3VzZWxzLlRyYW5zaXRpb25zLlNhbXBsZVRyYW5zaXRpb24g
PSBTYW1wbGVUcmFuc2l0aW9uOw0KKiB9ICgpKTsNCiAqDQogKi8NClhBLmNvbXBvbmVudC5jYXJv
dXNlbHMuVHJhbnNpdGlvbnMgPSAoZnVuY3Rpb24oKSB7DQogICAgdmFyIHB1YiA9IHt9Ow0KDQog
ICAgLyoqDQogICAgICogVHJhbnNpdGlvblNldHRpbmdzIGNsYXNzIGhvbGRzIGRhdGEgbmVlZGVk
IGZvciBjaGFuZ2luZyBzbGlkZXMNCiAgICAgKiBAY29uc3RydWN0b3INCiAgICAgKi8NCiAgICBm
dW5jdGlvbiBUcmFuc2l0aW9uU2V0dGluZ3MoKSB7fQ0KICAgIC8qKg0KICAgICAqIEN1cnJlbnQg
c2xpZGUgKGN1cnJlbnRseSBkaXNwbGF5ZWQpIGpRdWVyeSBvYmplY3QNCiAgICAgKg0KICAgICAq
IEBtZW1iZXIgVHJhbnNpdGlvblNldHRpbmdzDQogICAgICovDQogICAgVHJhbnNpdGlvblNldHRp
bmdzLnByb3RvdHlwZS4kY3VycmVudFNsaWRlID0gbnVsbDsNCiAgICAvKioNCiAgICAgKiBOZXh0
IHNsaWRlIGpRdWVyeSBvYmplY3QNCiAgICAgKg0KICAgICAqIEBtZW1iZXIgVHJhbnNpdGlvblNl
dHRpbmdzDQogICAgICovDQogICAgVHJhbnNpdGlvblNldHRpbmdzLnByb3RvdHlwZS4kbmV4dFNs
aWRlID0gbnVsbDsNCiAgICAvKioNCiAgICAgKiBBbGwgc2xpZGVzIChqUXVlcnkgb2JqZWN0KQ0K
ICAgICAqDQogICAgICogQG1lbWJlciBUcmFuc2l0aW9uU2V0dGluZ3MNCiAgICAgKi8NCiAgICBU
cmFuc2l0aW9uU2V0dGluZ3MucHJvdG90eXBlLiRzbGlkZXMgPSBudWxsOw0KICAgIC8qKg0KICAg
ICAqIE9mZnNldCBiZXR3ZWVuICRjdXJyZW50U2xpZGUgYW5kICRuZXh0U2xpZGUNCiAgICAgKg0K
ICAgICAqIEBtZW1iZXIgVHJhbnNpdGlvblNldHRpbmdzDQogICAgICovDQogICAgVHJhbnNpdGlv
blNldHRpbmdzLnByb3RvdHlwZS5vZmZzZXQgPSAwOw0KICAgIC8qKg0KICAgICAqIENhbGxiYWNr
IGZ1bmN0aW9uIHdoaWNoIG11c3QgYmUgY2FsbGVkIGFmdGVyIGFuaW1hdGlvbi4NCiAgICAgKg0K
ICAgICAqIEBtZW1iZXIgVHJhbnNpdGlvblNldHRpbmdzDQogICAgICovDQogICAgVHJhbnNpdGlv
blNldHRpbmdzLnByb3RvdHlwZS5jYWxsYmFjayA9IG51bGw7DQogICAgLyoqDQogICAgICogZW5k
IG9mIFRyYW5zaXRpb25TZXR0aW5ncyBjbGFzcw0KICAgICAqLw0KICAgIHB1Yi5UcmFuc2l0aW9u
U2V0dGluZ3MgPSBUcmFuc2l0aW9uU2V0dGluZ3M7DQoNCiAgICAvKioNCiAgICAgKiBUcmFuc2l0
aW9uIGNsYXNzIGlzIGEgYmFzZSBjbGFzcyBvZiBhbGwgdHJhbnNpdGlvbnMuDQogICAgICoNCiAg
ICAgKiBJbXBvcnRhbnQ6IHNldHRpbmdzLmNhbGxiYWNrKCkgKEBzZWUgVHJhbnNpdGlvblNldHRp
bmdzKSBoYXZlIHRvIGJlIGNhbGxlZCBhdCB0aGUgZW5kIG9mIGV4ZWN1dGlvbiB0aGUgcGVyZm9y
bSgpIG1ldGhvZC4NCiAgICAgKg0KICAgICAqIEBjb25zdHJ1Y3Rvcg0KICAgICAqLw0KICAgIGZ1
bmN0aW9uIFRyYW5zaXRpb24oKSB7fQ0KICAgIFRyYW5zaXRpb24ucHJvdG90eXBlID0gbmV3IFRy
YW5zaXRpb24oKTsNCiAgICAvKioNCiAgICAgKiBJbml0aWFsaXplcyBhIHRyYW5zaXRpb24gd2l0
aCBnaXZlbiBzZXR0aW5ncyAoQHNlZSBUcmFuc2l0aW9uU2V0dGluZ3MpLg0KICAgICAqIA0KICAg
ICAqIEBtZW1iZXIgVHJhbnNpdGlvbg0KICAgICAqIEBwYXJhbSB7VHJhbnNpdGlvblNldHRpbmdz
fSBzZXR0aW5ncyAgdHJhbnNpdGlvbiBzZXR0aW5ncw0KICAgICAqLw0KICAgIC8qIGVzbGludC1k
aXNhYmxlICovDQogICAgVHJhbnNpdGlvbi5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKHNldHRp
bmdzKSB7DQogICAgICAgIC8vaW1wbGVtZW50YXRpb24gdXNpbmcgc2V0dGluZ3MNCiAgICB9Ow0K
ICAgIC8qIGVzbGludC1lbmFibGUgKi8NCiAgICAvKioNCiAgICAgKiBSZXR1cm5zIGEgZmFjdG9y
IGFzc29jaWF0ZWQgd2l0aCBzZXR0aW5ncy5vZmZzZXQgKEBzZWUgVHJhbnNpdGlvblNldHRpbmdz
KSwgd2hpY2gNCiAgICAgKiBjYW4gYmUgdXNlZnVsbCBmb3Igc29tZSBhbmltYXRpb25zLg0KICAg
ICAqDQogICAgICogQG1lbWJlciBUcmFuc2l0aW9uDQogICAgICogQHBhcmFtIHtUcmFuc2l0aW9u
U2V0dGluZ3N9IHNldHRpbmdzICB0cmFuc2l0aW9uIHNldHRpbmdzDQogICAgICogQHJldHVybiBU
aGUgZmFjdG9yOyAxIGlmIG9mZnNldCBpcyBoaWdoZXIgdGhhbiAwLCAtMSBvdGhlcndpc2UNCiAg
ICAgKiBAdHlwZSBOdW1iZXINCiAgICAgKi8NCiAgICBUcmFuc2l0aW9uLnByb3RvdHlwZS5mYWN0
b3IgPSBmdW5jdGlvbihzZXR0aW5ncykgew0KICAgICAgICByZXR1cm4gKHNldHRpbmdzLm9mZnNl
dCA+IDApID8gMSA6IC0xOw0KICAgIH07DQogICAgLyoqDQogICAgICogVGhpcyBtZXRob2QgaXMg
Y2FsbGVkIHVzZWQgYnkgY2Fyb3VzZWxzIHRvIGNoYW5nZSBzbGlkZXMuDQogICAgICoNCiAgICAg
KiBJbXBvcnRhbnQ6IHNldHRpbmdzLmNhbGxiYWNrKCkgKEBzZWUgVHJhbnNpdGlvblNldHRpbmdz
KSBoYXZlIHRvIGJlIGNhbGxlZCBhdCB0aGUgZW5kIG9mIHRoaXMgbWV0aG9kIGV4ZWN1dGlvbi4N
CiAgICAgKg0KICAgICAqIEBtZW1iZXIgVHJhbnNpdGlvbg0KICAgICAqIEBwYXJhbSB7VHJhbnNp
dGlvblNldHRpbmdzfSBzZXR0aW5ncyAgdHJhbnNpdGlvbiBzZXR0aW5ncw0KICAgICAqLw0KICAg
IFRyYW5zaXRpb24ucHJvdG90eXBlLnBlcmZvcm0gPSBmdW5jdGlvbihzZXR0aW5ncykgew0KICAg
ICAgICBzZXR0aW5ncy5jYWxsYmFjaygpOw0KICAgIH07DQogICAgLyoqDQogICAgICogRW5kIG9m
IFRyYW5zaXRpb24gY2xhc3MNCiAgICAgKi8NCiAgICBwdWIuVHJhbnNpdGlvbiA9IFRyYW5zaXRp
b247DQoNCiAgICAvKioNCiAgICAgKiBCYXNpY1RyYW5zaXRpb24gY2xhc3MgY2hhbmdlcyBzbGlk
ZXMgd2l0aG91dCBhbnkgYW5pbWF0aW9uLg0KICAgICAqIERvIG5vdCByZW1vdmUgdGhpcyBjbGFz
cywgYmVjYW91c2UgY2Fyb3VzZWxzIHdpbGwgdXNlIGl0IGJ5IGRlZmF1bHQsDQogICAgICogaWYg
cmVxdWVzdGVkIHRyYW5zaXRpb24gY2Fubm90IGJlIGZvdW5kLg0KICAgICAqIEBjb25zdHJ1Y3Rv
cg0KICAgICAqLw0KICAgIGZ1bmN0aW9uIEJhc2ljVHJhbnNpdGlvbigpIHt9DQogICAgQmFzaWNU
cmFuc2l0aW9uLnByb3RvdHlwZSA9IG5ldyBUcmFuc2l0aW9uKCk7DQogICAgQmFzaWNUcmFuc2l0
aW9uLmNvbnN0cnVjdG9yID0gQmFzaWNUcmFuc2l0aW9uOw0KICAgIC8qKg0KICAgICAqIEBtZW1i
ZXIgQmFzaWNUcmFuc2l0aW9uDQogICAgICovDQogICAgQmFzaWNUcmFuc2l0aW9uLnByb3RvdHlw
ZS5wZXJmb3JtID0gZnVuY3Rpb24oc2V0dGluZ3MpIHsNCiAgICAgICAgc2V0dGluZ3MuJGN1cnJl
bnRTbGlkZS5oaWRlKCk7DQogICAgICAgIHNldHRpbmdzLiRuZXh0U2xpZGUuc2hvdygpOw0KDQog
ICAgICAgIHNldHRpbmdzLmNhbGxiYWNrKCk7DQogICAgfTsNCiAgICAvKioNCiAgICAgKiBFbmQg
b2YgQmFzaWNUcmFuc2l0aW9uIGNsYXNzDQogICAgICovDQogICAgcHViLkJhc2ljVHJhbnNpdGlv
biA9IEJhc2ljVHJhbnNpdGlvbjsNCg0KICAgIC8qKg0KICAgICAqIEZhZGVJblRyYW5zaXRpb24g
Y2xhc3MgY2hhbmdlcyBzbGlkZXMgYnkgZmFkaW5nIGluIG5ldyBzbGlkZS4NCiAgICAgKiBUaGlz
IGNsYXNzIGNhbiBiZSByZW1vdmVkIGlmIGVmZmVjdCBpcyBub3QgdXNlZC4NCiAgICAgKiBAY29u
c3RydWN0b3INCiAgICAgKi8NCiAgICBmdW5jdGlvbiBGYWRlSW5UcmFuc2l0aW9uKCkge30NCiAg
ICBGYWRlSW5UcmFuc2l0aW9uLnByb3RvdHlwZSA9IG5ldyBUcmFuc2l0aW9uKCk7DQogICAgRmFk
ZUluVHJhbnNpdGlvbi5jb25zdHJ1Y3RvciA9IEZhZGVJblRyYW5zaXRpb247DQogICAgLyoqDQog
ICAgICogQG1lbWJlciBGYWRlSW5UcmFuc2l0aW9uDQogICAgICovDQogICAgRmFkZUluVHJhbnNp
dGlvbi5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAvKnNldHRpbmdzLiRz
bGlkZXMuY3NzKHsNCiAgICAgICAgICdwb3NpdGlvbic6ICdhYnNvbHV0ZScsDQogICAgICAgICAn
dG9wJzogJzBweCcsDQogICAgICAgICAnbGVmdCc6ICcwcHgnDQogICAgICAgICB9KTsqLw0KICAg
IH07DQogICAgLyoqDQogICAgICogQG1lbWJlciBGYWRlSW5UcmFuc2l0aW9uDQogICAgICovDQog
ICAgRmFkZUluVHJhbnNpdGlvbi5wcm90b3R5cGUucGVyZm9ybSA9IGZ1bmN0aW9uKHNldHRpbmdz
KSB7DQogICAgICAgIHZhciB6SW5kZXhBdHRyaWIgPSAnei1pbmRleCcsDQogICAgICAgICAgICAk
cGFyZW50ID0gc2V0dGluZ3MuJHNsaWRlcy5wYXJlbnQoKSwNCiAgICAgICAgICAgICRuZXh0U2xp
ZGUgPSBzZXR0aW5ncy4kbmV4dFNsaWRlOw0KDQogICAgICAgICRwYXJlbnQuY3NzKHpJbmRleEF0
dHJpYiwgMCk7DQogICAgICAgICRuZXh0U2xpZGUuY3NzKHpJbmRleEF0dHJpYiwgMSk7DQogICAg
ICAgIHNldHRpbmdzLiRzbGlkZXMuY3NzKHsNCiAgICAgICAgICAgICdwb3NpdGlvbic6ICdyZWxh
dGl2ZScNCiAgICAgICAgfSk7DQoNCiAgICAgICAgc2V0dGluZ3MuJG5leHRTbGlkZS5jc3Moew0K
ICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJ2Fic29sdXRlJywNCiAgICAgICAgICAgICd0b3AnOiAn
NTAlJywNCiAgICAgICAgICAgICdsZWZ0JzogJzUwJScsDQogICAgICAgICAgICAndHJhbnNmb3Jt
JzogJ3RyYW5zbGF0ZSgtNTAlLC01MCUpJw0KICAgICAgICB9KTsNCg0KDQogICAgICAgICRuZXh0
U2xpZGUuZmFkZUluKGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgc2V0dGluZ3MuJGN1cnJlbnRT
bGlkZS5oaWRlKCk7DQoNCiAgICAgICAgICAgIHNldHRpbmdzLiRuZXh0U2xpZGUuY3NzKHsNCiAg
ICAgICAgICAgICAgICAncG9zaXRpb24nOiAncmVsYXRpdmUnLA0KICAgICAgICAgICAgICAgICds
ZWZ0JzogJzAnLA0KICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiAnbm9uZScNCiAgICAgICAg
ICAgIH0pOw0KDQogICAgICAgICAgICAkbmV4dFNsaWRlLmNzcyh6SW5kZXhBdHRyaWIsICcnKTsN
CiAgICAgICAgICAgICRwYXJlbnQuY3NzKHpJbmRleEF0dHJpYiwgJycpOw0KDQogICAgICAgICAg
ICBzZXR0aW5ncy5jYWxsYmFjaygpOw0KICAgICAgICB9KTsNCiAgICB9Ow0KICAgIC8qKg0KICAg
ICAqIEVuZCBvZiBGYWRlSW5UcmFuc2l0aW9uIGNsYXNzDQogICAgICovDQogICAgcHViLkZhZGVJ
blRyYW5zaXRpb24gPSBGYWRlSW5UcmFuc2l0aW9uOw0KDQogICAgLyoqDQogICAgICogU2xpZGVI
b3Jpem9udGFsbHlUcmFuc2l0aW9uIGNsYXNzIGNoYW5nZXMgc2xpZGVzIGJ5IHNsaWRpbmcgdGhl
bSBob3Jpem9udGFsbHkuDQogICAgICogVGhpcyBjbGFzcyBjYW4gYmUgcmVtb3ZlZCBpZiBlZmZl
Y3QgaXMgbm90IHVzZWQuDQogICAgICogSWYgb2Zmc2V0IChkaWZmZXJlbmNlIGJldHdlZW4gaW5k
ZXggb2YgY3VycmVudGx5IGRpc3BsYXllZCBzbGlkZSBhbmQgaW5kZXggb2Ygc2xpZGUgdGhhdCB3
aWxsIGJlIHNob3duKQ0KICAgICAqIGlzIGdyZWF0ZXIgdGhhbiAwLCBzbGlkZXMgYXJlIHNsaWRp
bmcgdG8gdGhlIGxlZnQuIE90aGVyd2lzZSAob2Zmc2V0IGlzIGxvd2VyIHRoYW4gMCksIHNsaWRl
cyBhcmUgc2xpZGluZw0KICAgICAqIHRvIHRoZSBsZWZ0Lg0KICAgICAqIFdoZW4gc2xpZGUgY2hh
bmdlIGlzIHJhaXNlZCBhdXRvbWF0aWNhbGx5LCBzbGlkZXMgYXJlIGFsd2F5cyBzbGlkaW5nIHRv
IHJpZ2h0IChvZmZzZXQgPT0gMSkuDQogICAgICogSWYgdXNlciByYWlzZXMgc2xpZGVzIGNoYW5n
ZSwgc2xpZGVzIGFyZSBzbGlkaW5nOg0KICAgICAqIC0gdG8gbGVmdCwgaWYgb2Zmc2V0IGlzIGdy
ZWF0ZXIgdGhhbiAwIChzbGlkZSB3aXRoIGhpZ2hlciBpbmRleCB3aWxsIGJlIHNob3duIG9yIHVz
ZXIgY2xpY2tzIG9uICduZXh0JyBuYXZpZ2F0aW9uIGl0ZW0pLA0KICAgICAqIC0gdG8gcmlnaHQs
IGlmIG9mZnNldCBpcyBsb3dlciB0aGFuIDAgKHNsaWRlIHdpdGggbG93ZXIgaW5kZXggd2lsbCBi
ZSBzaG93biBvciB1c2VyIGNsaWNrcyBvbiAncHJldicgbmF2aWdhdGlvbiBpdGVtKS4NCiAgICAg
KiBAY29uc3RydWN0b3INCiAgICAgKi8NCiAgICBmdW5jdGlvbiBTbGlkZUhvcml6b250YWxseVRy
YW5zaXRpb24oKSB7fQ0KICAgIFNsaWRlSG9yaXpvbnRhbGx5VHJhbnNpdGlvbi5wcm90b3R5cGUg
PSBuZXcgVHJhbnNpdGlvbigpOw0KICAgIFNsaWRlSG9yaXpvbnRhbGx5VHJhbnNpdGlvbi5jb25z
dHJ1Y3RvciA9IFNsaWRlSG9yaXpvbnRhbGx5VHJhbnNpdGlvbjsNCiAgICAvKioNCiAgICAgKiBA
bWVtYmVyIFNsaWRlSG9yaXpvbnRhbGx5VHJhbnNpdGlvbg0KICAgICAqLw0KICAgIFNsaWRlSG9y
aXpvbnRhbGx5VHJhbnNpdGlvbi5wcm90b3R5cGUub25BbmltYXRpb25Db21wbGV0ZSA9IGZ1bmN0
aW9uKHNldHRpbmdzLCAkcGFyZW50KSB7DQogICAgICAgIHNldHRpbmdzLiRjdXJyZW50U2xpZGUu
aGlkZSgpOw0KICAgICAgICBzZXR0aW5ncy4kbmV4dFNsaWRlLmNzcyh7DQogICAgICAgICAgICAn
cG9zaXRpb24nOiAnJywNCiAgICAgICAgICAgICd0b3AnOiAnJywNCiAgICAgICAgICAgICdsZWZ0
JzogJycNCiAgICAgICAgfSk7DQoNCiAgICAgICAgJHBhcmVudC5jc3MoJ21hcmdpbi1sZWZ0Jywg
JycpOw0KDQogICAgICAgIHNldHRpbmdzLmNhbGxiYWNrKCk7DQogICAgfTsNCiAgICAvKioNCiAg
ICAgKiBAbWVtYmVyIFNsaWRlSG9yaXpvbnRhbGx5VHJhbnNpdGlvbg0KICAgICAqLw0KICAgIFNs
aWRlSG9yaXpvbnRhbGx5VHJhbnNpdGlvbi5wcm90b3R5cGUucGVyZm9ybSA9IGZ1bmN0aW9uKHNl
dHRpbmdzKSB7DQogICAgICAgIHZhciBmYWN0b3IgPSB0aGlzLmZhY3RvcihzZXR0aW5ncyksDQog
ICAgICAgICAgICBvbkFuaW1hdGlvbkNvbXBsZXRlID0gdGhpcy5vbkFuaW1hdGlvbkNvbXBsZXRl
LA0KICAgICAgICAgICAgd2lkdGggPSBzZXR0aW5ncy4kY3VycmVudFNsaWRlLndpZHRoKCksDQog
ICAgICAgICAgICAkcGFyZW50ID0gc2V0dGluZ3MuJHNsaWRlcy5wYXJlbnQoKTsNCg0KICAgICAg
ICBzZXR0aW5ncy4kbmV4dFNsaWRlLmNzcyh7DQogICAgICAgICAgICAncG9zaXRpb24nOiAnYWJz
b2x1dGUnLA0KICAgICAgICAgICAgJ3RvcCc6ICcwcHgnLA0KICAgICAgICAgICAgJ2xlZnQnOiBm
YWN0b3IgKiB3aWR0aA0KICAgICAgICB9KTsNCiAgICAgICAgc2V0dGluZ3MuJG5leHRTbGlkZS5z
aG93KCk7DQoNCiAgICAgICAgJHBhcmVudC5hbmltYXRlKHsNCiAgICAgICAgICAgICdtYXJnaW4t
bGVmdCc6IC1mYWN0b3IgKiB3aWR0aA0KICAgICAgICB9LCBmdW5jdGlvbigpIHsNCiAgICAgICAg
ICAgIG9uQW5pbWF0aW9uQ29tcGxldGUoc2V0dGluZ3MsICRwYXJlbnQpOw0KICAgICAgICB9KTsN
CiAgICB9Ow0KICAgIC8qKg0KICAgICAqIEVuZCBvZiBTbGlkZUhvcml6b250YWxseVRyYW5zaXRp
b24gY2xhc3MNCiAgICAgKi8NCiAgICBwdWIuU2xpZGVIb3Jpem9udGFsbHlUcmFuc2l0aW9uID0g
U2xpZGVIb3Jpem9udGFsbHlUcmFuc2l0aW9uOw0KDQogICAgLyoqDQogICAgICogU2xpZGVWZXJ0
aWNhbGx5VHJhbnNpdGlvbiBjbGFzcyBjaGFuZ2VzIHNsaWRlcyBieSBzbGlkaW5nIHRoZW0gdmVy
dGljYWxseS4NCiAgICAgKiBUaGlzIGNsYXNzIGNhbiBiZSByZW1vdmVkIGlmIHRoaXMgZWZmZWN0
IGlzIG5vdCB1c2VkLg0KICAgICAqIElmIG9mZnNldCAoZGlmZmVyZW5jZSBiZXR3ZWVuIGluZGV4
IG9mIGN1cnJlbnRseSBkaXNwbGF5ZWQgc2xpZGUgYW5kIGluZGV4IG9mIHNsaWRlIHRoYXQgd2ls
bCBiZSBzaG93bikNCiAgICAgKiBpcyBncmVhdGVyIHRoYW4gMCwgc2xpZGVzIGFyZSBzbGlkaW5n
IGZyb20gdXAgdG8gZG93bi4gT3RoZXJ3aXNlIChvZmZzZXQgaXMgbG93ZXIgdGhhbiAwKSwgc2xp
ZGVzIGFyZSBzbGlkaW5nDQogICAgICogZnJvbSBkb3duIHRvIHVwLg0KICAgICAqIFdoZW4gc2xp
ZGUgY2hhbmdlIGlzIHJhaXNlZCBhdXRvbWF0aWNhbGx5LCBzbGlkZXMgYXJlIGFsd2F5cyBzbGlk
aW5nIGZyb20gdXAgdG8gZG93biAob2Zmc2V0ID09IDEpLg0KICAgICAqIElmIHVzZXIgcmFpc2Vz
IHNsaWRlcyBjaGFuZ2UsIHNsaWRlcyBhcmUgc2xpZGluZzoNCiAgICAgKiAtIGZyb20gdXAgdG8g
ZG93biwgaWYgb2Zmc2V0IGlzIGdyZWF0ZXIgdGhhbiAwIChzbGlkZSB3aXRoIGhpZ2hlciBpbmRl
eCB3aWxsIGJlIHNob3duIG9yIHVzZXIgY2xpY2tzIG9uICduZXh0JyBuYXZpZ2F0aW9uIGl0ZW0p
LA0KICAgICAqIC0gZnJvbSBkb3duIHRvIHVwLCBpZiBvZmZzZXQgaXMgbG93ZXIgdGhhbiAwIChz
bGlkZSB3aXRoIGxvd2VyIGluZGV4IHdpbGwgYmUgc2hvd24gb3IgdXNlciBjbGlja3Mgb24gJ3By
ZXYnIG5hdmlnYXRpb24gaXRlbSkuDQogICAgICogQGNvbnN0cnVjdG9yDQogICAgICovDQogICAg
ZnVuY3Rpb24gU2xpZGVWZXJ0aWNhbGx5VHJhbnNpdGlvbigpIHt9DQogICAgU2xpZGVWZXJ0aWNh
bGx5VHJhbnNpdGlvbi5wcm90b3R5cGUgPSBuZXcgVHJhbnNpdGlvbigpOw0KICAgIFNsaWRlVmVy
dGljYWxseVRyYW5zaXRpb24uY29uc3RydWN0b3IgPSBTbGlkZVZlcnRpY2FsbHlUcmFuc2l0aW9u
Ow0KICAgIC8qKg0KICAgICAqIEBtZW1iZXIgU2xpZGVWZXJ0aWNhbGx5VHJhbnNpdGlvbg0KICAg
ICAqLw0KICAgIFNsaWRlVmVydGljYWxseVRyYW5zaXRpb24ucHJvdG90eXBlLm9uQW5pbWF0aW9u
Q29tcGxldGUgPSBmdW5jdGlvbihzZXR0aW5ncywgJHBhcmVudCkgew0KICAgICAgICBzZXR0aW5n
cy4kY3VycmVudFNsaWRlLmhpZGUoKTsNCiAgICAgICAgc2V0dGluZ3MuJG5leHRTbGlkZS5jc3Mo
ew0KICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJycsDQogICAgICAgICAgICAndG9wJzogJycsDQog
ICAgICAgICAgICAnbGVmdCc6ICcnDQogICAgICAgIH0pOw0KDQogICAgICAgICRwYXJlbnQuY3Nz
KCdtYXJnaW4tdG9wJywgJycpOw0KDQogICAgICAgIHNldHRpbmdzLmNhbGxiYWNrKCk7DQogICAg
fTsNCiAgICAvKioNCiAgICAgKiBAbWVtYmVyIFNsaWRlVmVydGljYWxseVRyYW5zaXRpb24NCiAg
ICAgKi8NCiAgICBTbGlkZVZlcnRpY2FsbHlUcmFuc2l0aW9uLnByb3RvdHlwZS5wZXJmb3JtID0g
ZnVuY3Rpb24oc2V0dGluZ3MpIHsNCiAgICAgICAgdmFyIGZhY3RvciA9IHRoaXMuZmFjdG9yKHNl
dHRpbmdzKSwNCiAgICAgICAgICAgIG9uQW5pbWF0aW9uQ29tcGxldGUgPSB0aGlzLm9uQW5pbWF0
aW9uQ29tcGxldGUsDQogICAgICAgICAgICBoZWlnaHQgPSBzZXR0aW5ncy4kY3VycmVudFNsaWRl
LmhlaWdodCgpLA0KICAgICAgICAgICAgJHBhcmVudCA9IHNldHRpbmdzLiRzbGlkZXMucGFyZW50
KCk7DQoNCiAgICAgICAgc2V0dGluZ3MuJG5leHRTbGlkZS5jc3Moew0KICAgICAgICAgICAgJ3Bv
c2l0aW9uJzogJ2Fic29sdXRlJywNCiAgICAgICAgICAgICd0b3AnOiAtZmFjdG9yICogaGVpZ2h0
LA0KICAgICAgICAgICAgJ2xlZnQnOiAnMHB4Jw0KICAgICAgICB9KTsNCiAgICAgICAgc2V0dGlu
Z3MuJG5leHRTbGlkZS5zaG93KCk7DQoNCiAgICAgICAgJHBhcmVudC5hbmltYXRlKHsNCiAgICAg
ICAgICAgICdtYXJnaW4tdG9wJzogZmFjdG9yICogaGVpZ2h0DQogICAgICAgIH0sIGZ1bmN0aW9u
KCkgew0KICAgICAgICAgICAgb25BbmltYXRpb25Db21wbGV0ZShzZXR0aW5ncywgJHBhcmVudCk7
DQogICAgICAgIH0pOw0KICAgIH07DQogICAgLyoqDQogICAgICogU2xpZGVWZXJ0aWNhbGx5VHJh
bnNpdGlvbiBjbGFzcw0KICAgICAqLw0KICAgIHB1Yi5TbGlkZVZlcnRpY2FsbHlUcmFuc2l0aW9u
ID0gU2xpZGVWZXJ0aWNhbGx5VHJhbnNpdGlvbjsNCg0KICAgIHJldHVybiBwdWI7DQp9KGpRdWVy
eSkpOw0KLyoqDQogKiBlbmQgb2YgWEEuY29tcG9uZW50LmNhcm91c2Vscy5UcmFuc2l0aW9ucyBt
b2R1bGUuDQogKi8NCg0KLyoqDQogKiBYQUNvbnRleHQNCiAqDQogKiBYQS5jb21wb25lbnQuY2Fy
b3VzZWxzLkluZGljYXRvclZpZXdzIG1vZHVsZS4NCiAqDQogKiBFeHBvc2VzIFZpZXcgY2xhc3Ms
IHdoaWNoIGlzIGEgYmFzZSBjbGFzcyBvZiBhbGwgJ3RpbWUgaW5kaWNhdG9yJyB2aWV3cyB1c2Vk
IGJ5IGNhcm91c2VscyAoQHNlZSBYQS5jb21wb25lbnQuY2Fyb3VzZWxzLCBAc2VlIFZpZXcpLg0K
ICogQWxzbyBleHBvc2VzIGltcGxlbWVudGF0aW9uIG9mIHRoZXNlICd0aW1lIGluZGljYXRvcicg
dmlld3M6DQogKiAtIFByb2dyZXNzQmFyVmlldyAtIHNob3dzIHRoZSBwcm9ncmVzcyBvZiB0aW1l
LCB0aGF0IGxvb2tzIGxpa2UgYSBwcm9ncmVzcyBiYXIsDQogKiAtIFJvdGF0b3JWaWV3IC0gc2hv
d3MgdGhlIHByb2dyZXNzIG9mIHRpbWUgd2l0aCB0aGUgZmlsbGluZyB1cCByaW5nLg0KICogQ2Fy
b3VzZWwgdGFrZXMgdGhlIGNsYXNzIGNvbnN0cnVjdG9yIGJ5IG5hbWUgZnJvbSB0aGlzIG1vZHVs
ZSAoaXQgaXMgZ2l2ZW4gaW4gb3B0aW9ucyBvYmplY3Qgb2YgY2Fyb3VzZWw7IEBzZWUgWEEuY29t
cG9uZW50LmNhcm91c2VscykuDQogKiBJZiB0aGVyZSBpcyBhIG5lZWQgdG8gaW1wbGVtZW50IHRo
ZSBuZXcgJ3RpbWUgaW5kaWNhdG9yJyB2aWV3LCBjcmVhdGUgYSBuZXcgY2xhc3MsDQogKiBieSBp
bmhlcml0aW5nIGZyb20gVmlldyBjbGFzcyBhbmQgYWRkIGl0IHRvIHRoaXMgbW9kdWxlLiBEdXJp
bmcgaW1wbGVtZW50YXRpb24gb2YgYSBuZXcgJ3RpbWUgaW5kaWNhdG9yJw0KICogdmlldyB0aGUg
WEEuY29tcG9uZW50LmNhcm91c2Vscy5JbmRpY2F0b3JzVmlldy5Ub29scyBuYW1lc3BhY2UgbWF5
IGJlIHVzZWZ1bGwuIEl0IGNvbnRhaW5zOg0KICogLSBpc0Nzc1N1cHBvcnRlZChwcm9wcykgZnVu
Y3Rpb24sIHdoaWNoIGNoZWNrcyBpZiBhbnkgb2YgQ1NTIHByb3BlcnRpZXMgaXMgc3VwcG9ydGVk
IChwcm9wcyAtIGFycmF5IG9mIHByb3BlcnRpZXMpLA0KICogLSBpc1RyYW5zZm9ybVN1cHBvcnRl
ZCgpIGZ1bmN0aW9uLCB3aGljaCBjaGVja3MgaWYgQ1NTIDMgJ3RyYW5zZm9ybScgaXMgc3VwcG9y
dGVkLg0KICoNCiAqIEV4YW1wbGUgdmlldyBpbXBsZW1lbnRhdGlvbiAob3BhY2l0eSBpbmNyZWFz
ZXMgd2l0aCBhIHByb2dyZXNzIG9mIHRoZSB0aW1lKToNCiAqIChmdW5jdGlvbigpIHsNCiAqICAg
ICB2YXIgVmlldyA9IFhBLmNvbXBvbmVudC5jYXJvdXNlbHMuSW5kaWNhdG9yVmlld3MuVmlldzsN
CiAqDQogKiAgICAgZnVuY3Rpb24gU2FtcGxlVmlldyAoc2VsZWN0b3IsIG9wdGlvbnMpIHsNCiAq
ICAgICAgICAgLy9iYXNlIGNvbnN0cnVjdG9yIGhhdmUgdG8gYmUgY2FsbGVkDQogKiAgICAgICAg
IFZpZXcuY2FsbCh0aGlzLCBzZWxlY3Rvcik7DQogKiAgICAgfQ0KICoNCiAqICAgICBTYW1wbGVW
aWV3LnByb3RvdHlwZSA9IG5ldyBWaWV3KCk7DQogKiAgICAgU2FtcGxlVmlldy5jb25zdHJ1Y3Rv
ciA9IFNhbXBsZVZpZXc7DQogKg0KICogICAgIFNhbXBsZVZpZXcucHJvdG90eXBlLmluaXQgPSBm
dW5jdGlvbiAodGltZW91dCkgew0KICogICAgICAgICAvL2Jhc2UgbWV0aG9kIGhhdmUgdG8gYmUg
Y2FsbGVkDQogKiAgICAgICAgIFZpZXcucHJvdG90eXBlLmluaXQuY2FsbCh0aGlzLCB0aW1lb3V0
KTsNCiAqDQogKiAgICAgICAgIC8vaW5pdGlhbGl6YXRpb24gY29kZSAtIG5vdCBuZWVkZWQgaW4g
dGhpcyBleGFtcGxlDQogKiAgICAgfTsNCiAqDQogKiAgICAgU2FtcGxlVmlldy5wcm90b3R5cGUu
cmVzZXQgPSBmdW5jdGlvbiAoKSB7DQogKiAgICAgICAgIC8vYmFzZSBtZXRob2QgaGF2ZSB0byBi
ZSBjYWxsZWQNCiAqICAgICAgICAgVmlldy5wcm90b3R5cGUucmVzZXQuY2FsbCh0aGlzKTsNCiAq
DQogKiAgICAgICAgIC8vcmVzZXRpbmcgJ3RpbWUgaW5kaWNhdG9yJyB2aWV3DQogKiAgICAgICAg
IHRoaXMuJGluZGljYXRvci5zdG9wKHRydWUpOw0KICogICAgICAgICB0aGlzLiRpbmRpY2F0b3Iu
Y3NzKCdvcGFjaXR5JywgMCk7DQogKiAgICAgfTsNCiAqDQogKiAgICAgU2FtcGxlVmlldy5wcm90
b3R5cGUucGF1c2UgPSBmdW5jdGlvbiAoKSB7DQogKiAgICAgICAgIC8vc3RvcGluZyAndGltZSBp
bmRpY2F0b3InIHZpZXcgYW5pbWF0aW9uDQogKiAgICAgICAgIHRoaXMuJGluZGljYXRvci5zdG9w
KHRydWUpOw0KICogICAgIH07DQogKg0KICogICAgIFNhbXBsZVZpZXcucHJvdG90eXBlLnBsYXkg
PSBmdW5jdGlvbiAoKSB7DQogKiAgICAgICAgIC8vc3RhcnRpbmcvcmVzdW1pbmcgJ3RpbWUgaW5k
aWNhdG9yJyB2aWV3IGFuaW1hdGlvbg0KICogICAgICAgICB0aGlzLiRpbmRpY2F0b3IuYW5pbWF0
ZSh7DQogKiAgICAgICAgICAgICAnb3BhY2l0eSc6IDENCiAqICAgICAgICAgfSwgdGhpcy50aW1l
b3V0IC0gdGhpcy50aW1lRWxhcHNlZCwgJ2xpbmVhcicpOw0KICogICAgIH07DQogKg0KICogICAg
IFhBLmNvbXBvbmVudC5jYXJvdXNlbHMuSW5kaWNhdG9yVmlld3MuU2FtcGxlVmlldyA9IFNhbXBs
ZVZpZXc7DQogKiB9KCkpOw0KICoNCiAqLw0KWEEuY29tcG9uZW50LmNhcm91c2Vscy5JbmRpY2F0
b3JWaWV3cyA9IChmdW5jdGlvbigkKSB7DQogICAgdmFyIHB1YiA9IHt9LA0KICAgICAgICBzdXBw
b3J0RWxlbWVudFN0eWxlID0gbnVsbDsNCg0KICAgIC8qKg0KICAgICAqIENoZWNrcyBpZiBhbnkg
b2YgQ1NTIHByb3BlcnRpZXMgaXMgc3VwcG9ydGVkLg0KICAgICAqDQogICAgICogQHBhcmFtIHtB
cnJheX0gcHJvcHMgICAgIGFycmF5IG9mIHByb3BlcnRpZXMgdG8gYmUgY2hlY2tlZA0KICAgICAq
IEByZXR1cm4gdHJ1ZSBpZiBhbnkgb2YgQ1NTIHByb3BlcnRpZXMgaXMgc3VwcG9ydGVkLCBmYWxz
ZSBvdGhlcndpc2UNCiAgICAgKiBAdHlwZSBCb29sZWFuDQogICAgICovDQogICAgZnVuY3Rpb24g
aXNDc3NTdXBwb3J0ZWQocHJvcHMpIHsNCiAgICAgICAgdmFyIGksDQogICAgICAgICAgICBpc1N1
cHBvcnRlZCA9IGZhbHNlOw0KDQogICAgICAgIGlmIChzdXBwb3J0RWxlbWVudFN0eWxlID09PSBu
dWxsKSB7DQogICAgICAgICAgICBzdXBwb3J0RWxlbWVudFN0eWxlID0gZG9jdW1lbnQuY3JlYXRl
RWxlbWVudCgnc3VwcG9ydEVsZW1lbnQnKS5zdHlsZTsNCiAgICAgICAgfQ0KDQogICAgICAgIGZv
ciAoaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgaWYgKHN1cHBv
cnRFbGVtZW50U3R5bGVbcHJvcHNbaV1dICE9PSB1bmRlZmluZWQpIHsNCiAgICAgICAgICAgICAg
ICBpc1N1cHBvcnRlZCA9IHRydWU7DQogICAgICAgICAgICAgICAgYnJlYWs7DQogICAgICAgICAg
ICB9DQogICAgICAgIH0NCg0KICAgICAgICByZXR1cm4gaXNTdXBwb3J0ZWQ7DQogICAgfQ0KDQog
ICAgLyoqDQogICAgICogQ2hlY2tzIGlmIENTUyAzICd0cmFuc2Zvcm0nIGlzIHN1cHBvcnRlZC4N
CiAgICAgKg0KICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBDU1MgMyAndHJhbnNmb3JtJyBpcyBzdXBw
b3J0ZWQsIGZhbHNlIG90aGVyd2lzZQ0KICAgICAqIEB0eXBlIEJvb2xlYW4NCiAgICAgKi8NCiAg
ICBmdW5jdGlvbiBpc1RyYW5zZm9ybVN1cHBvcnRlZCgpIHsNCiAgICAgICAgcmV0dXJuIGlzQ3Nz
U3VwcG9ydGVkKFsndHJhbnNmb3JtUHJvcGVydHknLCAnV2Via2l0VHJhbnNmb3JtJywgJ01velRy
YW5zZm9ybScsICdPVHJhbnNmb3JtJywgJ21zVHJhbnNmb3JtJ10pOw0KICAgIH0NCg0KICAgIC8q
Kg0KICAgICAqIFhBLmNvbXBvbmVudC5jYXJvdXNlbHMuSW5kaWNhdG9yVmlld3MuVG9vbHMgbmFt
ZXNwYWNlDQogICAgICoNCiAgICAgVGhpcyBuYW1lc3BhY2UgY2FuIGJlIHJlbW92ZWQgaWYgUm90
YXRvclZpZXcgY2xhc3MgaXMgbm90IHVzZWQgKEBzZWUgUm90YXRvclZpZXcpDQogICAgICovDQog
ICAgcHViLlRvb2xzID0ge307DQogICAgcHViLlRvb2xzLmlzQ3NzU3VwcG9ydGVkID0gaXNDc3NT
dXBwb3J0ZWQ7DQogICAgcHViLlRvb2xzLmlzVHJhbnNmb3JtU3VwcG9ydGVkID0gaXNUcmFuc2Zv
cm1TdXBwb3J0ZWQ7DQogICAgLyoqDQogICAgICogRW5kIG9mIG5hbWVzcGFjZQ0KICAgICAqLw0K
DQogICAgLyoqDQogICAgICogVmlldyBjbGFzcyBpcyBhIGJhc2UgY2xhc3Mgb2YgYWxsICd0aW1l
IGluZGljYXRvcicgdmlld3MNCiAgICAgKiBAY29uc3RydWN0b3INCiAgICAgKiBAcGFyYW0ge1N0
cmluZ30gc2VsZWN0b3IgYSBzZWxlY3RvciB1c2VkIGZvciBzZWFyY2hpbmcNCiAgICAgKiBAcGFy
YW0ge09iamVjdH0gb3B0aW9ucyAgIFZpZXcgb3B0aW9ucyBvYmplY3QNCiAgICAgKi8NCiAgICAv
KiBlc2xpbnQtZGlzYWJsZSAqLw0KICAgIGZ1bmN0aW9uIFZpZXcoc2VsZWN0b3IsIG9wdGlvbnMp
IHsNCiAgICAgICAgLyoqDQogICAgICAgICAqIEEgalF1ZXJ5IG9iamVjdCBjb250YWluaW5nIGVs
ZW1lbnQsIHdoaWNoIHdpbGwgYmUgYW5pbWF0ZWQgdG8gc2hvdyBwb2dyZXNzIG9mIHRoZSB0aW1l
Lg0KICAgICAgICAgKg0KICAgICAgICAgKiBAbWVtYmVyIFZpZXcNCiAgICAgICAgICovDQoNCiAg
ICAgICAgdGhpcy4kaW5kaWNhdG9yID0gJChzZWxlY3Rvcik7DQogICAgfQ0KICAgIC8qIGVzbGlu
dC1lbmFibGUgKi8NCiAgICAvKioNCiAgICAgKiBJbml0aWFsaXplcyB0aGUgdmlldy4NCiAgICAg
Kg0KICAgICAqIEBtZW1iZXIgVmlld2lvbg0KICAgICAqIEBwYXJhbSB7TnVtYmVyfSB0aW1lb3V0
ICAgYSB0aW1lb3V0IHRvIHRoZSBlbmQgb2Ygd2hvbGUgaW5kaWNhdG9yIGFuaW1hdGlvbg0KICAg
ICAqLw0KICAgIFZpZXcucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbih0aW1lb3V0KSB7DQogICAg
ICAgIHRoaXMudGltZUVsYXBzZWQgPSAwOw0KICAgICAgICB0aGlzLnRpbWVvdXQgPSB0aW1lb3V0
Ow0KICAgIH07DQogICAgLyoqDQogICAgICogUmVzZXRzIHRoZSB2aWV3DQogICAgICoNCiAgICAg
KiBAbWVtYmVyIFZpZXcNCiAgICAgKi8NCiAgICBWaWV3LnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0
aW9uKCkgew0KICAgICAgICB0aGlzLnRpbWVFbGFwc2VkID0gMDsNCiAgICB9Ow0KICAgIC8qKg0K
ICAgICAqIFN0YXJ0cy9SZW5ld3MgdGhlIHZpZXcgYW5pbWF0aW9uLg0KICAgICAqDQogICAgICog
QG1lbWJlciBWaWV3DQogICAgICovDQogICAgVmlldy5wcm90b3R5cGUucGxheSA9IGZ1bmN0aW9u
KCkge307DQogICAgLyoqDQogICAgICogUGF1c2VzIHRoZSB2aWV3IGFuaW1hdGlvbi4NCiAgICAg
Kg0KICAgICAqIEBtZW1iZXIgVmlldw0KICAgICAqLw0KICAgIFZpZXcucHJvdG90eXBlLnBhdXNl
ID0gZnVuY3Rpb24oKSB7fTsNCiAgICAvKioNCiAgICAgKiBVcGRhdGVzIHRoZSB0aW1lIHRoYXQg
ZWxhcHNlZCBzaW5jZSBhbmltYXRpb24gYmVnaW4uDQogICAgICoNCiAgICAgKiBAbWVtYmVyIFZp
ZXcNCiAgICAgKi8NCiAgICBWaWV3LnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbih0aW1lRWxh
cHNlZCkgew0KICAgICAgICB0aGlzLnRpbWVFbGFwc2VkID0gdGltZUVsYXBzZWQ7DQogICAgfTsN
CiAgICAvKioNCiAgICAgKiBlbmQgb2YgVmlldyBjbGFzcw0KICAgICAqLw0KICAgIHB1Yi5WaWV3
ID0gVmlldzsNCg0KICAgIC8qKg0KICAgICAqIFByb2dyZXNzQmFyVmlldyBjbGFzcyBwcm92aWRl
cyBhIGxvZ2ljIGZvciBhbmltYXRlIGEgJ3RpbWUgaW5kaWNhdG9yJywNCiAgICAgKiB0aGF0IGxv
b2tzIGxpa2UgcHJvZ3Jlc3MgYmFyLg0KICAgICAqDQogICAgICogT3B0aW9ucyBvYmplY3Q6DQog
ICAgICogew0KICAgICAqICAgICAnb3BhY2l0eSc6IE51bWJlciB2YWx1ZSAvL2JldHdlZW4gMCBh
bmQgMTsgZGVmYXVsdCBpcyAwLjgNCiAgICAgKiB9DQogICAgICoNCiAgICAgKiBUaGlzIGNsYXNz
IGNhbiBiZSByZW1vdmVkIGlmIHRoaXMga2luZCBvZiB2aWV3IGlzIG5vdCB1c2VkLg0KICAgICAq
DQogICAgICogQGNvbnN0cnVjdG9yDQogICAgICogQHBhcmFtIHtTdHJpbmd9IHNlbGVjdG9yIGEg
c2VsZWN0b3IgdXNlZCBmb3Igc2VhcmNoaW5nDQogICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlv
bnMgICBWaWV3IG9wdGlvbnMgb2JqZWN0DQogICAgICovDQogICAgZnVuY3Rpb24gUHJvZ3Jlc3NC
YXJWaWV3KHNlbGVjdG9yLCBvcHRpb25zKSB7DQogICAgICAgIFZpZXcuY2FsbCh0aGlzLCBzZWxl
Y3Rvcik7DQoNCiAgICAgICAgdmFyIGRlZmF1bHRzID0gew0KICAgICAgICAgICAgJ29wYWNpdHkn
OiAwLjgNCiAgICAgICAgfTsNCg0KICAgICAgICB0aGlzLnNldHRpbmdzID0gJC5leHRlbmQodHJ1
ZSwge30sIGRlZmF1bHRzLCBvcHRpb25zKTsNCg0KICAgICAgICB0aGlzLiRjb250YWluZXIgPSB0
aGlzLiRpbmRpY2F0b3I7DQogICAgICAgIHRoaXMuJGluZGljYXRvciA9IHRoaXMuJGluZGljYXRv
ci5maW5kKCdkaXYnKTsNCiAgICB9DQogICAgUHJvZ3Jlc3NCYXJWaWV3LnByb3RvdHlwZSA9IG5l
dyBWaWV3KCk7DQogICAgUHJvZ3Jlc3NCYXJWaWV3LmNvbnN0cnVjdG9yID0gUHJvZ3Jlc3NCYXJW
aWV3Ow0KICAgIC8qKg0KICAgICAqIEBtZW1iZXIgUHJvZ3Jlc3NCYXJWaWV3DQogICAgICovDQog
ICAgUHJvZ3Jlc3NCYXJWaWV3LnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24odGltZW91dCkgew0K
ICAgICAgICBWaWV3LnByb3RvdHlwZS5pbml0LmNhbGwodGhpcywgdGltZW91dCk7DQoNCiAgICAg
ICAgdmFyIG9wYWNpdHkgPSB0aGlzLnNldHRpbmdzLm9wYWNpdHk7DQogICAgICAgIHRoaXMuJGNv
bnRhaW5lci5jc3MoJ29wYWNpdHknLCBvcGFjaXR5KTsNCiAgICAgICAgdGhpcy4kaW5kaWNhdG9y
LmNzcygnb3BhY2l0eScsIG9wYWNpdHkpOw0KICAgIH07DQogICAgLyoqDQogICAgICogQG1lbWJl
ciBQcm9ncmVzc0JhclZpZXcNCiAgICAgKi8NCiAgICBQcm9ncmVzc0JhclZpZXcucHJvdG90eXBl
LnJlc2V0ID0gZnVuY3Rpb24oKSB7DQogICAgICAgIFZpZXcucHJvdG90eXBlLnJlc2V0LmNhbGwo
dGhpcyk7DQoNCiAgICAgICAgdGhpcy4kaW5kaWNhdG9yLnN0b3AodHJ1ZSk7DQogICAgICAgIHRo
aXMuJGluZGljYXRvci5jc3MoJ3dpZHRoJywgJzBweCcpOw0KICAgIH07DQogICAgLyoqDQogICAg
ICogQG1lbWJlciBQcm9ncmVzc0JhclZpZXcNCiAgICAgKi8NCiAgICBQcm9ncmVzc0JhclZpZXcu
cHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24oKSB7DQogICAgICAgIHRoaXMuJGluZGljYXRvci5z
dG9wKHRydWUpOw0KICAgIH07DQogICAgLyoqDQogICAgICogQG1lbWJlciBQcm9ncmVzc0JhclZp
ZXcNCiAgICAgKi8NCiAgICBQcm9ncmVzc0JhclZpZXcucHJvdG90eXBlLnBsYXkgPSBmdW5jdGlv
bigpIHsNCiAgICAgICAgdGhpcy4kaW5kaWNhdG9yLmFuaW1hdGUoew0KICAgICAgICAgICAgJ3dp
ZHRoJzogJzEwMCUnDQogICAgICAgIH0sIHRoaXMudGltZW91dCAtIHRoaXMudGltZUVsYXBzZWQs
ICdsaW5lYXInKTsNCiAgICB9Ow0KICAgIC8qKg0KICAgICAqIGVuZCBvZiBQcm9ncmVzc0JhclZp
ZXcgY2xhc3MNCiAgICAgKi8NCiAgICBwdWIuUHJvZ3Jlc3NCYXJWaWV3ID0gUHJvZ3Jlc3NCYXJW
aWV3Ow0KDQogICAgLyoqDQogICAgICogUm90YXRvclZpZXcgY2xhc3MgcHJvdmlkZXMgYSBsb2dp
YyBmb3IgYW5pbWF0ZSBhICd0aW1lIGluZGljYXRvcicsDQogICAgICogdGhhdCBzaG93cyB0aGUg
cHJvZ3Jlc3Mgb2YgdGltZSB3aXRoIHRoZSBmaWxsaW5nIHVwIHJpbmcNCiAgICAgKg0KICAgICAq
IE9wdGlvbnMgb2JqZWN0Og0KICAgICAqIHsNCiAgICAgKiAgICAgJ29wYWNpdHknOiBOdW1iZXIg
dmFsdWUgLy9iZXR3ZWVuIDAgYW5kIDE7IGRlZmF1bHQgaXMgMC41DQogICAgICogfQ0KICAgICAq
DQogICAgICogVGhpcyBjbGFzcyBjYW4gYmUgcmVtb3ZlZCBpZiB0aGlzIGtpbmQgb2YgdmlldyBp
cyBub3QgdXNlZC4NCiAgICAgKg0KICAgICAqIEBjb25zdHJ1Y3Rvcg0KICAgICAqIEBwYXJhbSB7
U3RyaW5nfSBzZWxlY3RvciBhIHNlbGVjdG9yIHVzZWQgZm9yIHNlYXJjaGluZw0KICAgICAqIEBw
YXJhbSB7T2JqZWN0fSBvcHRpb25zICAgVmlldyBvcHRpb25zIG9iamVjdA0KICAgICAqLw0KICAg
IGZ1bmN0aW9uIFJvdGF0b3JWaWV3KHNlbGVjdG9yLCBvcHRpb25zKSB7DQogICAgICAgIFZpZXcu
Y2FsbCh0aGlzLCBzZWxlY3Rvcik7DQoNCiAgICAgICAgdmFyIGRlZmF1bHRzID0gew0KICAgICAg
ICAgICAgJ29wYWNpdHknOiAwLjUNCiAgICAgICAgfTsNCg0KICAgICAgICB0aGlzLnNldHRpbmdz
ID0gJC5leHRlbmQodHJ1ZSwge30sIGRlZmF1bHRzLCBvcHRpb25zKTsNCiAgICAgICAgdGhpcy4k
bWFzayA9IHRoaXMuJGluZGljYXRvci5maW5kKCdzcGFuLm1hc2snKS5maXJzdCgpOw0KICAgICAg
ICB0aGlzLiRyb3RhdG9yID0gdGhpcy4kaW5kaWNhdG9yLmZpbmQoJ3NwYW4ucm90YXRvcicpLmZp
cnN0KCk7DQoNCiAgICAgICAgZnVuY3Rpb24gcm90YXRlQ3NzKGRlZykgew0KICAgICAgICAgICAg
dmFyIHZhbHVlID0gJ3JvdGF0ZSgnICsgZGVnICsgJ2RlZyknOw0KDQogICAgICAgICAgICByZXR1
cm4gew0KICAgICAgICAgICAgICAgICctd2Via2l0LXRyYW5zZm9ybSc6IHZhbHVlLA0KICAgICAg
ICAgICAgICAgICctbW96LXRyYW5zZm9ybSc6IHZhbHVlLA0KICAgICAgICAgICAgICAgICctby10
cmFuc2Zvcm0nOiB2YWx1ZSwNCiAgICAgICAgICAgICAgICAnLW1zLXRyYW5zZm9ybSc6IHZhbHVl
LA0KICAgICAgICAgICAgICAgICd0cmFuc2Zvcm0nOiB2YWx1ZQ0KICAgICAgICAgICAgfTsNCiAg
ICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIGFuaW1hdGVSb3RhdG9yKCRyb3RhdG9yLCBvcHRp
b25zKSB7DQogICAgICAgICAgICB2YXIgZGVmYXVsdHMgPSB7DQogICAgICAgICAgICAgICAgICAg
ICdmb250U2l6ZSc6ICcxODBweCcsDQogICAgICAgICAgICAgICAgICAgICdhbmltYXRlT3B0aW9u
cyc6IHsNCiAgICAgICAgICAgICAgICAgICAgICAgICdzdGVwJzogZnVuY3Rpb24obm93KSB7DQog
ICAgICAgICAgICAgICAgICAgICAgICAgICAgJHJvdGF0b3IuY3NzKHJvdGF0ZUNzcyhub3cpKTsN
CiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAnZWFz
aW5nJzogJ2xpbmVhcicNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0s
DQogICAgICAgICAgICAgICAgc2V0dGluZ3MgPSAkLmV4dGVuZCh0cnVlLCB7fSwgZGVmYXVsdHMs
IG9wdGlvbnMpOw0KDQogICAgICAgICAgICAkcm90YXRvci5hbmltYXRlKHsNCiAgICAgICAgICAg
ICAgICAgICAgJ2ZvbnQtc2l6ZSc6IHNldHRpbmdzLmZvbnRTaXplDQogICAgICAgICAgICAgICAg
fSwNCiAgICAgICAgICAgICAgICBzZXR0aW5ncy5hbmltYXRlT3B0aW9ucyk7DQogICAgICAgIH0N
Cg0KICAgICAgICBmdW5jdGlvbiBwaGFzZVR3b0FuaW1hdGlvbigkbWFzaywgJHJvdGF0b3IsIGR1
cmF0aW9uKSB7DQogICAgICAgICAgICAkcm90YXRvci5hZGRDbGFzcygnaGFsZicpOw0KICAgICAg
ICAgICAgJG1hc2suYWRkQ2xhc3MoJ2hhbGYnKTsNCg0KICAgICAgICAgICAgYW5pbWF0ZVJvdGF0
b3IoJHJvdGF0b3IsIHsNCiAgICAgICAgICAgICAgICAnZm9udFNpemUnOiAnMzYwcHgnLA0KICAg
ICAgICAgICAgICAgICdhbmltYXRlT3B0aW9ucyc6IHsNCiAgICAgICAgICAgICAgICAgICAgJ2R1
cmF0aW9uJzogZHVyYXRpb24NCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9KTsNCiAg
ICAgICAgfQ0KDQogICAgICAgIGZ1bmN0aW9uIHBoYXNlT25lQW5pbWF0aW9uKCRtYXNrLCAkcm90
YXRvciwgZHVyYXRpb24sIHBoYXNlVHdvRHVyYXRpb24pIHsNCiAgICAgICAgICAgIGFuaW1hdGVS
b3RhdG9yKCRyb3RhdG9yLCB7DQogICAgICAgICAgICAgICAgJ2FuaW1hdGVPcHRpb25zJzogew0K
ICAgICAgICAgICAgICAgICAgICAnZHVyYXRpb24nOiBkdXJhdGlvbiwNCiAgICAgICAgICAgICAg
ICAgICAgJ2NvbXBsZXRlJzogZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBw
aGFzZVR3b0FuaW1hdGlvbigkbWFzaywgJHJvdGF0b3IsIHBoYXNlVHdvRHVyYXRpb24pOw0KICAg
ICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSk7DQog
ICAgICAgIH0NCg0KICAgICAgICB0aGlzLnJlc2V0Q3NzID0gZnVuY3Rpb24oKSB7DQogICAgICAg
ICAgICB0aGlzLiRyb3RhdG9yLnJlbW92ZUNsYXNzKCdoYWxmJyk7DQogICAgICAgICAgICB0aGlz
LiRyb3RhdG9yLmNzcyhyb3RhdGVDc3MoMCkpOw0KICAgICAgICAgICAgdGhpcy4kcm90YXRvci5j
c3MoJ2ZvbnQtc2l6ZScsICcwcHgnKTsNCg0KICAgICAgICAgICAgdGhpcy4kbWFzay5yZW1vdmVD
bGFzcygnaGFsZicpOw0KICAgICAgICB9Ow0KDQogICAgICAgIHRoaXMucGxheVBoYXNlT25lID0g
ZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB2YXIgZHVyYXRpb24gPSB0aGlzLnRpbWVvdXQgLyAy
IC0gdGhpcy50aW1lRWxhcHNlZDsNCiAgICAgICAgICAgIHBoYXNlT25lQW5pbWF0aW9uKHRoaXMu
JG1hc2ssIHRoaXMuJHJvdGF0b3IsIGR1cmF0aW9uLCB0aGlzLnRpbWVvdXQgLyAyKTsNCiAgICAg
ICAgfTsNCg0KICAgICAgICB0aGlzLnBsYXlQaGFzZVR3byA9IGZ1bmN0aW9uKCkgew0KICAgICAg
ICAgICAgdmFyIGR1cmF0aW9uID0gdGhpcy50aW1lb3V0IC0gdGhpcy50aW1lRWxhcHNlZDsNCiAg
ICAgICAgICAgIHBoYXNlVHdvQW5pbWF0aW9uKHRoaXMuJG1hc2ssIHRoaXMuJHJvdGF0b3IsIGR1
cmF0aW9uKTsNCiAgICAgICAgfTsNCiAgICB9DQogICAgUm90YXRvclZpZXcucHJvdG90eXBlID0g
bmV3IFZpZXcoKTsNCiAgICBSb3RhdG9yVmlldy5jb25zdHJ1Y3RvciA9IFJvdGF0b3JWaWV3Ow0K
ICAgIC8qKg0KICAgICAqIEBtZW1iZXIgUm90YXRvclZpZXcNCiAgICAgKi8NCiAgICBSb3RhdG9y
Vmlldy5wcm90b3R5cGUuaW5pdCA9IGZ1bmN0aW9uKHRpbWVvdXQpIHsNCiAgICAgICAgVmlldy5w
cm90b3R5cGUuaW5pdC5jYWxsKHRoaXMsIHRpbWVvdXQpOw0KDQogICAgICAgIGlmIChpc1RyYW5z
Zm9ybVN1cHBvcnRlZCgpKSB7DQogICAgICAgICAgICB0aGlzLiRpbmRpY2F0b3Iuc2hvdygpOw0K
ICAgICAgICAgICAgdGhpcy4kbWFzay5jc3MoJ29wYWNpdHknLCB0aGlzLnNldHRpbmdzLm9wYWNp
dHkpOw0KICAgICAgICB9DQogICAgfTsNCiAgICAvKioNCiAgICAgKiBAbWVtYmVyIFJvdGF0b3JW
aWV3DQogICAgICovDQogICAgUm90YXRvclZpZXcucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24o
KSB7DQogICAgICAgIFZpZXcucHJvdG90eXBlLnJlc2V0LmNhbGwodGhpcyk7DQoNCiAgICAgICAg
dGhpcy4kcm90YXRvci5zdG9wKHRydWUpOw0KICAgICAgICB0aGlzLnJlc2V0Q3NzKCk7DQogICAg
fTsNCiAgICAvKioNCiAgICAgKiBAbWVtYmVyIFJvdGF0b3JWaWV3DQogICAgICovDQogICAgUm90
YXRvclZpZXcucHJvdG90eXBlLnBhdXNlID0gZnVuY3Rpb24oKSB7DQogICAgICAgIHRoaXMuJHJv
dGF0b3Iuc3RvcCh0cnVlKTsNCiAgICB9Ow0KICAgIC8qKg0KICAgICAqIEBtZW1iZXIgUm90YXRv
clZpZXcNCiAgICAgKi8NCiAgICBSb3RhdG9yVmlldy5wcm90b3R5cGUucGxheSA9IGZ1bmN0aW9u
KCkgew0KICAgICAgICB2YXIgcGhhc2UgPSB0aGlzLnBsYXlQaGFzZU9uZTsNCiAgICAgICAgaWYg
KHRoaXMudGltZUVsYXBzZWQgPj0gdGhpcy50aW1lb3V0IC8gMikgew0KICAgICAgICAgICAgcGhh
c2UgPSB0aGlzLnBsYXlQaGFzZVR3bzsNCiAgICAgICAgfQ0KDQogICAgICAgIHBoYXNlLmNhbGwo
dGhpcyk7DQogICAgfTsNCiAgICAvKioNCiAgICAgKiBlbmQgb2YgUm90YXRvclZpZXcgY2xhc3MN
CiAgICAgKi8NCiAgICBwdWIuUm90YXRvclZpZXcgPSBSb3RhdG9yVmlldzsNCg0KICAgIHJldHVy
biBwdWI7DQp9KGpRdWVyeSkpOw0KLyoqDQogKiBlbmQgb2YgWEEuY29tcG9uZW50LmNhcm91c2Vs
cy5JbmRpY2F0b3JWaWV3cyBtb2R1bGUuDQogKi8=
----field----
field: {C06867FE-9A43-4C7D-B739-48780492D06F}
name: Extension
key: extension
content-length: 2

js
----field----
field: {6F47A0A5-9C94-4B48-ABEB-42D38DEF6054}
name: Mime Type
key: mime type
content-length: 24

application/x-javascript
----field----
field: {6954B7C7-2487-423F-8600-436CB3B6DC0E}
name: Size
key: size
content-length: 5

68543
----field----
field: {06D5295C-ED2F-4A54-9BF2-26228D113318}
name: __Icon
key: __icon
content-length: 61

-/media/35F24F1601B441E68B7F83CE6717579E.ashx?h=16&thn=1&w=16
----version----
language: en
version: 1
revision: 029eec32-47bd-4995-ad0b-81597efa4061

----field----
field: {25BED78C-4957-4165-998A-CA1B52F67497}
name: __Created
key: __created
content-length: 16

20171027T151626Z
----field----
field: {5DD74568-4D4B-44C1-B513-0AF5F4CDA34F}
name: __Created by
key: __created by
content-length: 22

sitecore\virtualssuser
----field----
field: {8CDC337E-A112-42FB-BBB4-4143751E123F}
name: __Revision
key: __revision
content-length: 36

029eec32-47bd-4995-ad0b-81597efa4061
----field----
field: {D9CF14B1-FA16-4BA6-9288-E8A174D4D522}
name: __Updated
key: __updated
content-length: 16

20171031T140238Z
----field----
field: {BADD9CF9-53E0-4D0C-BCC0-2D784C282F6A}
name: __Updated by
key: __updated by
content-length: 16

sitecore\unicorn
----version----
language: en
version: 2
revision: 2bc3a77b-8c60-4e1c-89f2-ab6fe0695b13

----field----
field: {25BED78C-4957-4165-998A-CA1B52F67497}
name: __Created
key: __created
content-length: 16

20171027T151626Z
----field----
field: {5DD74568-4D4B-44C1-B513-0AF5F4CDA34F}
name: __Created by
key: __created by
content-length: 22

sitecore\virtualssuser
----field----
field: {8CDC337E-A112-42FB-BBB4-4143751E123F}
name: __Revision
key: __revision
content-length: 36

2bc3a77b-8c60-4e1c-89f2-ab6fe0695b13
----field----
field: {D9CF14B1-FA16-4BA6-9288-E8A174D4D522}
name: __Updated
key: __updated
content-length: 16

20171031T140238Z
----field----
field: {BADD9CF9-53E0-4D0C-BCC0-2D784C282F6A}
name: __Updated by
key: __updated by
content-length: 16

sitecore\unicorn
