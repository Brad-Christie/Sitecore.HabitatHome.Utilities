---
ID: "a72fe340-d773-4d9b-9743-4decd653cb5c"
Parent: "809bde22-208d-499c-97e1-e6d854266115"
Template: "962b53c4-f93b-4df9-9821-415c867b8903"
Path: "/sitecore/media library/Themes/Habitat Sites/Habitat/Habitat/scripts/component-accordions"
DB: master
SharedFields:
- ID: "06d5295c-ed2f-4a54-9bf2-26228d113318"
  Hint: __Icon
  Value: "-/media/26E8063CCA2F4A50973BDD32FFE748F0.ashx?h=16&thn=1&w=16"
- ID: "40e50ed9-ba07-4702-992e-a912738d32dc"
  Hint: Blob
  BlobID: "cf78fd14-368b-43a4-874d-68b35ffae734"
  Value: LyogZ2xvYmFsIF86dHJ1ZSAqLw0KWEEuY29tcG9uZW50LmFjY29yZGlvbnMgPSAoZnVuY3Rpb24oJCkgew0KICAgIHZhciBwdWIgPSB7fTsNCg0KICAgIGZ1bmN0aW9uIHBhZ2VFZGl0b3IoKSB7DQogICAgICAgIGlmICgkKCdib2R5JykuaGFzQ2xhc3MoJ29uLXBhZ2UtZWRpdG9yJykpIHsNCiAgICAgICAgICAgIFNpdGVjb3JlLlBhZ2VNb2Rlcy5DaHJvbWVNYW5hZ2VyLnJlc2V0Q2hyb21lcygpOyAvL3BhZ2UgZWRpdG9yIGxpbmVzIGZpeA0KICAgICAgICB9DQogICAgfQ0KDQogICAgdmFyIHRvb2dsZUV2ZW50cyA9IHsNCiAgICAgICAgZm9jdXM6IGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygic2hvdyIpOw0KICAgICAgICB9LA0KICAgICAgICBibHVyOiBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoInNob3ciKTsNCiAgICAgICAgfQ0KICAgIH07DQoNCiAgICBmdW5jdGlvbiBoZWFkZXJCYWNrZ3JvdW5kKGhlYWRlcikgew0KICAgICAgICB2YXIgYmFja2dyb3VuZEljb24gPSAkKGhlYWRlciksDQogICAgICAgICAgICBiYWNrZ3JvdW5kID0gJChoZWFkZXIpLmZpbmQoJ2ltZycpLA0KICAgICAgICAgICAgYmFja2dyb3VuZFNyYyA9IGJhY2tncm91bmQuYXR0cignc3JjJyk7DQoNCiAgICAgICAgaWYgKGJhY2tncm91bmRTcmMpIHsNCiAgICAgICAgICAgIGJhY2tncm91bmRJY29uLnBhcmVudHMoJy5hY2NvcmRpb24nKS5hZGRDbGFzcygnYWNjb3JkaW9uLWltYWdlJyk7DQoNCiAgICAgICAgICAgIGJhY2tncm91bmRJY29uLmNzcyh7DQogICAgICAgICAgICAgICAgJ2JhY2tncm91bmQnOiAndXJsKCcgKyBiYWNrZ3JvdW5kU3JjICsgJyknLA0KICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLXJlcGVhdCc6ICduby1yZXBlYXQnLA0KICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLXNpemUnOiAnY292ZXInLA0KICAgICAgICAgICAgICAgICdiYWNrZ3JvdW5kLXBvc2l0aW9uJzogJzUwJSAxMDAlJw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIGJhY2tncm91bmQuaGlkZSgpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gY2FsY1NsaWRlU2l6ZShhY2MpIHsNCiAgICAgICAgdmFyIGFjY29yZGlvbldpZHRoID0gJChhY2MpLndpZHRoKCksDQogICAgICAgICAgICBhY2NvcmRpb25JdGVtcyA9ICQoYWNjKS5maW5kKCcuaXRlbScpLA0KICAgICAgICAgICAgbWF4SGVpZ2h0ID0gMDsNCg0KICAgICAgICBfLmVhY2goYWNjb3JkaW9uSXRlbXMsIGZ1bmN0aW9uKGl0ZW0pIHsNCiAgICAgICAgICAgIHZhciBpdGVtQ29udGVudCA9ICQoaXRlbSkuZmluZCgnLnRvZ2dsZS1jb250ZW50JyksDQogICAgICAgICAgICAgICAgaXRlbUhlYWRlciA9ICQoaXRlbSkuZmluZCgnLnRvZ2dsZS1oZWFkZXInKSwNCiAgICAgICAgICAgICAgICBzbGlkZVdpZHRoID0gYWNjb3JkaW9uV2lkdGggLSAoYWNjb3JkaW9uSXRlbXMubGVuZ3RoICogaXRlbUhlYWRlci5vdXRlcldpZHRoKCkpOw0KDQogICAgICAgICAgICBpZiAoJChpdGVtKS5oYXNDbGFzcygnYWN0aXZlJykpIHsNCiAgICAgICAgICAgICAgICAkKGl0ZW0pLmNzcyh7DQogICAgICAgICAgICAgICAgICAgICd3aWR0aCc6IHNsaWRlV2lkdGgNCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy93aWR0aA0KICAgICAgICAgICAgaXRlbUNvbnRlbnQuY3NzKHsNCiAgICAgICAgICAgICAgICAnd2lkdGgnOiAoJChhY2MpLmhhc0NsYXNzKCdhY2NvcmRpb24taW1hZ2UnKSkgPyBzbGlkZVdpZHRoICsgaXRlbUhlYWRlci5vdXRlcldpZHRoKCkgOiBzbGlkZVdpZHRoIC0gaXRlbUhlYWRlci5vdXRlcldpZHRoKCkgLSBwYXJzZUludChpdGVtSGVhZGVyLmNzcygncGFkZGluZycpKQ0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIC8vaGVpZ2h0DQogICAgICAgICAgICBpZiAoJChpdGVtKS5maW5kKCcudG9nZ2xlLWNvbnRlbnQnKS5oZWlnaHQoKSA+IG1heEhlaWdodCkgew0KICAgICAgICAgICAgICAgIG1heEhlaWdodCA9ICQoaXRlbSkuZmluZCgnLnRvZ2dsZS1jb250ZW50JykuaGVpZ2h0KCk7DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGFuaW1hdGVIb3Jpem9udGFsKHByb3BlcnRpZXMpIHsNCiAgICAgICAgdmFyIGFjY29yZGlvbiA9ICQodGhpcykucGFyZW50cygnLmFjY29yZGlvbicpLA0KICAgICAgICAgICAgcGFuZWwgPSAkKHRoaXMpLmNsb3Nlc3QoJy5pdGVtJyksDQogICAgICAgICAgICBoZWFkZXIgPSBwYW5lbC5maW5kKCcudG9nZ2xlLWhlYWRlcicpLA0KICAgICAgICAgICAgY29udGVudCA9IHBhbmVsLmZpbmQoJy50b2dnbGUtY29udGVudCcpLA0KICAgICAgICAgICAgaXRlbXMgPSBhY2NvcmRpb24uZmluZCgnLml0ZW0nKSwNCiAgICAgICAgICAgIHNpYmxpbmdzID0gcGFuZWwuc2libGluZ3MoKSwNCiAgICAgICAgICAgIHNpYmxpbmdzQ29udGVudCA9IHNpYmxpbmdzLmZpbmQoJy50b2dnbGUtY29udGVudCcpOw0KDQogICAgICAgIHNpYmxpbmdzLnN0b3AodHJ1ZSkuYW5pbWF0ZSh7DQogICAgICAgICAgICAid2lkdGgiOiAwDQogICAgICAgIH0sIHByb3BlcnRpZXMuc3BlZWQsIHByb3BlcnRpZXMuZWFzaW5nLCBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHNpYmxpbmdzQ29udGVudC5jc3Moew0KICAgICAgICAgICAgICAgICJkaXNwbGF5IjogIm5vbmUiDQogICAgICAgICAgICB9KTsNCiAgICAgICAgfSk7DQoNCiAgICAgICAgaWYgKHBhbmVsLmhhc0NsYXNzKCdhY3RpdmUnKSkgew0KDQogICAgICAgICAgICB2YXIgc2xpZGVXaWR0aCA9IGFjY29yZGlvbi5oYXNDbGFzcygnYWNjb3JkaW9uLWltYWdlJykgPyBjb250ZW50Lm91dGVyV2lkdGgoKSA6IChhY2NvcmRpb24ub3V0ZXJXaWR0aCgpIC0gKChpdGVtcy5sZW5ndGggLSAxKSAqIHBhbmVsLm91dGVyV2lkdGgoKSArIDIpKSwNCiAgICAgICAgICAgICAgICBjb250ZW50V2lkdGggPSBhY2NvcmRpb24uaGFzQ2xhc3MoJ2FjY29yZGlvbi1pbWFnZScpID8gc2xpZGVXaWR0aCA6IHNsaWRlV2lkdGggLSBoZWFkZXIub3V0ZXJXaWR0aCgpOw0KDQogICAgICAgICAgICBwYW5lbC5zdG9wKHRydWUpLmFuaW1hdGUoew0KICAgICAgICAgICAgICAgICJ3aWR0aCI6IHNsaWRlV2lkdGgNCiAgICAgICAgICAgIH0sIHByb3BlcnRpZXMuc3BlZWQsIHByb3BlcnRpZXMuZWFzaW5nLCBmdW5jdGlvbigpIHsNCg0KICAgICAgICAgICAgfSk7DQoNCg0KICAgICAgICAgICAgY29udGVudC5jc3Moew0KICAgICAgICAgICAgICAgICJ3aWR0aCI6IGNvbnRlbnRXaWR0aCwNCiAgICAgICAgICAgICAgICAiZGlzcGxheSI6ICJibG9jayINCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgIH0gZWxzZSB7DQoNCiAgICAgICAgICAgIHBhbmVsLnN0b3AodHJ1ZSkuYW5pbWF0ZSh7DQogICAgICAgICAgICAgICAgIndpZHRoIjogMA0KICAgICAgICAgICAgfSwgcHJvcGVydGllcy5zcGVlZCwgcHJvcGVydGllcy5lYXNpbmcsIGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgIGNvbnRlbnQuY3NzKHsNCiAgICAgICAgICAgICAgICAgICAgImRpc3BsYXkiOiAibm9uZSINCiAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZnVuY3Rpb24gYWNjb3JkaW9uKGFjYywgcHJvcGVydGllcykgew0KICAgICAgICB2YXIgZXYgPSAnY2xpY2snLA0KICAgICAgICAgICAgJGJvZHkgPSAkKCdib2R5JyksDQogICAgICAgICAgICB0b2dnbGVIZWFkZXIgPSBhY2MuZmluZCgnLnRvZ2dsZS1oZWFkZXInKTsNCg0KICAgICAgICBpZiAocHJvcGVydGllcy5leHBhbmRPbkhvdmVyKSB7DQogICAgICAgICAgICBpZiAoISRib2R5Lmhhc0NsYXNzKCdvbi1wYWdlLWVkaXRvcicpKSB7DQogICAgICAgICAgICAgICAgZXYgPSAnbW91c2VlbnRlcic7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGV2ID0gJ2NsaWNrJzsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICB9DQoNCiAgICAgICAgdG9nZ2xlSGVhZGVyLm9uKCJtb3VzZW92ZXIiLCB0b29nbGVFdmVudHMuZm9jdXMpOw0KICAgICAgICB0b2dnbGVIZWFkZXIub24oIm1vdXNlbGVhdmUiLCB0b29nbGVFdmVudHMuYmx1cik7DQogICAgICAgIHRvZ2dsZUhlYWRlci5vbigiZm9jdXMiLCB0b29nbGVFdmVudHMuZm9jdXMpOw0KICAgICAgICB0b2dnbGVIZWFkZXIub24oImJsdXIiLCB0b29nbGVFdmVudHMuYmx1cik7DQogICAgICAgIHRvZ2dsZUhlYWRlci5vbigia2V5dXAiLCBmdW5jdGlvbihlKSB7DQogICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7DQogICAgICAgICAgICAgICAgJCh0aGlzKS5jbGljaygpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9KTsNCg0KDQogICAgICAgIGlmIChhY2MuaGFzQ2xhc3MoJ2FjY29yZGlvbi1ob3Jpem9udGFsJykpIHsNCiAgICAgICAgICAgIC8vY2FsYyBzbGlkZSB3aWR0aA0KICAgICAgICAgICAgJCh3aW5kb3cpLm9uKCdsb2FkJywgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgY2FsY1NsaWRlU2l6ZShhY2MpOw0KICAgICAgICAgICAgfSk7DQoNCiAgICAgICAgICAgIF8uZWFjaCh0b2dnbGVIZWFkZXIsIGZ1bmN0aW9uKGhlYWRlcikgew0KICAgICAgICAgICAgICAgIGhlYWRlckJhY2tncm91bmQoaGVhZGVyKTsNCiAgICAgICAgICAgIH0pOw0KDQogICAgICAgIH0NCg0KICAgICAgICBpZiAoJCgnYm9keScpLmhhc0NsYXNzKCdvbi1wYWdlLWVkaXRvcicpKSB7DQogICAgICAgICAgICB0b2dnbGVIZWFkZXIgPSB0b2dnbGVIZWFkZXIuZmluZCgnLmNvbXBvbmVudC1jb250ZW50Jyk7DQogICAgICAgIH0NCiAgICAgICAgdG9nZ2xlSGVhZGVyLm9uKGV2LCBmdW5jdGlvbigpIHsNCiAgICAgICAgICAgIHZhciBhY2NvcmRpb24gPSAkKHRoaXMpLnBhcmVudHMoJy5hY2NvcmRpb24nKSwNCiAgICAgICAgICAgICAgICBwYW5lbCA9ICQodGhpcykuY2xvc2VzdCgnLml0ZW0nKSwNCiAgICAgICAgICAgICAgICAkYm9keSA9ICQoJ2JvZHknKSwNCiAgICAgICAgICAgICAgICBjb250ZW50ID0gcGFuZWwuZmluZCgnLnRvZ2dsZS1jb250ZW50JyksDQogICAgICAgICAgICAgICAgc2libGluZ3MgPSBwYW5lbC5zaWJsaW5ncygpLA0KICAgICAgICAgICAgICAgIHNpYmxpbmdzQ29udGVudCA9IHNpYmxpbmdzLmZpbmQoJy50b2dnbGUtY29udGVudCcpLA0KICAgICAgICAgICAgICAgIHRpbWVvdXRJZDsNCg0KICAgICAgICAgICAgdmFyIGNhbGxiYWNrID0gZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgcGFnZUVkaXRvcigpOw0KICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgaWYgKCFwcm9wZXJ0aWVzLmV4cGFuZE9uSG92ZXIpIHsNCiAgICAgICAgICAgICAgICBpZiAocHJvcGVydGllcy5jYW5PcGVuTXVsdGlwbGUpIHsNCiAgICAgICAgICAgICAgICAgICAgcGFuZWwudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoYWNjb3JkaW9uLmhhc0NsYXNzKCJhY2NvcmRpb24taG9yaXpvbnRhbCIpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRlSG9yaXpvbnRhbC5jYWxsKHRoaXMsIHByb3BlcnRpZXMpOw0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KDQogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuc3RvcCgpLnNsaWRlVG9nZ2xlKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogcHJvcGVydGllcy5zcGVlZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IHByb3BlcnRpZXMuZWFzaW5nDQogICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2spOw0KICAgICAgICAgICAgICAgICAgICB9DQoNCg0KICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgIGlmIChwcm9wZXJ0aWVzLmNhblRvZ2dsZSkgew0KDQoNCiAgICAgICAgICAgICAgICAgICAgICAgIHNpYmxpbmdzLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgcGFuZWwudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjb3JkaW9uLmhhc0NsYXNzKCJhY2NvcmRpb24taG9yaXpvbnRhbCIpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hbmltYXRpb24gZm9yIGhvcml6b250YWwgYWNjb3JkaW9uDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZUhvcml6b250YWwuY2FsbCh0aGlzLCBwcm9wZXJ0aWVzKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaWJsaW5nc0NvbnRlbnQuc3RvcCgpLnNsaWRlVXAoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHByb3BlcnRpZXMuc3BlZWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IHByb3BlcnRpZXMuZWFzaW5nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuc3RvcCgpLnNsaWRlVG9nZ2xlKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBwcm9wZXJ0aWVzLnNwZWVkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBwcm9wZXJ0aWVzLmVhc2luZw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayk7DQogICAgICAgICAgICAgICAgICAgICAgICB9DQoNCg0KICAgICAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgICAgICAgc2libGluZ3MucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgc2libGluZ3NDb250ZW50LnNsaWRlVXAoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogcHJvcGVydGllcy5zcGVlZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBwcm9wZXJ0aWVzLmVhc2luZw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2spOw0KDQogICAgICAgICAgICAgICAgICAgICAgICBwYW5lbC5hZGRDbGFzcygnYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50LnNsaWRlRG93bih7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBwcm9wZXJ0aWVzLnNwZWVkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlYXNpbmc6IHByb3BlcnRpZXMuZWFzaW5nDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMuY2FuVG9nZ2xlKSB7DQogICAgICAgICAgICAgICAgICAgIHBhbmVsLnVuYmluZCgnbW91c2VsZWF2ZScpOw0KDQogICAgICAgICAgICAgICAgICAgIGlmICghJGJvZHkuaGFzQ2xhc3MoJ29uLXBhZ2UtZWRpdG9yJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHBhbmVsLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dElkID0gc2V0VGltZW91dChmdW5jdGlvbigpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFuZWwucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoYWNjb3JkaW9uLmhhc0NsYXNzKCJhY2NvcmRpb24taG9yaXpvbnRhbCIpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FuaW1hdGlvbiBmb3IgaG9yaXpvbnRhbCBhY2NvcmRpb24NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGVIb3Jpem9udGFsLmNhbGwodGhpcywgcHJvcGVydGllcyk7DQoNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQuc3RvcCgpLnNsaWRlVXAoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkdXJhdGlvbjogcHJvcGVydGllcy5zcGVlZCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBwcm9wZXJ0aWVzLmVhc2luZw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2spOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDApOw0KDQogICAgICAgICAgICAgICAgICAgICAgICB9KTsNCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICRib2R5Lm9uKCdjbGljaycsIGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhbmVsLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFjY29yZGlvbi5oYXNDbGFzcygiYWNjb3JkaW9uLWhvcml6b250YWwiKSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9hbmltYXRpb24gZm9yIGhvcml6b250YWwgYWNjb3JkaW9uDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmltYXRlSG9yaXpvbnRhbC5jYWxsKHRoaXMsIHByb3BlcnRpZXMpOw0KDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50LnN0b3AoKS5zbGlkZVVwKHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHByb3BlcnRpZXMuc3BlZWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogcHJvcGVydGllcy5lYXNpbmcNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgMzAwKTsNCg0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KDQoNCiAgICAgICAgICAgICAgICAgICAgY29udGVudC51bmJpbmQoJ21vdXNlZW50ZXInKTsNCiAgICAgICAgICAgICAgICAgICAgY29udGVudC5vbignbW91c2VlbnRlcicsIGZ1bmN0aW9uKCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZCk7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAoYWNjb3JkaW9uLmhhc0NsYXNzKCJhY2NvcmRpb24taG9yaXpvbnRhbCIpKSB7DQogICAgICAgICAgICAgICAgICAgIHNpYmxpbmdzLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsNCg0KICAgICAgICAgICAgICAgICAgICBwYW5lbC50b2dnbGVDbGFzcygnYWN0aXZlJyk7DQogICAgICAgICAgICAgICAgICAgIC8vYW5pbWF0aW9uIGZvciBob3Jpem9udGFsIGFjY29yZGlvbg0KICAgICAgICAgICAgICAgICAgICBhbmltYXRlSG9yaXpvbnRhbC5jYWxsKHRoaXMsIHByb3BlcnRpZXMpOw0KDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgc2libGluZ3MucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgICAgICAgICBzaWJsaW5nc0NvbnRlbnQuc3RvcCgpLnNsaWRlVXAoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBwcm9wZXJ0aWVzLnNwZWVkLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVhc2luZzogcHJvcGVydGllcy5lYXNpbmcNCiAgICAgICAgICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayk7DQoNCiAgICAgICAgICAgICAgICAgICAgcGFuZWwuYWRkQ2xhc3MoJ2FjdGl2ZScpOw0KICAgICAgICAgICAgICAgICAgICBjb250ZW50LnNsaWRlRG93bih7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZHVyYXRpb246IHByb3BlcnRpZXMuc3BlZWQsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWFzaW5nOiBwcm9wZXJ0aWVzLmVhc2luZw0KICAgICAgICAgICAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0pOw0KICAgIH0NCg0KICAgIGZ1bmN0aW9uIGRpc2FibGVFbXB0eUFjY29yZGlvbnMoJGFjY29yZGlvbikgew0KICAgICAgICB2YXIgZW1wdHlQbGFjZWhvbGRlcnMgPSAkYWNjb3JkaW9uLmZpbmQoIi5pdGVtIC5zY0VtcHR5UGxhY2Vob2xkZXIiKSwNCiAgICAgICAgICAgIGksIGxlbmd0aCwNCiAgICAgICAgICAgIHBsYWNlaG9sZGVyQ29kZVRhZywNCiAgICAgICAgICAgIHBhcmVudCwNCiAgICAgICAgICAgICRwbGFjZWhvbGRlciwNCiAgICAgICAgICAgIHBsYWNlaG9sZGVySWQsDQogICAgICAgICAgICBwbGFjZWhvbGRlcktleSwNCiAgICAgICAgICAgIGVkaXRGcmFtZSwNCiAgICAgICAgICAgIGNocm9tZUtleSwNCiAgICAgICAgICAgIGg7DQoNCiAgICAgICAgZm9yIChpID0gMCwgbGVuZ3RoID0gZW1wdHlQbGFjZWhvbGRlcnMubGVuZ3RoOyBpIDwgbGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgICRwbGFjZWhvbGRlciA9ICQoZW1wdHlQbGFjZWhvbGRlcnNbaV0pOw0KICAgICAgICAgICAgcGxhY2Vob2xkZXJJZCA9ICRwbGFjZWhvbGRlci5hdHRyKCJzYy1wbGFjZWhvbGRlci1pZCIpOw0KDQogICAgICAgICAgICAvL2Rpc2FibGUgZWRpdCBmcmFtZXMNCiAgICAgICAgICAgIHBsYWNlaG9sZGVyQ29kZVRhZyA9ICRwbGFjZWhvbGRlci5zaWJsaW5ncygiY29kZVtjaHJvbWV0eXBlPSdwbGFjZWhvbGRlciddW2lkPSciICsgcGxhY2Vob2xkZXJJZCArICInXSIpOw0KICAgICAgICAgICAgdHJ5IHsNCiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcktleSA9IHBsYWNlaG9sZGVyQ29kZVRhZy5hdHRyKCJrZXkiKTsNCiAgICAgICAgICAgICAgICBpZiAodHlwZW9mKHBsYWNlaG9sZGVyS2V5KSA9PT0gInN0cmluZyIpIHsNCiAgICAgICAgICAgICAgICAgICAgZWRpdEZyYW1lID0gU2l0ZWNvcmUuUGFnZU1vZGVzLkNocm9tZU1hbmFnZXIuY2hyb21lcygpLmZpbHRlcihmdW5jdGlvbihjaHJvbWUpIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIGNocm9tZUtleSA9IGNocm9tZS5vcGVuaW5nTWFya2VyKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNocm9tZUtleSkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICAgICAgY2hyb21lS2V5ID0gY2hyb21lS2V5LmF0dHIoImtleSIpOw0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZihjaHJvbWVLZXkpICE9PSAidW5kZWZpbmVkIiAmJiBjaHJvbWVLZXkuaW5kZXhPZihwbGFjZWhvbGRlcktleSkgPT09IDA7DQogICAgICAgICAgICAgICAgICAgIH0pOw0KDQogICAgICAgICAgICAgICAgICAgIGVkaXRGcmFtZVswXS50eXBlLmNocm9tZS5kYXRhLmN1c3RvbS5lZGl0YWJsZSA9ICJmYWxzZSI7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhyb3cgNjY2Ow0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgLy9mYWxsYmFjayAtIGRlbGV0ZSBjb2RlIHRhZ3MgdG8gcHJldmVudCBpbnNlcnRpbmcgaW50byBwbGFjZWhvbGRlcnMNCiAgICAgICAgICAgICAgICAkcGxhY2Vob2xkZXIuc2libGluZ3MoImNvZGVbY2hyb21ldHlwZT0ncGxhY2Vob2xkZXInXSIpLnJlbW92ZSgpOw0KICAgICAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWFsZXJ0LCBuby1jb25zb2xlICovDQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkNvdWxkIG5vdCBkaXNhYmxlIGVkaXRpbmcgZm9yIHBsYWNlaG9sZGVyIiwgZSk7DQogICAgICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1hbGVydCwgbm8tY29uc29sZSAqLw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvL2FkanVzdCBoZWlnaHQsIGFuZCByZW1vdmUgcGxhY2Vob2xkZXIgImRhc2hlZCIgYmFja2dyb3VuZA0KICAgICAgICAgICAgcGFyZW50ID0gJHBsYWNlaG9sZGVyLnBhcmVudHMoIi50b2dnbGUtaGVhZGVyIik7DQogICAgICAgICAgICBpZiAocGFyZW50Lmxlbmd0aCAhPT0gMCkgew0KICAgICAgICAgICAgICAgIGggPSBwYXJzZUludChwYXJlbnQuY3NzKCJmb250LXNpemUiKSkgKiAyIHx8ICgkcGxhY2Vob2xkZXIuaGVpZ2h0KCkgLyAzKTsNCiAgICAgICAgICAgICAgICAkcGxhY2Vob2xkZXIuYXBwZW5kKCQoIjxwPltObyBjb21wb25lbnRzIGluIGhlYWRlcl08L3A+IikpOw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICBoID0gJHBsYWNlaG9sZGVyLmhlaWdodCgpOw0KICAgICAgICAgICAgICAgICRwbGFjZWhvbGRlci5hcHBlbmQoJCgiPHA+W05vIGNvbXBvbmVudHMgaW4gc2VjdGlvbl08L3A+IikpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaCArPSAicHgiOw0KICAgICAgICAgICAgJHBsYWNlaG9sZGVyLnJlbW92ZUNsYXNzKCJzY0VtcHR5UGxhY2Vob2xkZXIiKTsNCiAgICAgICAgICAgICRwbGFjZWhvbGRlci5jc3MoImhlaWdodCIsIGgpOw0KICAgICAgICB9DQoNCiAgICB9DQoNCiAgICBwdWIuaW5pdCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICB2YXIgYWNjb3JkaW9ucyA9ICQoJy5hY2NvcmRpb246bm90KC5pbml0aWFsaXplZCknKTsNCg0KICAgICAgICBhY2NvcmRpb25zLmVhY2goZnVuY3Rpb24oKSB7DQogICAgICAgICAgICB2YXIgcHJvcGVydGllcyA9ICQodGhpcykuZGF0YSgncHJvcGVydGllcycpLA0KICAgICAgICAgICAgICAgIGFjYyA9ICQodGhpcyk7DQoNCiAgICAgICAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCd0b2dnbGUnKSkgew0KICAgICAgICAgICAgICAgICQuZXh0ZW5kKHByb3BlcnRpZXMsIHsNCiAgICAgICAgICAgICAgICAgICAgJ2NhblRvZ2dsZSc6IHRydWUsDQogICAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGFjYy5maW5kKCcudG9nZ2xlLWNvbnRlbnQnKS5oaWRlKCk7DQogICAgICAgICAgICBpZiAocHJvcGVydGllcy5leHBhbmRlZEJ5RGVmYXVsdCkgew0KICAgICAgICAgICAgICAgIGFjYy5maW5kKCdsaTpmaXJzdC1jaGlsZCcpLmFkZENsYXNzKCdhY3RpdmUnKTsNCiAgICAgICAgICAgICAgICBhY2MuZmluZCgnbGk6Zmlyc3QtY2hpbGQnKS5maW5kKCcudG9nZ2xlLWNvbnRlbnQnKS5zaG93KCk7DQogICAgICAgICAgICB9DQoNCiAgICAgICAgICAgIGFjY29yZGlvbihhY2MsIHByb3BlcnRpZXMpOw0KICAgICAgICAgICAgZGlzYWJsZUVtcHR5QWNjb3JkaW9ucyhhY2MpOw0KICAgICAgICAgICAgYWNjLmFkZENsYXNzKCdpbml0aWFsaXplZCcpOw0KICAgICAgICB9KTsNCiAgICB9Ow0KDQogICAgcmV0dXJuIHB1YjsNCg0KfShqUXVlcnkpKTsNCg0KWEEucmVnaXN0ZXIoJ2FjY29yZGlvbnMnLCBYQS5jb21wb25lbnQuYWNjb3JkaW9ucyk7
- ID: "6954b7c7-2487-423f-8600-436cb3b6dc0e"
  Hint: Size
  Value: 14112
- ID: "6f47a0a5-9c94-4b48-abeb-42d38def6054"
  Hint: Mime Type
  Value: "application/x-javascript"
- ID: "c06867fe-9a43-4c7d-b739-48780492d06f"
  Hint: Extension
  Value: js
Languages:
- Language: en
  Versions:
  - Version: 1
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20171027T151626Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\virtualssuser
  - Version: 2
    Fields:
    - ID: "25bed78c-4957-4165-998a-ca1b52f67497"
      Hint: __Created
      Value: 20171027T151626Z
    - ID: "5dd74568-4d4b-44c1-b513-0af5f4cda34f"
      Hint: __Created by
      Value: |
        sitecore\virtualssuser
